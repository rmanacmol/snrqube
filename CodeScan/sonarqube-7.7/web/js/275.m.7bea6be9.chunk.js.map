{"version":3,"sources":["webpack:///./src/main/js/apps/portfolio/styles.css?506b","webpack:///./src/main/js/apps/portfolio/styles.css","webpack:///./src/main/js/apps/portfolio/components/Summary.tsx","webpack:///./src/main/js/api/report.ts","webpack:///./src/main/js/apps/portfolio/components/SubscriptionContainer.tsx","webpack:///./src/main/js/apps/portfolio/components/Subscription.tsx","webpack:///./src/main/js/apps/portfolio/components/Report.tsx","webpack:///./src/main/js/apps/portfolio/components/WorstProjects.tsx","webpack:///./src/main/js/apps/portfolio/components/RatingFreshness.tsx","webpack:///./src/main/js/apps/portfolio/components/ReleasabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/Effort.tsx","webpack:///./src/main/js/apps/portfolio/components/MeasuresButtonLink.tsx","webpack:///./src/main/js/apps/portfolio/components/HistoryButtonLink.tsx","webpack:///./src/main/js/apps/portfolio/components/MainRating.tsx","webpack:///./src/main/js/apps/portfolio/components/ReliabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/SecurityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/MaintainabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/Activity.tsx","webpack:///./src/main/js/apps/portfolio/utils.ts","webpack:///./src/main/js/apps/portfolio/components/App.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.tsx","webpack:///./node_modules/lodash/toFinite.js","webpack:///./src/main/js/components/controls/HelpTooltip.css?1425","webpack:///./src/main/js/components/controls/HelpTooltip.css","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/icons-components/QualifierIcon.tsx","webpack:///./node_modules/lodash/map.js","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./src/main/js/components/ui/Rating.tsx","webpack:///./src/main/js/components/ui/Level.css?5a2b","webpack:///./src/main/js/components/ui/Level.css","webpack:///./node_modules/lodash/groupBy.js","webpack:///./src/main/js/components/ui/Rating.css?38ca","webpack:///./src/main/js/components/ui/Rating.css","webpack:///./node_modules/lodash/toInteger.js","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/apps/projectActivity/utils.ts","webpack:///./src/main/js/helpers/organizations.ts","webpack:///./node_modules/lodash/_baseExtremum.js","webpack:///./src/main/js/components/icons-components/BubblesIcon.tsx","webpack:///./src/main/js/components/icons-components/VisibleIcon.tsx","webpack:///./src/main/js/components/common/PrivacyBadgeContainer.tsx","webpack:///./src/main/js/components/charts/BarChart.css?d69c","webpack:///./src/main/js/components/charts/BarChart.css","webpack:///./node_modules/lodash/_baseGt.js","webpack:///../sonar-docs/src/tooltips/project/visibility-private.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-paid-org-admin.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-paid-org.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-admin.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public.md","webpack:///./node_modules/lodash/flatMap.js","webpack:///./src/main/js/components/charts/LineChart.css?a838","webpack:///./src/main/js/components/icons-components/ChartLegendIcon.tsx","webpack:///./src/main/js/components/icons-components/HistoryIcon.tsx","webpack:///./src/main/js/components/charts/Histogram.css?58e5","webpack:///./src/main/js/components/charts/Histogram.css","webpack:///./src/main/js/components/charts/LineChart.css","webpack:///./node_modules/lodash/minBy.js","webpack:///./node_modules/lodash/_baseLt.js","webpack:///./src/main/js/components/charts/AdvancedTimeline.tsx","webpack:///./src/main/js/components/charts/AdvancedTimeline.css?76b9","webpack:///./src/main/js/components/charts/AdvancedTimeline.css","webpack:///./node_modules/lodash/chunk.js","webpack:///./node_modules/lodash/_baseSlice.js","webpack:///./src/main/js/api/time-machine.ts","webpack:///./src/main/js/components/charts/Histogram.tsx","webpack:///./src/main/js/components/charts/LanguageDistribution.tsx","webpack:///./src/main/js/components/charts/LanguageDistributionContainer.tsx","webpack:///./node_modules/lodash/max.js","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltipsContent.tsx","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltips.tsx","webpack:///./src/main/js/components/preview-graph/PreviewGraph.tsx"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","Summary","component","measures","projects","ncloc","nclocDistribution","index_js_exposed","className","id","description","react_router_es","to","Object","urls","componentKey","key","metric","Measure","metricKey","metricType","value","l10n","LanguageDistributionContainer","distribution","width","getReportUrl","window","baseUrl","encodeURIComponent","SubscriptionContainer","es","state","currentUser","rootReducer","[object Object]","props","super","this","mounted","stopLoading","setState","loading","handleSubscription","subscribed","handleSubscribe","request","catch","throwGlobalError","subscribe","then","handleUnsubscribe","unsubscribe","getEffectiveFrequencyText","effectiveFrequency","status","componentFrequency","globalFrequency","renderLoading","renderWhenSubscribed","AlertSuccessIcon","buttons","onClick","renderWhenNotSubscribed","nextProps","hasEmail","users","email","inner","Report_Report","renderHeader","loadStatus","_this$state","canDownload","download","name","href","target","canSubscribe","WorstProjects","subComponents","total","count","length","maxLoc","max_default","map","Number","projectsPageUrl","pathname","query","refKey","QualifierIcon","qualifier","renderCell","barWidth","Math","max","round","height","x","y","renderNcloc","helpers_measures","type","RatingFreshness","lastChange","rating","index_es","defaultMessage","values","Rating","small","data","JSON","parse","date","DateFromNow","ReleasabilityBox","lastReleasabilityChange","effort","Level","level","Effort","String","MeasuresButtonLink","BubblesIcon","size","HistoryButtonLink","HistoryIcon","MainRating","ReliabilityBox","lastReliabilityChange","rawEffort","SecurityBox","lastSecurityChange","MaintainabilityBox","lastMaintainabilityChange","Activity_Activity","fetchHistory","_getProjectActivityGr","utils","graph","customGraphs","graphMetrics","time_machine","metrics","join","timeMachine","history","forEach","measure","measureHistory","analysis","dates","renderWhenEmpty","prevProps","PreviewGraph","project","PORTFOLIO_METRICS","SUB_COMPONENTS_METRICS","convertMeasures","result","d","__webpack_exports__","App_App","isEmpty","isNotComputed","fetchMetrics","fetchData","Promise","all","api_measures","metricKeys","components","ps","s","assign","totalSubComponents","paging","renderEmpty","renderWhenNotComputed","_this$state2","renderSpinner","renderMain","visibility","PrivacyBadgeContainer","organization","tooltipProps","projectKey","mapDispatchToProps","rootActions","HelpTooltip","react__WEBPACK_IMPORTED_MODULE_0__","classnames__WEBPACK_IMPORTED_MODULE_1__","_Tooltip__WEBPACK_IMPORTED_MODULE_2__","_icons_components_HelpIcon__WEBPACK_IMPORTED_MODULE_3__","_app_theme__WEBPACK_IMPORTED_MODULE_4__","_props$children","children","fill","_props$tagName","tagName","mouseLeaveDelay","onShow","overlay","placement","toNumber","INFINITY","MAX_INTEGER","DocTooltip","_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1__","_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","DocMarkdownBlock","e","bind","open","close","doc","default","document","addEventListener","removeEventListener","childProps","overlayProps","isTooltip","longFormatterOption","DateFormatter","react_intl__WEBPACK_IMPORTED_MODULE_1__","_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","formatterOption","year","month","day","long","_Icon__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","qualifierIcons","app","style","brc","dev","dir","DirectoryIcon","fil","svw","trk","ProjectIcon","uts","UnitTestIcon","vw","cla","dev_prj","lib","pac","toLowerCase","FoundIcon","arrayMap","baseIteratee","baseMap","isArray","collection","iteratee","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","formatted","level-small","level-muted","muted","rating-small","rating-muted","baseAssignValue","createAggregator","hasOwnProperty","prototype","groupBy","call","toFinite","remainder","_utils__WEBPACK_IMPORTED_MODULE_1__","_ui_Rating__WEBPACK_IMPORTED_MODULE_2__","_ui_Level__WEBPACK_IMPORTED_MODULE_3__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_4__","_helpers_measures__WEBPACK_IMPORTED_MODULE_5__","decimals","formattedValue","tooltip","enhanceMeasure","getLeakValue","getRatingTooltip","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","KNOWN_RATINGS","leak","periods","period","finalMetricKey","substr","includes","getLeakPeriod","getPeriodLabel","getPeriodDate","_l10n__WEBPACK_IMPORTED_MODULE_0__","_dates__WEBPACK_IMPORTED_MODULE_1__","index","Array","find","getPeriod","dateFormatter","parameter","modeParam","mode","EVENT_TYPES","APPLICATION_EVENT_TYPES","DEFAULT_GRAPH","GRAPH_TYPES","GRAPHS_METRICS_DISPLAYED","issues","coverage","duplications","GRAPHS_METRICS","concat","PROJECT_ACTIVITY_GRAPH","PROJECT_ACTIVITY_GRAPH_CUSTOM","activityQueryChanged","prevQuery","nextQuery","category","datesQueryChanged","customMetricsChanged","lodash_isEqual__WEBPACK_IMPORTED_MODULE_1___default","customMetrics","from","hasDataValues","serie","some","point","Boolean","hasHistoryData","series","hasHistoryDataValue","historyQueryChanged","isCustomGraph","selectedDateQueryChanged","selectedDate","generateSeries","measuresHistory","displayedMetrics","lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default","filter","indexOf","uncoveredLines","linesToCover","idx","translatedName","_helpers_l10n__WEBPACK_IMPORTED_MODULE_7__","generateCoveredLinesMetric","findMetric","splitSeriesInGraphs","maxGraph","maxSeries","lodash_flatMap__WEBPACK_IMPORTED_MODULE_3___default","lodash_groupBy__WEBPACK_IMPORTED_MODULE_2___default","lodash_chunk__WEBPACK_IMPORTED_MODULE_4___default","slice","getSeriesMetricType","getAnalysesByVersionByDay","analyses","reduce","acc","currentVersion","versionEvent","events","event","newVersion","version","byDay","keys","_helpers_dates__WEBPACK_IMPORTED_MODULE_6__","getTime","toString","matchFilters","isAfterFrom","isBeforeTo","hasSelectedCategoryEvents","getDisplayedHistoryMetrics","getHistoryMetrics","getProjectActivityGraph","_helpers_storage__WEBPACK_IMPORTED_MODULE_8__","split","parseGraph","_helpers_query__WEBPACK_IMPORTED_MODULE_5__","parseQuery","urlQuery","serializeQuery","serializeUrlQuery","custom_metrics","selected_date","isPaidOrganization","hasPrivateAccess","isCurrentUserMemberOf","_users__WEBPACK_IMPORTED_MODULE_0__","subscription","userOrganizations","actions","admin","org","isSymbol","array","comparator","current","computed","fillRule","VisibleIcon","Icon","onSonarCloud","system","organizations","icon","theme","badge","classnames","badge-info","badge-icon","getDoc","Tooltip","_organization$actions","resolve","t","other","baseFlatten","ChartLegendIcon","COLORS","baseExtremum","baseLt","AdvancedTimeline","react__WEBPACK_IMPORTED_MODULE_5__","getRatingScale","availableHeight","d3_scale__WEBPACK_IMPORTED_MODULE_8__","domain","range","getLevelScale","getYScale","flatData","d3_array__WEBPACK_IMPORTED_MODULE_7__","nice","getXScale","startDate","endDate","availableWidth","dateRange","start","end","xScale","lodash_sortBy__WEBPACK_IMPORTED_MODULE_2___default","clamp","maxXRange","getScales","padding","lodash_flatten__WEBPACK_IMPORTED_MODULE_4___default","yScale","getSelectedDatePos","firstSerie","findIndex","p","valueOf","xRange","xPos","selectedDateXPos","selectedDateIdx","getEventMarker","half","handleWheel","preventDefault","parentBbox","currentTarget","getBoundingClientRect","mouseXPos","pageX","left","speed","deltaMode","zoomSpeed","leftPos","deltaY","rightPos","invert","handleZoomUpdate","updateZoom","handleMouseMove","updateTooltipPos","handleMouseEnter","mouseOver","handleMouseOut","updateTooltip","handleClick","updateSelectedDate","bisectX","right","previousPoint","nextPoint","renderHorizontalGrid","formatYTick","ticks","maxYTicksCount","formattedTicks","tick","lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default","dx","dy","textAnchor","x1","x2","y1","y2","renderXAxisTicks","_this$state3","format","tickFormat","nextTick","renderLeak","leakPeriodDate","_this$state4","yRange","leakWidth","_app_theme__WEBPACK_IMPORTED_MODULE_10__","renderLines","lineGenerator","d3_shape__WEBPACK_IMPORTED_MODULE_9__","defined","basisCurve","curve","classnames__WEBPACK_IMPORTED_MODULE_6__","renderDots","serieIdx","pointNotDefined","hasPointBefore","hasPointAfter","cx","cy","r","_helpers_types__WEBPACK_IMPORTED_MODULE_11__","dots","renderAreas","areaGenerator","y0","renderSelectedDate","_this$state5","renderClipPath","renderMouseEventsOverlay","zoomEnabled","mouseEvents","onWheel","onMouseEnter","onMouseMove","onMouseOut","scales","selectedDatePos","lodash_throttle__WEBPACK_IMPORTED_MODULE_1___default","lodash_isEqual__WEBPACK_IMPORTED_MODULE_3___default","disableZoom","isZoomed","chart-zoomed","hideGrid","hideXAxis","showAreas","defaultProps","eventSize","baseSlice","isIterateeCall","toInteger","nativeCeil","ceil","nativeMax","guard","resIndex","getAllTimeMachineData","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","prev","getTimeMachineData","pageIndex","pageSize","BAR_HEIGHT","DEFAULT_PADDING","Histogram_Histogram","_this$props","alignTicks","_this$props$padding","bandwidth","_this$props2","_this$props2$padding","yValues","yTooltips","_this$props3","yTicks","historyTickClass","bars","renderBar","renderValue","renderTick","_this$props4","_this$props4$padding","d3_scale_src","src","_","rangeRound","renderBars","cutLanguageName","languages","tokens","language","lines","parseInt","sortBy_default","langKey","lang","getLanguageName","baseGt","identity","PreviewGraphTooltipsContent","TOOLTIP_WIDTH","PreviewGraphTooltips_PreviewGraphTooltips","tooltipIdx","tooltipPos","popups","RightTop","graphWidth","LeftTop","top","formatValue","GRAPH_PADDING","MAX_GRAPH_NB","MAX_SERIES_PER_GRAPH","withRouter","getDisplayedMetrics","getSeries","myHistory","firstValid","minBy_default","router","branches","branchLike","tooltipXPos","_getProjectActivityGr2","AutoSizer","disableHeight","role","tabIndex","renderTimeline"],"mappings":"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","file":"js/275.m.7bea6be9.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.portfolio-measure-secondary-value {\\n  line-height: 24px;\\n  font-size: 18px;\\n  font-weight: 300;\\n}\\n\\n.portfolio-grid {\\n  position: relative;\\n  z-index: 10;\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center;\\n}\\n\\n.portfolio-grid > li {\\n  vertical-align: top;\\n  width: 50%;\\n  text-align: center;\\n}\\n\\n.portfolio-grid > li.text-middle {\\n  vertical-align: middle;\\n}\\n\\n.portfolio-freshness {\\n  line-height: 24px;\\n  margin-top: 12px;\\n  color: #777;\\n  font-size: 12px;\\n  white-space: nowrap;\\n}\\n\\n.portfolio-effort {\\n  margin-top: 12px;\\n  padding-top: 12px;\\n  border-top: 1px solid #e6e6e6;\\n}\\n\\n.portfolio-boxes {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: stretch;\\n  margin-bottom: 20px;\\n  padding: 15px 0;\\n  border: 1px solid #e6e6e6;\\n  background-color: #fff;\\n}\\n\\n.portfolio-box {\\n  position: relative;\\n  width: 25%;\\n  padding: 0 5px;\\n  border-radius: 3px;\\n  box-sizing: border-box;\\n  text-align: center;\\n}\\n\\n.portfolio-box-title {\\n  margin-bottom: 25px;\\n  font-size: 16px;\\n}\\n\\n.portfolio-box-title > .button-small > svg {\\n  margin-top: 0;\\n}\\n\\n.portfolio-box-rating,\\n.portfolio-box-rating .rating {\\n  display: block;\\n  width: 120px;\\n  height: 120px;\\n  line-height: 120px;\\n}\\n\\n.portfolio-box-rating {\\n  margin: 0 auto;\\n  border: none;\\n}\\n\\n.portfolio-box-rating .rating {\\n  border-radius: 120px;\\n  font-size: 60px;\\n  text-align: center;\\n}\\n\\n.portfolio-sub-components table.data > thead > tr > th {\\n  font-size: 13px;\\n  text-transform: none;\\n}\\n\\n.portfolio-sub-components-cell {\\n  width: 90px;\\n}\\n\\n.portfolio-meta-header {\\n  margin-bottom: 4px;\\n  color: #444;\\n}\\n\\n.portfolio-meta-card {\\n  min-width: 200px;\\n  box-sizing: border-box;\\n}\\n\\n.portfolio-meta-card + .portfolio-meta-card {\\n  margin-top: 16px;\\n  padding-top: 15px;\\n  border-top: 1px solid #e6e6e6;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport LanguageDistributionContainer from '../../../components/charts/LanguageDistributionContainer';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: { description?: string; key: string };\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function Summary({ component, measures }: Props) {\n  const { projects, ncloc } = measures;\n  const nclocDistribution = measures['ncloc_language_distribution'];\n\n  return (\n    <section className=\"big-spacer-bottom\" id=\"portfolio-summary\">\n      {component.description && <div className=\"big-spacer-bottom\">{component.description}</div>}\n\n      <ul className=\"portfolio-grid\">\n        <li>\n          <div className=\"portfolio-measure-secondary-value\">\n            {projects ? (\n              <Link\n                to={getComponentDrilldownUrl({ componentKey: component.key, metric: 'projects' })}>\n                <Measure metricKey=\"projects\" metricType=\"SHORT_INT\" value={projects} />\n              </Link>\n            ) : (\n              '0'\n            )}\n          </div>\n          <div className=\"spacer-top text-muted\">{translate('projects')}</div>\n        </li>\n        <li>\n          <div className=\"portfolio-measure-secondary-value\">\n            {ncloc ? (\n              <Link to={getComponentDrilldownUrl({ componentKey: component.key, metric: 'ncloc' })}>\n                <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={ncloc} />\n              </Link>\n            ) : (\n              '0'\n            )}\n          </div>\n          <div className=\"spacer-top text-muted\">{translate('metric.ncloc.name')}</div>\n        </li>\n      </ul>\n\n      {nclocDistribution && (\n        <div className=\"big-spacer-top\">\n          <LanguageDistributionContainer distribution={nclocDistribution} width={260} />\n        </div>\n      )}\n    </section>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ReportStatus {\n  canDownload?: boolean;\n  canSubscribe: boolean;\n  componentFrequency?: string;\n  globalFrequency: string;\n  subscribed?: boolean;\n}\n\nexport function getReportStatus(component: string): Promise<ReportStatus> {\n  return getJSON('/api/governance_reports/status', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getReportUrl(component: string): string {\n  return (\n    (window as any).baseUrl +\n    '/api/governance_reports/download?componentKey=' +\n    encodeURIComponent(component)\n  );\n}\n\nexport function subscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/subscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function unsubscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/unsubscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport Subscription from './Subscription';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(Subscription);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AlertSuccessIcon from '../../../components/icons-components/AlertSuccessIcon';\nimport { ReportStatus, subscribe, unsubscribe } from '../../../api/report';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { Button } from '../../../components/ui/buttons';\nimport { isLoggedIn } from '../../../helpers/users';\n\ninterface Props {\n  component: string;\n  currentUser: T.CurrentUser;\n  status: ReportStatus;\n}\n\ninterface State {\n  loading: boolean;\n  subscribed?: boolean;\n}\n\nexport default class Subscription extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { subscribed: props.status.subscribed, loading: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.status.subscribed !== this.props.status.subscribed) {\n      this.setState({ subscribed: nextProps.status.subscribed });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  handleSubscription = (subscribed: boolean) => {\n    if (this.mounted) {\n      this.setState({ loading: false, subscribed });\n    }\n  };\n\n  handleSubscribe = () => {\n    this.setState({ loading: true });\n    subscribe(this.props.component)\n      .then(() => this.handleSubscription(true))\n      .catch(this.stopLoading);\n  };\n\n  handleUnsubscribe = () => {\n    this.setState({ loading: true });\n    unsubscribe(this.props.component)\n      .then(() => this.handleSubscription(false))\n      .catch(this.stopLoading);\n  };\n\n  getEffectiveFrequencyText = () => {\n    const effectiveFrequency =\n      this.props.status.componentFrequency || this.props.status.globalFrequency;\n    return translate('report.frequency', effectiveFrequency, 'effective');\n  };\n\n  renderLoading = () => this.state.loading && <i className=\"spacer-left spinner\" />;\n\n  renderWhenSubscribed = () => (\n    <div className=\"js-subscribed\">\n      <div className=\"spacer-bottom\">\n        <AlertSuccessIcon className=\"pull-left spacer-right\" />\n        <div className=\"overflow-hidden\">\n          {translateWithParameters('report.subscribed', this.getEffectiveFrequencyText())}\n        </div>\n      </div>\n      <Button onClick={this.handleUnsubscribe}>{translate('report.unsubscribe')}</Button>\n      {this.renderLoading()}\n    </div>\n  );\n\n  renderWhenNotSubscribed = () => (\n    <div className=\"js-not-subscribed\">\n      <p className=\"spacer-bottom\">\n        {translateWithParameters('report.unsubscribed', this.getEffectiveFrequencyText())}\n      </p>\n      <Button className=\"js-report-subscribe\" onClick={this.handleSubscribe}>\n        {translate('report.subscribe')}\n      </Button>\n      {this.renderLoading()}\n    </div>\n  );\n\n  render() {\n    const hasEmail = isLoggedIn(this.props.currentUser) && !!this.props.currentUser.email;\n    const { subscribed } = this.state;\n\n    let inner;\n    if (hasEmail) {\n      inner = subscribed ? this.renderWhenSubscribed() : this.renderWhenNotSubscribed();\n    } else {\n      inner = <p className=\"note js-no-email\">{translate('report.no_email_to_subscribe')}</p>;\n    }\n\n    return <div className=\"big-spacer-top js-report-subscription\">{inner}</div>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SubscriptionContainer from './SubscriptionContainer';\nimport { getReportStatus, ReportStatus, getReportUrl } from '../../../api/report';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: { key: string; name: string };\n}\n\ninterface State {\n  loading: boolean;\n  status?: ReportStatus;\n}\n\nexport default class Report extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadStatus();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStatus() {\n    getReportStatus(this.props.component.key).then(\n      status => {\n        if (this.mounted) {\n          this.setState({ status, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  renderHeader = () => <h4>{translate('report.page')}</h4>;\n\n  render() {\n    const { component } = this.props;\n    const { status, loading } = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          {this.renderHeader()}\n          <i className=\"spinner\" />\n        </div>\n      );\n    }\n\n    if (!status) {\n      return null;\n    }\n\n    return (\n      <div>\n        {this.renderHeader()}\n\n        {!status.canDownload && (\n          <div className=\"note js-report-cant-download\">{translate('report.cant_download')}</div>\n        )}\n\n        {status.canDownload && (\n          <div className=\"js-report-can-download\">\n            {translate('report.can_download')}\n            <div className=\"spacer-top\">\n              <a\n                className=\"button js-report-download\"\n                download={component.name + ' - Executive Report.pdf'}\n                href={getReportUrl(component.key)}\n                target=\"_blank\">\n                {translate('report.print')}\n              </a>\n            </div>\n          </div>\n        )}\n\n        {status.canSubscribe && <SubscriptionContainer component={component.key} status={status} />}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { max } from 'lodash';\nimport { SubComponent } from '../types';\nimport Measure from '../../../components/measure/Measure';\nimport QualifierIcon from '../../../components/icons-components/QualifierIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { getProjectUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  subComponents: SubComponent[];\n  total: number;\n}\n\nexport default function WorstProjects({ component, subComponents, total }: Props) {\n  const count = subComponents.length;\n\n  if (!count) {\n    return null;\n  }\n\n  const maxLoc = max(\n    subComponents.map(component => Number(component.measures['ncloc'] || 0))\n  ) as number;\n\n  const projectsPageUrl = { pathname: '/code', query: { id: component } };\n\n  return (\n    <div className=\"panel panel-white portfolio-sub-components\" id=\"portfolio-sub-components\">\n      <table className=\"data zebra\">\n        <thead>\n          <tr>\n            <th>&nbsp;</th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Releasability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Reliability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Security')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Maintainability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric.ncloc.name')}\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {subComponents.map(component => (\n            <tr key={component.key}>\n              <td>\n                <Link\n                  className=\"link-with-icon\"\n                  to={getProjectUrl(component.refKey || component.key)}>\n                  <QualifierIcon qualifier={component.qualifier} /> {component.name}\n                </Link>\n              </td>\n              {component.qualifier === 'TRK'\n                ? renderCell(component.measures, 'alert_status', 'LEVEL')\n                : renderCell(component.measures, 'releasability_rating', 'RATING')}\n              {renderCell(component.measures, 'reliability_rating', 'RATING')}\n              {renderCell(component.measures, 'security_rating', 'RATING')}\n              {renderCell(component.measures, 'sqale_rating', 'RATING')}\n              {renderNcloc(component.measures, maxLoc)}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {total > count && (\n        <footer className=\"spacer-top note text-center\">\n          {translateWithParameters(\n            'x_of_y_shown',\n            formatMeasure(count, 'INT'),\n            formatMeasure(total, 'INT')\n          )}\n          <Link className=\"spacer-left\" to={projectsPageUrl}>\n            {translate('show_more')}\n          </Link>\n        </footer>\n      )}\n    </div>\n  );\n}\n\nfunction renderCell(measures: { [key: string]: string | undefined }, metric: string, type: string) {\n  return (\n    <td className=\"text-center\">\n      <Measure metricKey={metric} metricType={type} value={measures[metric]} />\n    </td>\n  );\n}\n\nfunction renderNcloc(measures: { [key: string]: string | undefined }, maxLoc: number) {\n  const ncloc = Number(measures['ncloc'] || 0);\n  const barWidth = maxLoc > 0 ? Math.max(1, Math.round((ncloc / maxLoc) * 50)) : 0;\n  return (\n    <td className=\"text-right\">\n      <span className=\"note\">\n        <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={measures['ncloc']} />\n      </span>\n      {maxLoc > 0 && (\n        <svg className=\"spacer-left\" height=\"16\" width=\"50\">\n          <rect className=\"bar-chart-bar\" height=\"10\" width={barWidth} x=\"0\" y=\"3\" />\n        </svg>\n      )}\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport Rating from '../../../components/ui/Rating';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  lastChange?: string;\n  rating?: string;\n}\n\nexport default function RatingFreshness({ lastChange, rating }: Props) {\n  if (!lastChange) {\n    return (\n      <div className=\"portfolio-freshness\">\n        {rating && (\n          <FormattedMessage\n            defaultMessage={translate('portfolio.has_always_been_x')}\n            id=\"portfolio.has_always_been_x\"\n            values={{ rating: <Rating small={true} value={rating} /> }}\n          />\n        )}\n      </div>\n    );\n  }\n\n  const data = JSON.parse(lastChange);\n\n  return (\n    <div className=\"portfolio-freshness\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.was_x_y')}\n        id=\"portfolio.was_x_y\"\n        values={{\n          rating: <Rating small={true} value={data.value} />,\n          date: <DateFromNow date={data.date} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport RatingFreshness from './RatingFreshness';\nimport Rating from '../../../components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\nimport Level from '../../../components/ui/Level';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function ReleasabilityBox({ component, measures }: Props) {\n  const rating = measures['releasability_rating'];\n  const lastReleasabilityChange = measures['last_change_on_releasability_rating'];\n  const effort = measures['releasability_effort'];\n\n  return (\n    <div className=\"portfolio-box portfolio-releasability\">\n      <h2 className=\"portfolio-box-title\">{translate('metric_domain.Releasability')}</h2>\n\n      {rating && (\n        <Link\n          className=\"portfolio-box-rating\"\n          to={getComponentDrilldownUrl({ componentKey: component, metric: 'alert_status' })}>\n          <Rating value={rating} />\n        </Link>\n      )}\n\n      <RatingFreshness lastChange={lastReleasabilityChange} rating={rating} />\n\n      {effort &&\n        Number(effort) > 0 && (\n          <div className=\"portfolio-effort\">\n            <Link\n              to={getComponentDrilldownUrl({ componentKey: component, metric: 'alert_status' })}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={effort}\n                />\n                {Number(effort) === 1 ? 'project' : 'projects'}\n              </span>\n            </Link>{' '}\n            <Level level=\"ERROR\" small={true} />\n          </div>\n        )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { FormattedMessage } from 'react-intl';\nimport Rating from '../../../components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  effort: { projects: number; rating: number };\n  metricKey: string;\n}\n\nexport default function Effort({ component, effort, metricKey }: Props) {\n  return (\n    <div className=\"portfolio-effort\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.x_in_y')}\n        id=\"portfolio.x_in_y\"\n        values={{\n          projects: (\n            <Link to={getComponentDrilldownUrl({ componentKey: component, metric: metricKey })}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={String(effort.projects)}\n                />\n                {translate('projects_')}\n              </span>\n            </Link>\n          ),\n          rating: <Rating small={true} value={effort.rating} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport BubblesIcon from '../../../components/icons-components/BubblesIcon';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n}\n\nexport default function MeasuresButtonLink({ component, metric }: Props) {\n  return (\n    <Link\n      className=\"button button-small spacer-left text-text-bottom\"\n      to={getComponentDrilldownUrl({ componentKey: component, metric })}>\n      <BubblesIcon size={14} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HistoryIcon from '../../../components/icons-components/HistoryIcon';\nimport { getMeasureHistoryUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n}\n\nexport default function HistoryButtonLink({ component, metric }: Props) {\n  return (\n    <Link\n      className=\"button button-small spacer-left text-text-bottom\"\n      to={getMeasureHistoryUrl(component, metric)}>\n      <HistoryIcon size={14} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Rating from '../../../components/ui/Rating';\nimport { getMeasureTreemapUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n  value: string;\n}\n\nexport default function MainRating({ component, metric, value }: Props) {\n  return (\n    <Link className=\"portfolio-box-rating\" to={getMeasureTreemapUrl(component, metric)}>\n      <Rating value={value} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport MainRating from './MainRating';\nimport RatingFreshness from './RatingFreshness';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function ReliabilityBox({ component, measures }: Props) {\n  const rating = measures['reliability_rating'];\n  const lastReliabilityChange = measures['last_change_on_reliability_rating'];\n  const rawEffort = measures['reliability_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-reliability\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Reliability')}\n        <MeasuresButtonLink component={component} metric=\"Reliability\" />\n        <HistoryButtonLink component={component} metric=\"reliability_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric=\"reliability_rating\" value={rating} />}\n\n      <RatingFreshness lastChange={lastReliabilityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey=\"reliability_rating\" />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport RatingFreshness from './RatingFreshness';\nimport MainRating from './MainRating';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function SecurityBox({ component, measures }: Props) {\n  const rating = measures['security_rating'];\n  const lastSecurityChange = measures['last_change_on_security_rating'];\n  const rawEffort = measures['security_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-security\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Security')}\n        <MeasuresButtonLink component={component} metric=\"Security\" />\n        <HistoryButtonLink component={component} metric=\"security_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric=\"security_rating\" value={rating} />}\n\n      <RatingFreshness lastChange={lastSecurityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey=\"security_rating\" />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MainRating from './MainRating';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport RatingFreshness from './RatingFreshness';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function MaintainabilityBox({ component, measures }: Props) {\n  const rating = measures['sqale_rating'];\n  const lastMaintainabilityChange = measures['last_change_on_maintainability_rating'];\n  const rawEffort = measures['maintainability_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-maintainability\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Maintainability')}\n        <MeasuresButtonLink component={component} metric=\"Maintainability\" />\n        <HistoryButtonLink component={component} metric=\"sqale_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric={'sqale_rating'} value={rating} />}\n\n      <RatingFreshness lastChange={lastMaintainabilityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey={'sqale_rating'} />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport {\n  getDisplayedHistoryMetrics,\n  DEFAULT_GRAPH,\n  getProjectActivityGraph\n} from '../../projectActivity/utils';\nimport PreviewGraph from '../../../components/preview-graph/PreviewGraph';\nimport { getAllTimeMachineData } from '../../../api/time-machine';\nimport { parseDate } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  metrics: { [key: string]: T.Metric };\n}\n\ninterface State {\n  history?: {\n    [metric: string]: Array<{ date: Date; value?: string }>;\n  };\n  loading: boolean;\n}\n\nexport default class Activity extends React.PureComponent<Props> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHistory();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchHistory();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHistory = () => {\n    const { component } = this.props;\n\n    const { graph, customGraphs } = getProjectActivityGraph(component);\n    let graphMetrics = getDisplayedHistoryMetrics(graph, customGraphs);\n    if (!graphMetrics || graphMetrics.length <= 0) {\n      graphMetrics = getDisplayedHistoryMetrics(DEFAULT_GRAPH, []);\n    }\n\n    this.setState({ loading: true });\n    return getAllTimeMachineData({ component, metrics: graphMetrics.join() }).then(\n      timeMachine => {\n        if (this.mounted) {\n          const history: { [metric: string]: Array<{ date: Date; value?: string }> } = {};\n          timeMachine.measures.forEach(measure => {\n            const measureHistory = measure.history.map(analysis => ({\n              date: parseDate(analysis.date),\n              value: analysis.value\n            }));\n            history[measure.metric] = measureHistory;\n          });\n          this.setState({ history, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderWhenEmpty = () => <div className=\"note\">{translate('component_measures.no_history')}</div>;\n\n  render() {\n    return (\n      <div className=\"big-spacer-bottom\">\n        <h4>{translate('project_activity.page')}</h4>\n\n        {this.state.loading ? (\n          <i className=\"spinner\" />\n        ) : (\n          this.state.history !== undefined && (\n            <PreviewGraph\n              history={this.state.history}\n              metrics={this.props.metrics}\n              project={this.props.component}\n              renderWhenEmpty={this.renderWhenEmpty}\n            />\n          )\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getNextRating(rating: number): number | undefined {\n  return rating > 1 ? rating - 1 : undefined;\n}\n\nfunction getWorstSeverity(data: string): { severity: string; count: number } | undefined {\n  const SEVERITY_ORDER = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\n  const severities: { [key: string]: number } = {};\n  data.split(';').forEach(equality => {\n    const [key, count] = equality.split('=');\n    severities[key] = Number(count);\n  });\n\n  for (let i = 0; i < SEVERITY_ORDER.length; i++) {\n    const count = severities[SEVERITY_ORDER[i]];\n    if (count > 0) {\n      return { severity: SEVERITY_ORDER[i], count };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getEffortToNextRating(\n  measures: Array<{ metric: { key: string }; value: string }>,\n  metricKey: string\n) {\n  const measure = measures.find(measure => measure.metric.key === metricKey);\n  if (!measure) {\n    return undefined;\n  }\n  return getWorstSeverity(measure.value);\n}\n\nexport const PORTFOLIO_METRICS = [\n  'projects',\n  'ncloc',\n  'ncloc_language_distribution',\n\n  'releasability_rating',\n  'releasability_effort',\n\n  'sqale_rating',\n  'maintainability_rating_effort',\n\n  'reliability_rating',\n  'reliability_rating_effort',\n\n  'security_rating',\n  'security_rating_effort',\n\n  'last_change_on_releasability_rating',\n  'last_change_on_maintainability_rating',\n  'last_change_on_security_rating',\n  'last_change_on_reliability_rating'\n];\n\nexport const SUB_COMPONENTS_METRICS = [\n  'ncloc',\n  'releasability_rating',\n  'security_rating',\n  'reliability_rating',\n  'sqale_rating',\n  'alert_status'\n];\n\nexport function convertMeasures(measures: Array<{ metric: string; value?: string }>) {\n  const result: { [key: string]: string | undefined } = {};\n  measures.forEach(measure => {\n    result[measure.metric] = measure.value;\n  });\n  return result;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Summary from './Summary';\nimport Report from './Report';\nimport WorstProjects from './WorstProjects';\nimport ReleasabilityBox from './ReleasabilityBox';\nimport ReliabilityBox from './ReliabilityBox';\nimport SecurityBox from './SecurityBox';\nimport MaintainabilityBox from './MaintainabilityBox';\nimport Activity from './Activity';\nimport { SubComponent } from '../types';\nimport { PORTFOLIO_METRICS, SUB_COMPONENTS_METRICS, convertMeasures } from '../utils';\nimport { getMeasures } from '../../../api/measures';\nimport { getChildren } from '../../../api/components';\nimport { translate } from '../../../helpers/l10n';\nimport { fetchMetrics } from '../../../store/rootActions';\nimport { getMetrics, Store } from '../../../store/rootReducer';\nimport '../styles.css';\nimport PrivacyBadgeContainer from '../../../components/common/PrivacyBadgeContainer';\n\ninterface OwnProps {\n  component: T.Component;\n}\n\ninterface StateToProps {\n  metrics: { [key: string]: T.Metric };\n}\n\ninterface DispatchToProps {\n  fetchMetrics: () => void;\n}\n\ntype Props = StateToProps & DispatchToProps & OwnProps;\n\ninterface State {\n  loading: boolean;\n  measures?: { [key: string]: string | undefined };\n  subComponents?: SubComponent[];\n  totalSubComponents?: number;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchMetrics();\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData() {\n    this.setState({ loading: true });\n    Promise.all([\n      getMeasures({ component: this.props.component.key, metricKeys: PORTFOLIO_METRICS.join() }),\n      getChildren(this.props.component.key, SUB_COMPONENTS_METRICS, { ps: 20, s: 'qualifier' })\n    ]).then(\n      ([measures, subComponents]) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            measures: convertMeasures(measures),\n            subComponents: subComponents.components.map((component: any) => ({\n              ...component,\n              measures: convertMeasures(component.measures)\n            })),\n            totalSubComponents: subComponents.paging.total\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  isEmpty = () => this.state.measures === undefined || this.state.measures['ncloc'] === undefined;\n\n  isNotComputed = () =>\n    this.state.measures && this.state.measures['reliability_rating'] === undefined;\n\n  renderSpinner() {\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"text-center\">\n          <i className=\"spinner spinner-margin\" />\n        </div>\n      </div>\n    );\n  }\n\n  renderEmpty() {\n    return (\n      <div className=\"empty-search\">\n        <h3>\n          {!this.state.measures || !this.state.measures['projects']\n            ? translate('portfolio.empty')\n            : translate('portfolio.no_lines_of_code')}\n        </h3>\n      </div>\n    );\n  }\n\n  renderWhenNotComputed() {\n    return (\n      <div className=\"empty-search\">\n        <h3>{translate('portfolio.not_computed')}</h3>\n      </div>\n    );\n  }\n\n  renderMain() {\n    const { component } = this.props;\n    const { measures, subComponents, totalSubComponents } = this.state;\n\n    if (this.isEmpty()) {\n      return this.renderEmpty();\n    }\n\n    if (this.isNotComputed()) {\n      return this.renderWhenNotComputed();\n    }\n\n    return (\n      <div>\n        <div className=\"portfolio-boxes\">\n          <ReleasabilityBox component={component.key} measures={measures!} />\n          <ReliabilityBox component={component.key} measures={measures!} />\n          <SecurityBox component={component.key} measures={measures!} />\n          <MaintainabilityBox component={component.key} measures={measures!} />\n        </div>\n\n        {subComponents !== undefined &&\n          totalSubComponents !== undefined && (\n            <WorstProjects\n              component={component.key}\n              subComponents={subComponents}\n              total={totalSubComponents}\n            />\n          )}\n      </div>\n    );\n  }\n\n  render() {\n    const { component } = this.props;\n    const { loading, measures } = this.state;\n\n    if (loading) {\n      return this.renderSpinner();\n    }\n\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"page-with-sidebar\">\n          <div className=\"page-main\">{this.renderMain()}</div>\n\n          <aside className=\"page-sidebar-fixed\">\n            <div className=\"portfolio-meta-card\">\n              <h4 className=\"portfolio-meta-header\">\n                {translate('overview.about_this_portfolio')}\n                {component.visibility && (\n                  <PrivacyBadgeContainer\n                    className=\"spacer-left pull-right\"\n                    organization={component.organization}\n                    qualifier={component.qualifier}\n                    tooltipProps={{ projectKey: component.key }}\n                    visibility={component.visibility}\n                  />\n                )}\n              </h4>\n              <Summary component={component} measures={measures || {}} />\n            </div>\n\n            <div className=\"portfolio-meta-card\">\n              <Activity component={component.key} metrics={this.props.metrics} />\n            </div>\n\n            <div className=\"portfolio-meta-card\">\n              <Report component={component} />\n            </div>\n          </aside>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps: DispatchToProps = { fetchMetrics };\n\nconst mapStateToProps = (state: Store): StateToProps => ({\n  metrics: getMetrics(state)\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip, { Placement } from './Tooltip';\nimport HelpIcon from '../icons-components/HelpIcon';\nimport * as theme from '../../app/theme';\nimport './HelpTooltip.css';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  onShow?: () => void;\n  overlay: React.ReactNode;\n  placement?: Placement;\n  tagName?: string;\n}\n\nexport default function HelpTooltip(props: Props) {\n  const { children = <HelpIcon fill={theme.gray71} size={12} />, tagName = 'div' } = props;\n\n  return React.createElement(\n    tagName,\n    { className: classNames('help-tooltip', props.className) },\n    <Tooltip\n      mouseLeaveDelay={0.25}\n      onShow={props.onShow}\n      overlay={props.overlay}\n      placement={props.placement}>\n      <span className=\"display-inline-flex-center\">{children}</span>\n    </Tooltip>\n  );\n}\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.help-tooltip {\\n  display: inline-flex;\\n  align-items: center;\\n  vertical-align: middle;\\n}\\n\\n.help-toolip-link {\\n  display: block;\\n  width: 12px;\\n  height: 12px;\\n  border: none;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from '../controls/HelpTooltip';\nimport { lazyLoad } from '../lazyLoad';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: { [k: string]: string };\n}\n\ninterface State {\n  content?: string;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  state: State = { open: false };\n\n  componentDidMount() {\n    this.props.doc.then(\n      ({ default: content }) => {\n        this.setState({ content });\n      },\n      () => {}\n    );\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  close = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={this.state.content}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\nconst qualifierIcons: { [x: string]: (props: IconProps) => React.ReactElement<any> } = {\n  app: ApplicationIcon,\n  brc: SubProjectIcon,\n  dev: DeveloperIcon,\n  dir: DirectoryIcon,\n  fil: FileIcon,\n  svw: SubPortfolioIcon,\n  trk: ProjectIcon,\n  uts: UnitTestIcon,\n  vw: PortfolioIcon,\n\n  // deprecated:\n  cla: UnitTestIcon,\n  dev_prj: ProjectIcon,\n  lib: LibraryIcon,\n  pac: DirectoryIcon\n};\n\ninterface QualifierIconProps {\n  className?: string;\n  fill?: string;\n  qualifier: string | null | undefined;\n}\n\nexport default function QualifierIcon(props: QualifierIconProps) {\n  if (!props.qualifier) {\n    return null;\n  }\n\n  const qualifier = props.qualifier.toLowerCase();\n  const FoundIcon = qualifierIcons[qualifier];\n  return FoundIcon ? <FoundIcon className={props.className} fill={props.fill} /> : null;\n}\n\nfunction ApplicationIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M3.014 10.986a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm-5.004-.021c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zm-4.98 1.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM2.984 6a2 2 0 1 1-.001 4.001A2 2 0 0 1 2.984 6zm9.984 0a2 2 0 1 1-.001 4.001A2 2 0 0 1 12.968 6zm-5.004-.021c1.103 0 2 .897 2 2a2 2 0 1 1-2-2zM2.984 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM3 1.025a2 2 0 1 1-.001 4.001A2 2 0 0 1 3 1.025zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zM7.98 1.004c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zM3 2.025a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.98 2.004a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction DeveloperIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M7.974 8.02a3.5 3.5 0 0 1-2.482-1.017 3.428 3.428 0 0 1-1.028-2.455c0-.927.365-1.8 1.028-2.455a3.505 3.505 0 0 1 2.482-1.017 3.5 3.5 0 0 1 2.482 1.017 3.434 3.434 0 0 1 1.027 2.455c0 .928-.365 1.8-1.027 2.455A3.504 3.504 0 0 1 7.974 8.02zm0-5.778c-1.286 0-2.332 1.034-2.332 2.306s1.046 2.307 2.332 2.307c1.285 0 2.332-1.035 2.332-2.307S9.258 2.242 7.974 2.242zm3.534 6.418c.127.016.243.045.348.086.17.066.302.146.406.246.132.124.253.282.36.47.126.218.226.442.3.668.08.253.15.535.206.838.056.313.095.604.113.867.02.28.03.57.03.862 0 .532-.174.758-.306.882-.142.132-.397.31-.973.31H3.948c-.233 0-.437-.03-.606-.09-.14-.05-.26-.123-.366-.222-.13-.123-.306-.35-.306-.88 0-.294.01-.584.03-.863.018-.263.056-.554.112-.867a6.5 6.5 0 0 1 .207-.838c.073-.226.173-.45.298-.667.108-.19.23-.347.36-.47.106-.1.238-.18.407-.247.105-.04.22-.07.348-.086.202.13.432.277.683.435.342.217.756.4 1.265.564.523.166 1.06.25 1.59.25a5.25 5.25 0 0 0 1.592-.25c.51-.164.923-.348 1.266-.565.25-.158.48-.304.682-.435l-.002.002zm-.244-1.18c-.055 0-.184.066-.387.196-.202.13-.43.276-.685.437-.255.16-.586.307-.994.437-.408.13-.818.196-1.23.196-.41 0-.82-.065-1.228-.196a4.303 4.303 0 0 1-.993-.437c-.255-.16-.484-.306-.686-.437-.202-.13-.33-.196-.386-.196-.374 0-.716.06-1.026.183-.31.12-.572.283-.787.487a3.28 3.28 0 0 0-.57.737 4.662 4.662 0 0 0-.395.888c-.098.303-.18.633-.244.988a9.652 9.652 0 0 0-.128.992c-.02.306-.032.62-.032.942 0 .73.224 1.304.672 1.726.448.42 1.043.632 1.785.632h8.044c.743 0 1.34-.21 1.787-.633.447-.42.67-.996.67-1.725 0-.32-.01-.635-.03-.942a9.159 9.159 0 0 0-.374-1.98c-.098-.304-.23-.6-.395-.888a3.23 3.23 0 0 0-.57-.737 2.404 2.404 0 0 0-.788-.487 2.779 2.779 0 0 0-1.026-.183h-.004z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction DirectoryIcon({ className, fill = theme.orange, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 12.286V5.703a.673.673 0 0 0-.195-.5.644.644 0 0 0-.49-.203H6.704a.686.686 0 0 1-.5-.214.707.707 0 0 1-.203-.51v-.57c0-.2-.07-.363-.207-.502A.679.679 0 0 0 5.29 3H2.707a.672.672 0 0 0-.5.204.683.683 0 0 0-.206.5v8.582c0 .2.07.367.206.506.137.14.304.208.5.208h10.61a.66.66 0 0 0 .49-.208.685.685 0 0 0 .194-.506H14zm1-6.598v6.65c0 .458-.152.83-.475 1.16-.324.326-.7.502-1.15.502H2.647c-.452 0-.84-.175-1.162-.503a1.572 1.572 0 0 1-.486-1.158V3.654a1.6 1.6 0 0 1 .486-1.17A1.578 1.578 0 0 1 2.648 2h2.7c.45 0 .84.157 1.164.485.324.328.488.714.488 1.17V4h6.373c.452 0 .83.174 1.152.5.323.33.475.73.475 1.187v.001z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction FileIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 15H2V1l7.997.02c1 .034 1.759.758 2.428 1.42.667.663 1.561 1.605 1.574 2.555H14V15zM9 2H3v12h10V6H9V2zm3 10H4v-1h8v1zm0-2H4V9h8v1zm-1.988-5h3.008c-.012-.674-.714-1.443-1.204-1.937-.488-.495-1.039-1.058-1.816-1.055v2.96l.012.032z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction LibraryIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M1 13h4V3H1v10zm3-1H2v-2h2v2zM2 4h2v4H2V4zm4 9h4V3H6v10zm3-1H7v-2h2v2zM7 4h2v4H7V4zm4 9h4V3h-4v10zm3-1h-2v-2h2v2zm-2-8h2v4h-2V4z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction PortfolioIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.97 14.97H1.016V1.015H14.97V14.97zm-1-12.955H2.015V13.97H13.97V2.015zm-.973 10.982H9V9h3.997v3.997zM7 12.996H3.004V9H7v3.996zM11.997 10H10v1.997h1.997V10zM6 10H4.004v1.996H6V10zm1-3H3.006V3.006H7V7zm5.985 0H9V3.015h3.985V7zM6 4.006H4.006V6H6V4.006zm5.985.009H10V6h1.985V4.015z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction ProjectIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.985 13.988L1 14.005 1.02 5h13.966v8.988h-.001zM1.998 5.995l.006 7.02L14.022 13 14 6.004l-12.002-.01v.001zM3 4.5V4h9.996l.004.5h1l-.005-1.497-11.98.003L2 4.5h1zm1-2v-.504h8.002L12 2.5h1l-.004-1.495H3.003L3 2.5h1z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction SubPortfolioIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 7h2v9H7v-2H0V0h14v7zM8 8v7h7V8H8zm3 6H9v-2h2v2zm3 0h-2v-2h2v2zm-1-7V1H1v12h6V7h6zm-7 5H2V8h4v4zm5-1H9V9h2v2zm3 0h-2V9h2v2zM5 9H3v2h2V9zm1-3H2V2h4v4zm6 0H8V2h4v4zM5 3H3v2h2V3zm6 0H9v2h2V3z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction SubProjectIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 9V8h6v1h1v1h1v6H6v-6h1V9h1zm7 2H7v4h8v-4zm-1-7v3h-1V5H1v7h4v1H0V4h14zm-1-2v1.5h-1V3H2v.5H1V2h12zm-1-2v1.5h-1V1H3v.5H2V0h10z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction UnitTestIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 15H2V1l7.997.02c1.013-.03 1.57.893 2.239 1.555.667.663 1.75 1.47 1.763 2.42H14V15zM9 2H3v12h10V6H9V2zM7 8l-3 2.5L7 13V8zm1 5l3-2.5L8 8v5zm2.012-8h3.008c-.012-.674-.78-1.258-1.27-1.752-.488-.495-.973-1.243-1.75-1.24v2.96l.012.032z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\ninterface Props {\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: Props) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n\n  return <span className={className}>{formatted}</span>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Rating.css';\n\ninterface Props {\n  className?: string;\n  muted?: boolean;\n  small?: boolean;\n  value: string | number | undefined;\n}\n\nexport default function Rating({ className, muted = false, small = false, value }: Props) {\n  if (value === undefined) {\n    return <span>{''}</span>;\n  }\n  const formatted = formatMeasure(value, 'RATING');\n  return (\n    <span\n      className={classNames(\n        'rating',\n        'rating-' + formatted,\n        { 'rating-small': small, 'rating-muted': muted },\n        className\n      )}>\n      {formatted}\n    </span>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.level {\\n  display: inline-block;\\n  width: auto;\\n  min-width: 80px;\\n  padding-left: 9px;\\n  padding-right: 9px;\\n  height: 24px;\\n  line-height: 24px;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n  color: #fff;\\n  letter-spacing: 0.02em;\\n  font-size: 13px;\\n  font-weight: 400;\\n  text-align: center;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35);\\n}\\n\\n.level-small {\\n  width: auto;\\n  min-width: 64px;\\n  padding-left: 9px;\\n  padding-right: 9px;\\n  margin-top: -1px;\\n  margin-bottom: -1px;\\n  height: 20px;\\n  line-height: 20px;\\n  font-size: 12px;\\n}\\n\\n.level-muted {\\n  background-color: #bdbdbd !important;\\n}\\n\\na > .level {\\n  margin-bottom: -1px;\\n  border-bottom: 1px solid;\\n  transition: all 0.2s ease;\\n}\\n\\na > .level:hover {\\n  opacity: 0.8;\\n}\\n\\n.level-OK {\\n  background-color: #00aa00;\\n}\\n\\n.level-WARN {\\n  background-color: #ed7d20;\\n}\\n\\n.level-ERROR {\\n  background-color: #d4333f;\\n}\\n\\n.level-NONE {\\n  background-color: #b4b4b4;\\n}\\n\", \"\"]);\n\n// exports\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.rating {\\n  display: inline-block;\\n  width: 24px;\\n  height: 24px;\\n  line-height: 24px;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n  color: #fff;\\n  font-size: 16px;\\n  font-weight: 400;\\n  text-align: center;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35);\\n}\\n\\n.rating-muted {\\n  background-color: #bdbdbd !important;\\n  color: #fff !important;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35) !important;\\n}\\n\\na > .rating {\\n  margin-bottom: -1px;\\n  border-bottom: 1px solid;\\n  transition: all 0.2s ease;\\n}\\n\\na > .rating:hover {\\n  opacity: 0.8;\\n}\\n\\n.rating-A {\\n  line-height: 23px;\\n  background-color: #00aa00;\\n}\\n\\na > .rating-A {\\n  border-bottom-color: #00aa00;\\n}\\n\\n.rating-B {\\n  background-color: #b0d513;\\n}\\n\\na .rating-B {\\n  border-bottom-color: #b0d513;\\n}\\n\\n.rating-C {\\n  background-color: #eabe06;\\n}\\n\\na .rating-C {\\n  border-bottom-color: #eabe06;\\n}\\n\\n.rating-D {\\n  background-color: #ed7d20;\\n}\\n\\na .rating-D {\\n  border-bottom-color: #ed7d20;\\n}\\n\\n.rating-E {\\n  background-color: #e00;\\n}\\n\\na .rating-E {\\n  border-bottom-color: #e00;\\n}\\n\\n.rating-small {\\n  width: 18px;\\n  height: 18px;\\n  line-height: 18px;\\n  margin-top: -1px;\\n  margin-bottom: -1px;\\n  font-size: 12px;\\n}\\n\", \"\"]);\n\n// exports\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getRatingTooltip } from './utils';\nimport Rating from '../ui/Rating';\nimport Level from '../ui/Level';\nimport Tooltip from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span>{''}</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(\n  measure: T.Measure,\n  metrics: { [key: string]: T.Metric }\n): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from './l10n';\nimport { parseDate } from './dates';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter;\n  if (period.mode === 'previous_version' && !parameter) {\n    return translate('overview.period.previous_version_only_date');\n  }\n\n  if (period.mode === 'date' && parameter) {\n    parameter = dateFormatter(parameter);\n  } else if (period.mode === 'manual_baseline') {\n    if (!parameter) {\n      parameter = dateFormatter(period.date);\n    } else {\n      return translateWithParameters('overview.period.previous_version', parameter);\n    }\n  }\n\n  return translateWithParameters(`overview.period.${period.mode}`, parameter || '');\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { chunk, flatMap, groupBy, isEqual, sortBy } from 'lodash';\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsDate,\n  parseAsString,\n  serializeStringArray,\n  serializeDate,\n  serializeString,\n  RawQuery\n} from '../../helpers/query';\nimport { parseDate, startOfDay } from '../../helpers/dates';\nimport { getLocalizedMetricName, translate } from '../../helpers/l10n';\nimport { get } from '../../helpers/storage';\n\nexport type ParsedAnalysis = T.Omit<T.Analysis, 'date'> & { date: Date };\n\nexport interface Query {\n  category: string;\n  customMetrics: string[];\n  from?: Date;\n  graph: string;\n  project: string;\n  selectedDate?: Date;\n  to?: Date;\n}\n\nexport interface Point {\n  x: Date;\n  y: number | string | undefined;\n}\n\nexport interface Serie {\n  data: Point[];\n  name: string;\n  translatedName: string;\n  type: string;\n}\n\nexport interface HistoryItem {\n  date: Date;\n  value?: string;\n}\n\nexport interface MeasureHistory {\n  metric: string;\n  history: HistoryItem[];\n}\n\nexport const EVENT_TYPES = ['VERSION', 'QUALITY_GATE', 'QUALITY_PROFILE', 'OTHER'];\nexport const APPLICATION_EVENT_TYPES = ['QUALITY_GATE', 'DEFINITION_CHANGE', 'OTHER'];\nexport const DEFAULT_GRAPH = 'issues';\nexport const GRAPH_TYPES = ['issues', 'coverage', 'duplications', 'custom'];\nexport const GRAPHS_METRICS_DISPLAYED: { [x: string]: string[] } = {\n  issues: ['bugs', 'code_smells', 'vulnerabilities'],\n  coverage: ['lines_to_cover', 'uncovered_lines'],\n  duplications: ['ncloc', 'duplicated_lines']\n};\nexport const GRAPHS_METRICS: { [x: string]: string[] } = {\n  issues: GRAPHS_METRICS_DISPLAYED['issues'].concat([\n    'reliability_rating',\n    'security_rating',\n    'sqale_rating'\n  ]),\n  coverage: GRAPHS_METRICS_DISPLAYED['coverage'].concat(['coverage']),\n  duplications: GRAPHS_METRICS_DISPLAYED['duplications'].concat(['duplicated_lines_density'])\n};\n\nexport const PROJECT_ACTIVITY_GRAPH = 'sonar_project_activity.graph';\nexport const PROJECT_ACTIVITY_GRAPH_CUSTOM = 'sonar_project_activity.graph.custom';\n\nexport function activityQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return prevQuery.category !== nextQuery.category || datesQueryChanged(prevQuery, nextQuery);\n}\n\nexport function customMetricsChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.customMetrics, nextQuery.customMetrics);\n}\n\nexport function datesQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.from, nextQuery.from) || !isEqual(prevQuery.to, nextQuery.to);\n}\n\nexport function hasDataValues(serie: Serie) {\n  return serie.data.some(point => Boolean(point.y || point.y === 0));\n}\n\nexport function hasHistoryData(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1);\n}\n\nexport function hasHistoryDataValue(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1 && hasDataValues(serie));\n}\n\nexport function historyQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return prevQuery.graph !== nextQuery.graph;\n}\n\nexport function isCustomGraph(graph: string) {\n  return graph === 'custom';\n}\n\nexport function selectedDateQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.selectedDate, nextQuery.selectedDate);\n}\n\nexport function generateCoveredLinesMetric(\n  uncoveredLines: MeasureHistory,\n  measuresHistory: MeasureHistory[]\n) {\n  const linesToCover = measuresHistory.find(measure => measure.metric === 'lines_to_cover');\n  return {\n    data: linesToCover\n      ? uncoveredLines.history.map((analysis, idx) => ({\n          x: analysis.date,\n          y: Number(linesToCover.history[idx].value) - Number(analysis.value)\n        }))\n      : [],\n    name: 'covered_lines',\n    translatedName: translate('project_activity.custom_metric.covered_lines'),\n    type: 'INT'\n  };\n}\n\nfunction findMetric(key: string, metrics: T.Metric[] | { [key: string]: T.Metric }) {\n  if (Array.isArray(metrics)) {\n    return metrics.find(metric => metric.key === key);\n  }\n  return metrics[key];\n}\n\nexport function generateSeries(\n  measuresHistory: MeasureHistory[],\n  graph: string,\n  metrics: T.Metric[] | { [key: string]: T.Metric },\n  displayedMetrics: string[]\n): Serie[] {\n  if (displayedMetrics.length <= 0 || typeof measuresHistory === 'undefined') {\n    return [];\n  }\n  return sortBy(\n    measuresHistory\n      .filter(measure => displayedMetrics.indexOf(measure.metric) >= 0)\n      .map(measure => {\n        if (measure.metric === 'uncovered_lines' && !isCustomGraph(graph)) {\n          return generateCoveredLinesMetric(measure, measuresHistory);\n        }\n        const metric = findMetric(measure.metric, metrics);\n        return {\n          data: measure.history.map(analysis => ({\n            x: analysis.date,\n            y: metric && metric.type === 'LEVEL' ? analysis.value : Number(analysis.value)\n          })),\n          name: measure.metric,\n          translatedName: metric ? getLocalizedMetricName(metric) : measure.metric,\n          type: metric ? metric.type : 'INT'\n        };\n      }),\n    serie =>\n      displayedMetrics.indexOf(serie.name === 'covered_lines' ? 'uncovered_lines' : serie.name)\n  );\n}\n\nexport function splitSeriesInGraphs(series: Serie[], maxGraph: number, maxSeries: number) {\n  return flatMap(groupBy(series, serie => serie.type), type => chunk(type, maxSeries)).slice(\n    0,\n    maxGraph\n  );\n}\n\nexport function getSeriesMetricType(series: Serie[]) {\n  return series.length > 0 ? series[0].type : 'INT';\n}\n\ninterface AnalysesByDay {\n  byDay: { [x: string]: ParsedAnalysis[] };\n  version: string | null;\n  key: string | null;\n}\n\nexport function getAnalysesByVersionByDay(analyses: ParsedAnalysis[], query: Query) {\n  return analyses.reduce<AnalysesByDay[]>((acc, analysis) => {\n    let currentVersion = acc[acc.length - 1];\n    const versionEvent = analysis.events.find(event => event.category === 'VERSION');\n    if (versionEvent) {\n      const newVersion = { version: versionEvent.name, key: versionEvent.key, byDay: {} };\n      if (!currentVersion || Object.keys(currentVersion.byDay).length > 0) {\n        acc.push(newVersion);\n      } else {\n        acc[acc.length - 1] = newVersion;\n      }\n      currentVersion = newVersion;\n    } else if (!currentVersion) {\n      // APPs don't have version events, so let's create a fake one\n      currentVersion = { version: null, key: null, byDay: {} };\n      acc.push(currentVersion);\n    }\n\n    const day = startOfDay(parseDate(analysis.date))\n      .getTime()\n      .toString();\n\n    let matchFilters = true;\n    if (query.category || query.from || query.to) {\n      const isAfterFrom = !query.from || analysis.date >= query.from;\n      const isBeforeTo = !query.to || analysis.date <= query.to;\n      const hasSelectedCategoryEvents =\n        !query.category || analysis.events.find(event => event.category === query.category) != null;\n      matchFilters = isAfterFrom && isBeforeTo && hasSelectedCategoryEvents;\n    }\n\n    if (matchFilters) {\n      if (!currentVersion.byDay[day]) {\n        currentVersion.byDay[day] = [];\n      }\n      currentVersion.byDay[day].push(analysis);\n    }\n    return acc;\n  }, []);\n}\n\nexport function getDisplayedHistoryMetrics(graph: string, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS_DISPLAYED[graph];\n}\n\nexport function getHistoryMetrics(graph: string, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS[graph];\n}\n\nexport function getProjectActivityGraph(project: string) {\n  const customGraphs = get(PROJECT_ACTIVITY_GRAPH_CUSTOM, project);\n  return {\n    graph: get(PROJECT_ACTIVITY_GRAPH, project) || 'issues',\n    customGraphs: customGraphs ? customGraphs.split(',') : []\n  };\n}\n\nfunction parseGraph(value?: string) {\n  const graph = parseAsString(value);\n  return GRAPH_TYPES.includes(graph) ? graph : DEFAULT_GRAPH;\n}\n\nfunction serializeGraph(value: string) {\n  return value === DEFAULT_GRAPH ? undefined : value;\n}\n\nexport function parseQuery(urlQuery: RawQuery): Query {\n  return {\n    category: parseAsString(urlQuery['category']),\n    customMetrics: parseAsArray(urlQuery['custom_metrics'], parseAsString),\n    from: parseAsDate(urlQuery['from']),\n    graph: parseGraph(urlQuery['graph']),\n    project: parseAsString(urlQuery['id']),\n    to: parseAsDate(urlQuery['to']),\n    selectedDate: parseAsDate(urlQuery['selected_date'])\n  };\n}\n\nexport function serializeQuery(query: Query): RawQuery {\n  return cleanQuery({\n    category: serializeString(query.category),\n    from: serializeDate(query.from),\n    project: serializeString(query.project),\n    to: serializeDate(query.to)\n  });\n}\n\nexport function serializeUrlQuery(query: Query): RawQuery {\n  return cleanQuery({\n    category: serializeString(query.category),\n    custom_metrics: serializeStringArray(query.customMetrics),\n    from: serializeDate(query.from),\n    graph: serializeGraph(query.graph),\n    id: serializeString(query.project),\n    to: serializeDate(query.to),\n    selected_date: serializeDate(query.selectedDate)\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isLoggedIn } from './users';\n\nexport function isPaidOrganization(organization: T.Organization | undefined): boolean {\n  return Boolean(organization && organization.subscription === 'PAID');\n}\n\nexport function hasPrivateAccess(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return (\n    !isPaidOrganization(organization) ||\n    isCurrentUserMemberOf(currentUser, organization, userOrganizations)\n  );\n}\n\nexport function isCurrentUserMemberOf(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return Boolean(\n    organization &&\n      isLoggedIn(currentUser) &&\n      ((organization.actions && organization.actions.admin) ||\n        userOrganizations.some(org => org.key === organization.key))\n  );\n}\n","var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BubblesIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size} style={{ fillRule: 'nonzero' }}>\n      <path\n        d=\"M4.1 10.2c1 0 1.9.8 1.9 1.9S5.1 14 4.1 14s-1.9-.8-1.9-1.9.8-1.9 1.9-1.9m0-2C2 8.2.2 9.9.2 12.1S1.9 16 4.1 16 8 14.3 8 12.1 6.2 8.2 4.1 8.2zM10.3 2c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7-3.8-1.6-3.8-3.7S8.2 2 10.3 2m0-2C7.1 0 4.5 2.6 4.5 5.7s2.6 5.7 5.7 5.7S16 8.9 16 5.7 13.4 0 10.3 0z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function VisibleIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M13.524 8.403q-1.093-1.697-2.74-2.539 0.439 0.748 0.439 1.618 0 1.331-0.946 2.276t-2.276 0.946-2.276-0.946-0.946-2.276q0-0.87 0.439-1.618-1.647 0.842-2.74 2.539 0.957 1.474 2.399 2.348t3.125 0.874 3.125-0.874 2.399-2.348zM8.345 5.641q0-0.144-0.101-0.245t-0.245-0.101q-0.899 0-1.543 0.644t-0.644 1.543q0 0.144 0.101 0.245t0.245 0.101 0.245-0.101 0.101-0.245q0-0.619 0.439-1.057t1.057-0.439q0.144 0 0.245-0.101t0.101-0.245zM14.444 8.403q0 0.245-0.144 0.496-1.007 1.654-2.708 2.65t-3.593 0.996-3.593-1-2.708-2.647q-0.144-0.252-0.144-0.496t0.144-0.496q1.007-1.647 2.708-2.647t3.593-1 3.593 1 2.708 2.647q0.144 0.252 0.144 0.496z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { connect } from 'react-redux';\nimport * as theme from '../../app/theme';\nimport Tooltip from '../controls/Tooltip';\nimport { translate } from '../../helpers/l10n';\nimport { isSonarCloud } from '../../helpers/system';\nimport { isCurrentUserMemberOf, isPaidOrganization } from '../../helpers/organizations';\nimport {\n  getCurrentUser,\n  getOrganizationByKey,\n  getMyOrganizations,\n  Store\n} from '../../store/rootReducer';\nimport VisibleIcon from '../icons-components/VisibleIcon';\nimport DocTooltip from '../docs/DocTooltip';\n\ninterface StateToProps {\n  currentUser: T.CurrentUser;\n  organization?: T.Organization;\n  userOrganizations: T.Organization[];\n}\n\ninterface OwnProps {\n  className?: string;\n  organization: T.Organization | string | undefined;\n  qualifier: string;\n  tooltipProps?: { projectKey: string };\n  visibility: T.Visibility;\n}\n\ninterface Props extends OwnProps, StateToProps {\n  organization: T.Organization | undefined;\n}\n\nexport function PrivacyBadge({\n  className,\n  currentUser,\n  organization,\n  qualifier,\n  userOrganizations,\n  tooltipProps,\n  visibility\n}: Props) {\n  const onSonarCloud = isSonarCloud();\n  if (\n    visibility !== 'private' &&\n    (!onSonarCloud || !isCurrentUserMemberOf(currentUser, organization, userOrganizations))\n  ) {\n    return null;\n  }\n\n  let icon = null;\n  if (isPaidOrganization(organization) && visibility === 'public') {\n    icon = <VisibleIcon className=\"little-spacer-right\" fill={theme.blue} />;\n  }\n\n  const badge = (\n    <div\n      className={classNames('outline-badge', className, {\n        'badge-info': Boolean(icon),\n        'badge-icon': Boolean(icon)\n      })}>\n      {icon}\n      {translate('visibility', visibility)}\n    </div>\n  );\n\n  if (onSonarCloud && organization) {\n    return (\n      <DocTooltip\n        className={className}\n        doc={getDoc(visibility, icon, organization)}\n        overlayProps={{ ...tooltipProps, organization: organization.key }}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n\n  return (\n    <Tooltip overlay={translate('visibility', visibility, 'description', qualifier)}>\n      {badge}\n    </Tooltip>\n  );\n}\n\nconst mapStateToProps = (state: Store, { organization }: OwnProps) => {\n  if (typeof organization === 'string') {\n    organization = getOrganizationByKey(state, organization);\n  }\n  return {\n    currentUser: getCurrentUser(state),\n    organization,\n    userOrganizations: getMyOrganizations(state)\n  };\n};\n\nexport default connect(mapStateToProps)(PrivacyBadge);\n\nfunction getDoc(visibility: T.Visibility, icon: JSX.Element | null, organization: T.Organization) {\n  let doc;\n  const { actions = {} } = organization;\n  if (visibility === 'private') {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-private.md');\n  } else if (icon) {\n    if (actions.admin) {\n      doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-paid-org-admin.md');\n    } else {\n      doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-paid-org.md');\n    }\n  } else if (actions.admin) {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-admin.md');\n  } else {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public.md');\n  }\n  return doc;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.bar-chart-bar {\\n  fill: #4b9fd5;\\n}\\n\\n.bar-chart-tick {\\n  fill: #777;\\n  font-size: 12px;\\n  text-anchor: middle;\\n}\\n\", \"\"]);\n\n// exports\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n","module.exports = \"This project is private. Only the members of this organization are able to browse it and its source code.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Go to your project's [Administration > Permissions](/#sonarcloud#/project_roles?id=#projectKey#) to make it private.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Contact the project administrator to make it private.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Subscribe to a paid plan to get unlimited private projects in [Administration > Billing](/#sonarcloud#/organizations/#organization#/extension/billing/billing).\\n\\n---\\n\\nSee also: [Pricing](/sonarcloud-pricing/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Contact the organization administrator if you want to make it private.\\n\\n---\\n\\nSee also: [Pricing](/sonarcloud-pricing/)\\n\"","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon from './Icon';\nimport * as theme from '../../app/theme';\n\ninterface Props {\n  className?: string;\n  index: number;\n  size?: number;\n}\n\nconst COLORS = [theme.blue, theme.darkBlue, '#24c6e0'];\n\nexport default function ChartLegendIcon({ className, index, size }: Props) {\n  const fill = COLORS[index] || COLORS[0];\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.325 7.143v1.714q0 0.357-0.25 0.607t-0.607 0.25h-10.857q-0.357 0-0.607-0.25t-0.25-0.607v-1.714q0-0.357 0.25-0.607t0.607-0.25h10.857q0.357 0 0.607 0.25t0.25 0.607z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function HistoryIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.7 3.4v3.3c0 .1 0 .2-.1.2s-.2 0-.3-.1l-.9-.9-4.8 4.8c-.1.1-.1.1-.2.1s-.1 0-.2-.1L6.4 9l-3.2 3.2-1.5-1.5 4.5-4.5c.1-.1.1-.1.2-.1s.1 0 .2.1L8.4 8l3.5-3.5-.9-1c-.1-.1-.1-.2-.1-.3s.1-.1.2-.1h3.3c.1 0 .1 0 .2.1.1 0 .1.1.1.2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.histogram-tick {\\n  text-anchor: end;\\n}\\n\\n.histogram-tick-start {\\n  text-anchor: start;\\n}\\n\\n.histogram-value {\\n  text-anchor: start;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.line-chart-path {\\n  fill: none;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-path.line-chart-path-1 {\\n  stroke: #236a97;\\n}\\n\\n.line-chart-path.line-chart-path-2 {\\n  stroke: #24c6e0;\\n}\\n\\n.line-chart-area {\\n  fill: rgba(75, 159, 213, 0.3);\\n  stroke-width: 0;\\n}\\n\\n.line-chart-area.line-chart-area-1 {\\n  fill: rgba(35, 106, 151, 0.3);\\n}\\n\\n.line-chart-area.line-chart-area-2 {\\n  fill: rgba(36, 198, 224, 0.3);\\n}\\n\\n.line-chart-point {\\n  fill: #fff;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-tick {\\n  fill: #777;\\n  font-size: 12px;\\n  text-anchor: middle;\\n}\\n\\n.line-chart-tick-x {\\n  text-anchor: end;\\n}\\n\\n.line-chart-tick-x-right {\\n  text-anchor: start;\\n}\\n\\n.line-chart-grid {\\n  shape-rendering: crispedges;\\n  stroke: #eee;\\n}\\n\", \"\"]);\n\n// exports\n","var baseExtremum = require('./_baseExtremum'),\n    baseIteratee = require('./_baseIteratee'),\n    baseLt = require('./_baseLt');\n\n/**\n * This method is like `_.min` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * // The `_.property` iteratee shorthand.\n * _.minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nfunction minBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseLt)\n    : undefined;\n}\n\nmodule.exports = minBy;\n","/**\n * The base implementation of `_.lt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than `other`,\n *  else `false`.\n */\nfunction baseLt(value, other) {\n  return value < other;\n}\n\nmodule.exports = baseLt;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { flatten, isEqual, sortBy, throttle, uniq } from 'lodash';\nimport { bisector, extent, max } from 'd3-array';\nimport { scaleLinear, scalePoint, scaleTime, ScaleTime } from 'd3-scale';\nimport { line as d3Line, area, curveBasis } from 'd3-shape';\nimport * as theme from '../../app/theme';\nimport { Serie, Point } from '../../apps/projectActivity/utils';\nimport { isDefined } from '../../helpers/types';\nimport './LineChart.css';\nimport './AdvancedTimeline.css';\n\nexport interface Props {\n  basisCurve?: boolean;\n  endDate?: Date;\n  disableZoom?: boolean;\n  formatYTick?: (tick: number | string) => string;\n  hideGrid?: boolean;\n  hideXAxis?: boolean;\n  height: number;\n  width: number;\n  leakPeriodDate?: Date;\n  // used to avoid same y ticks labels\n  maxYTicksCount: number;\n  metricType: string;\n  padding: number[];\n  selectedDate?: Date;\n  series: Serie[];\n  showAreas?: boolean;\n  startDate?: Date;\n  updateSelectedDate?: (selectedDate?: Date) => void;\n  updateTooltip?: (selectedDate?: Date, tooltipXPos?: number, tooltipIdx?: number) => void;\n  updateZoom?: (start?: Date, endDate?: Date) => void;\n  zoomSpeed: number;\n}\n\ntype XScale = ScaleTime<number, number>;\n// TODO it should be `ScaleLinear<number, number> | ScalePoint<number> | ScalePoint<string>`, but it's super hard to make it work :'(\ntype YScale = any;\n\ninterface State {\n  maxXRange: number[];\n  mouseOver?: boolean;\n  selectedDate?: Date;\n  selectedDateXPos?: number;\n  selectedDateIdx?: number;\n  yScale: YScale;\n  xScale: XScale;\n}\n\nexport default class AdvancedTimeline extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    eventSize: 8,\n    maxYTicksCount: 4,\n    padding: [10, 10, 30, 60],\n    zoomSpeed: 1\n  };\n\n  constructor(props: Props) {\n    super(props);\n    const scales = this.getScales(props);\n    const selectedDatePos = this.getSelectedDatePos(scales.xScale, props.selectedDate);\n    this.state = { ...scales, ...selectedDatePos };\n    this.updateTooltipPos = throttle(this.updateTooltipPos, 40);\n    this.handleZoomUpdate = throttle(this.handleZoomUpdate, 40);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    let scales;\n    let selectedDatePos;\n    if (\n      nextProps.metricType !== this.props.metricType ||\n      nextProps.startDate !== this.props.startDate ||\n      nextProps.endDate !== this.props.endDate ||\n      nextProps.width !== this.props.width ||\n      nextProps.padding !== this.props.padding ||\n      nextProps.height !== this.props.height ||\n      nextProps.series !== this.props.series\n    ) {\n      scales = this.getScales(nextProps);\n      if (this.state.selectedDate != null) {\n        selectedDatePos = this.getSelectedDatePos(scales.xScale, this.state.selectedDate);\n      }\n    }\n\n    if (!isEqual(nextProps.selectedDate, this.props.selectedDate)) {\n      const xScale = scales ? scales.xScale : this.state.xScale;\n      selectedDatePos = this.getSelectedDatePos(xScale, nextProps.selectedDate);\n    }\n\n    if (scales || selectedDatePos) {\n      if (scales) {\n        this.setState({ ...scales });\n      }\n      if (selectedDatePos) {\n        this.setState({ ...selectedDatePos });\n      }\n\n      if (selectedDatePos && nextProps.updateTooltip) {\n        nextProps.updateTooltip(\n          selectedDatePos.selectedDate,\n          selectedDatePos.selectedDateXPos,\n          selectedDatePos.selectedDateIdx\n        );\n      }\n    }\n  }\n\n  getRatingScale = (availableHeight: number) => {\n    return scalePoint<number>()\n      .domain([5, 4, 3, 2, 1])\n      .range([availableHeight, 0]);\n  };\n\n  getLevelScale = (availableHeight: number) => {\n    return scalePoint()\n      .domain(['ERROR', 'WARN', 'OK'])\n      .range([availableHeight, 0]);\n  };\n\n  getYScale = (props: Props, availableHeight: number, flatData: Point[]): YScale => {\n    if (props.metricType === 'RATING') {\n      return this.getRatingScale(availableHeight);\n    } else if (props.metricType === 'LEVEL') {\n      return this.getLevelScale(availableHeight);\n    } else {\n      return scaleLinear()\n        .range([availableHeight, 0])\n        .domain([0, max(flatData, d => Number(d.y || 0)) || 1])\n        .nice();\n    }\n  };\n\n  getXScale = ({ startDate, endDate }: Props, availableWidth: number, flatData: Point[]) => {\n    const dateRange = extent(flatData, d => d.x) as [Date, Date];\n    const start = startDate && startDate > dateRange[0] ? startDate : dateRange[0];\n    const end = endDate && endDate < dateRange[1] ? endDate : dateRange[1];\n    const xScale: ScaleTime<number, number> = scaleTime()\n      .domain(sortBy([start, end]))\n      .range([0, availableWidth])\n      .clamp(false);\n    return {\n      xScale,\n      maxXRange: dateRange.map(xScale)\n    };\n  };\n\n  getScales = (props: Props) => {\n    const availableWidth = props.width - props.padding[1] - props.padding[3];\n    const availableHeight = props.height - props.padding[0] - props.padding[2];\n    const flatData = flatten(props.series.map(serie => serie.data));\n    return {\n      ...this.getXScale(props, availableWidth, flatData),\n      yScale: this.getYScale(props, availableHeight, flatData)\n    };\n  };\n\n  getSelectedDatePos = (xScale: XScale, selectedDate?: Date) => {\n    const firstSerie = this.props.series[0];\n    if (selectedDate && firstSerie) {\n      const idx = firstSerie.data.findIndex(p => p.x.valueOf() === selectedDate.valueOf());\n      const xRange = sortBy(xScale.range());\n      const xPos = xScale(selectedDate);\n      if (idx >= 0 && xPos >= xRange[0] && xPos <= xRange[1]) {\n        return {\n          selectedDate,\n          selectedDateXPos: xScale(selectedDate),\n          selectedDateIdx: idx\n        };\n      }\n    }\n    return { selectedDate: undefined, selectedDateXPos: undefined, selectedDateIdx: undefined };\n  };\n\n  getEventMarker = (size: number) => {\n    const half = size / 2;\n    return `M${half} 0 L${size} ${half} L ${half} ${size} L0 ${half} L${half} 0 L${size} ${half}`;\n  };\n\n  handleWheel = (event: React.WheelEvent<SVGElement>) => {\n    event.preventDefault();\n    const { maxXRange, xScale } = this.state;\n    const parentBbox = event.currentTarget.getBoundingClientRect();\n    const mouseXPos = (event.pageX - parentBbox.left) / parentBbox.width;\n    const xRange = xScale.range();\n    const speed = event.deltaMode\n      ? (25 / event.deltaMode) * this.props.zoomSpeed\n      : this.props.zoomSpeed;\n    const leftPos = xRange[0] - Math.round(speed * event.deltaY * mouseXPos);\n    const rightPos = xRange[1] + Math.round(speed * event.deltaY * (1 - mouseXPos));\n    const startDate = leftPos > maxXRange[0] ? xScale.invert(leftPos) : undefined;\n    const endDate = rightPos < maxXRange[1] ? xScale.invert(rightPos) : undefined;\n    this.handleZoomUpdate(startDate, endDate);\n  };\n\n  handleZoomUpdate = (startDate?: Date, endDate?: Date) => {\n    if (this.props.updateZoom) {\n      this.props.updateZoom(startDate, endDate);\n    }\n  };\n\n  handleMouseMove = (event: React.MouseEvent<SVGElement>) => {\n    const parentBbox = event.currentTarget.getBoundingClientRect();\n    this.updateTooltipPos(event.pageX - parentBbox.left);\n  };\n\n  handleMouseEnter = () => {\n    this.setState({ mouseOver: true });\n  };\n\n  handleMouseOut = () => {\n    const { updateTooltip } = this.props;\n    if (updateTooltip) {\n      this.setState({\n        mouseOver: false,\n        selectedDate: undefined,\n        selectedDateXPos: undefined,\n        selectedDateIdx: undefined\n      });\n      updateTooltip(undefined, undefined, undefined);\n    }\n  };\n\n  handleClick = () => {\n    const { updateSelectedDate } = this.props;\n    if (updateSelectedDate) {\n      updateSelectedDate(this.state.selectedDate || undefined);\n    }\n  };\n\n  updateTooltipPos = (xPos: number) => {\n    const firstSerie = this.props.series[0];\n    if (this.state.mouseOver && firstSerie) {\n      const { updateTooltip } = this.props;\n      const date = this.state.xScale.invert(xPos);\n      const bisectX = bisector<Point, Date>(d => d.x).right;\n      let idx = bisectX(firstSerie.data, date);\n      if (idx >= 0) {\n        const previousPoint = firstSerie.data[idx - 1];\n        const nextPoint = firstSerie.data[idx];\n        if (\n          !nextPoint ||\n          (previousPoint &&\n            date.valueOf() - previousPoint.x.valueOf() <= nextPoint.x.valueOf() - date.valueOf())\n        ) {\n          idx--;\n        }\n        const selectedDate = firstSerie.data[idx].x;\n        const xPos = this.state.xScale(selectedDate);\n        this.setState({ selectedDate, selectedDateXPos: xPos, selectedDateIdx: idx });\n        if (updateTooltip) {\n          updateTooltip(selectedDate, xPos, idx);\n        }\n      }\n    }\n  };\n\n  renderHorizontalGrid = () => {\n    const { formatYTick } = this.props;\n    const { xScale, yScale } = this.state;\n    const hasTicks = typeof yScale.ticks === 'function';\n    let ticks: Array<string | number> = hasTicks\n      ? yScale.ticks(this.props.maxYTicksCount)\n      : yScale.domain();\n\n    if (!ticks.length) {\n      ticks.push(yScale.domain()[1]);\n    }\n\n    // if there are duplicated ticks, that means 4 ticks are too much for this data\n    // so let's just use the domain values (min and max)\n    if (formatYTick) {\n      const formattedTicks = ticks.map(tick => formatYTick(tick));\n      if (ticks.length > uniq(formattedTicks).length) {\n        ticks = yScale.domain();\n      }\n    }\n\n    return (\n      <g>\n        {ticks.map(tick => (\n          <g key={tick}>\n            {formatYTick != null && (\n              <text\n                className=\"line-chart-tick line-chart-tick-x\"\n                dx=\"-1em\"\n                dy=\"0.3em\"\n                textAnchor=\"end\"\n                x={xScale.range()[0]}\n                y={yScale(tick)}>\n                {formatYTick(tick)}\n              </text>\n            )}\n            <line\n              className=\"line-chart-grid\"\n              x1={xScale.range()[0]}\n              x2={xScale.range()[1]}\n              y1={yScale(tick)}\n              y2={yScale(tick)}\n            />\n          </g>\n        ))}\n      </g>\n    );\n  };\n\n  renderXAxisTicks = () => {\n    const { xScale, yScale } = this.state;\n    const format = xScale.tickFormat(7);\n    const ticks = xScale.ticks(7);\n    const y = yScale.range()[0];\n    return (\n      <g>\n        {ticks.slice(0, -1).map((tick, index) => {\n          const nextTick = index + 1 < ticks.length ? ticks[index + 1] : xScale.domain()[1];\n          const x = (xScale(tick) + xScale(nextTick)) / 2;\n          return (\n            <text className=\"line-chart-tick\" dy=\"1.5em\" key={index} x={x} y={y}>\n              {format(tick)}\n            </text>\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderLeak = () => {\n    const { leakPeriodDate } = this.props;\n    if (!leakPeriodDate) {\n      return null;\n    }\n    const { xScale, yScale } = this.state;\n    const yRange = yScale.range();\n    const xRange = xScale.range();\n    const leakWidth = xRange[xRange.length - 1] - xScale(leakPeriodDate);\n    if (leakWidth < 0) {\n      return null;\n    }\n    return (\n      <rect\n        className=\"leak-chart-rect\"\n        fill={theme.leakColor}\n        height={yRange[0] - yRange[yRange.length - 1]}\n        width={leakWidth}\n        x={xScale(leakPeriodDate)}\n        y={yRange[yRange.length - 1]}\n      />\n    );\n  };\n\n  renderLines = () => {\n    const lineGenerator = d3Line<Point>()\n      .defined(d => Boolean(d.y || d.y === 0))\n      .x(d => this.state.xScale(d.x))\n      .y(d => this.state.yScale(d.y));\n    if (this.props.basisCurve) {\n      lineGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            className={classNames('line-chart-path', 'line-chart-path-' + idx)}\n            d={lineGenerator(serie.data) || undefined}\n            key={serie.name}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderDots = () => {\n    return (\n      <g>\n        {this.props.series\n          .map((serie, serieIdx) =>\n            serie.data\n              .map((point, idx) => {\n                const pointNotDefined = !point.y && point.y !== 0;\n                const hasPointBefore =\n                  serie.data[idx - 1] && (serie.data[idx - 1].y || serie.data[idx - 1].y === 0);\n                const hasPointAfter =\n                  serie.data[idx + 1] && (serie.data[idx + 1].y || serie.data[idx + 1].y === 0);\n                if (pointNotDefined || (hasPointBefore || hasPointAfter)) {\n                  return undefined;\n                }\n                return (\n                  <circle\n                    className={classNames('line-chart-dot', 'line-chart-dot-' + serieIdx)}\n                    cx={this.state.xScale(point.x)}\n                    cy={this.state.yScale(point.y)}\n                    key={serie.name + idx}\n                    r=\"2\"\n                  />\n                );\n              })\n              .filter(isDefined)\n          )\n          .filter(dots => dots.length > 0)}\n      </g>\n    );\n  };\n\n  renderAreas = () => {\n    const areaGenerator = area<Point>()\n      .defined(d => Boolean(d.y || d.y === 0))\n      .x(d => this.state.xScale(d.x))\n      .y1(d => this.state.yScale(d.y))\n      .y0(this.state.yScale(0));\n    if (this.props.basisCurve) {\n      areaGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            className={classNames('line-chart-area', 'line-chart-area-' + idx)}\n            d={areaGenerator(serie.data) || undefined}\n            key={serie.name}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderSelectedDate = () => {\n    const { selectedDateIdx, selectedDateXPos, yScale } = this.state;\n    const firstSerie = this.props.series[0];\n    if (selectedDateIdx == null || selectedDateXPos == null || !firstSerie) {\n      return null;\n    }\n\n    return (\n      <g>\n        <line\n          className=\"line-tooltip\"\n          x1={selectedDateXPos}\n          x2={selectedDateXPos}\n          y1={yScale.range()[0]}\n          y2={yScale.range()[1]}\n        />\n        {this.props.series.map((serie, idx) => {\n          const point = serie.data[selectedDateIdx];\n          if (!point || (!point.y && point.y !== 0)) {\n            return null;\n          }\n          return (\n            <circle\n              className={classNames('line-chart-dot', 'line-chart-dot-' + idx)}\n              cx={selectedDateXPos}\n              cy={yScale(point.y)}\n              key={serie.name}\n              r=\"4\"\n            />\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderClipPath = () => {\n    return (\n      <defs>\n        <clipPath id=\"chart-clip\">\n          <rect\n            height={this.state.yScale.range()[0] + 10}\n            transform=\"translate(0,-5)\"\n            width={this.state.xScale.range()[1]}\n          />\n        </clipPath>\n      </defs>\n    );\n  };\n\n  renderMouseEventsOverlay = (zoomEnabled: boolean) => {\n    const mouseEvents: Partial<React.SVGProps<SVGRectElement>> = {};\n    if (zoomEnabled) {\n      mouseEvents.onWheel = this.handleWheel;\n    }\n    if (this.props.updateTooltip) {\n      mouseEvents.onMouseEnter = this.handleMouseEnter;\n      mouseEvents.onMouseMove = this.handleMouseMove;\n      mouseEvents.onMouseOut = this.handleMouseOut;\n    }\n    if (this.props.updateSelectedDate) {\n      mouseEvents.onClick = this.handleClick;\n    }\n    return (\n      <rect\n        className=\"chart-mouse-events-overlay\"\n        height={this.state.yScale.range()[0]}\n        width={this.state.xScale.range()[1]}\n        {...mouseEvents}\n      />\n    );\n  };\n\n  render() {\n    if (!this.props.width || !this.props.height) {\n      return <div />;\n    }\n    const zoomEnabled = !this.props.disableZoom && this.props.updateZoom != null;\n    const isZoomed = Boolean(this.props.startDate || this.props.endDate);\n    return (\n      <svg\n        className={classNames('line-chart', { 'chart-zoomed': isZoomed })}\n        height={this.props.height}\n        width={this.props.width}>\n        {zoomEnabled && this.renderClipPath()}\n        <g transform={`translate(${this.props.padding[3]}, ${this.props.padding[0]})`}>\n          {this.props.leakPeriodDate != null && this.renderLeak()}\n          {!this.props.hideGrid && this.renderHorizontalGrid()}\n          {!this.props.hideXAxis && this.renderXAxisTicks()}\n          {this.props.showAreas && this.renderAreas()}\n          {this.renderLines()}\n          {this.renderDots()}\n          {this.renderSelectedDate()}\n          {this.renderMouseEventsOverlay(zoomEnabled)}\n        </g>\n      </svg>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.line-tooltip {\\n  fill: none;\\n  stroke: #777;\\n  stroke-width: 1px;\\n  shape-rendering: crispEdges;\\n}\\n\\n.chart-mouse-events-overlay {\\n  fill: none;\\n  stroke: none;\\n  pointer-events: all;\\n}\\n\\n.chart-zoomed .line-chart-area {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.chart-zoomed .line-chart-path {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.chart-zoomed .leak-chart-rect {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.line-chart-dot {\\n  fill: #4b9fd5;\\n}\\n\\n.line-chart-dot.line-chart-dot-1 {\\n  fill: #236a97;\\n}\\n\\n.line-chart-dot.line-chart-dot-2 {\\n  fill: #24c6e0;\\n}\\n\\n.line-chart-event {\\n  fill: #fff;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-event.VERSION {\\n  stroke: #4b9fd5;\\n}\\n\\n.line-chart-event.QUALITY_GATE {\\n  stroke: #00aa00;\\n}\\n\\n.line-chart-event.QUALITY_PROFILE {\\n  stroke: #ed7d20;\\n}\\n\\n.line-chart-event.OTHER {\\n  stroke: #9139d4;\\n}\\n\", \"\"]);\n\n// exports\n","var baseSlice = require('./_baseSlice'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * Creates an array of elements split into groups the length of `size`.\n * If `array` can't be split evenly, the final chunk will be the remaining\n * elements.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to process.\n * @param {number} [size=1] The length of each chunk\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the new array of chunks.\n * @example\n *\n * _.chunk(['a', 'b', 'c', 'd'], 2);\n * // => [['a', 'b'], ['c', 'd']]\n *\n * _.chunk(['a', 'b', 'c', 'd'], 3);\n * // => [['a', 'b', 'c'], ['d']]\n */\nfunction chunk(array, size, guard) {\n  if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n    size = 1;\n  } else {\n    size = nativeMax(toInteger(size), 0);\n  }\n  var length = array == null ? 0 : array.length;\n  if (!length || size < 1) {\n    return [];\n  }\n  var index = 0,\n      resIndex = 0,\n      result = Array(nativeCeil(length / size));\n\n  while (index < length) {\n    result[resIndex++] = baseSlice(array, index, (index += size));\n  }\n  return result;\n}\n\nmodule.exports = chunk;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\ninterface TimeMachineResponse {\n  measures: {\n    metric: string;\n    history: Array<{ date: string; value?: string }>;\n  }[];\n  paging: T.Paging;\n}\n\nexport function getTimeMachineData(\n  data: {\n    component: string;\n    from?: string;\n    metrics: string;\n    p?: number;\n    ps?: number;\n    to?: string;\n  } & T.BranchParameters\n): Promise<TimeMachineResponse> {\n  return getJSON('/api/measures/search_history', data).catch(throwGlobalError);\n}\n\nexport function getAllTimeMachineData(\n  data: {\n    component: string;\n    metrics: string;\n    from?: string;\n    p?: number;\n    to?: string;\n  } & T.BranchParameters,\n  prev?: TimeMachineResponse\n): Promise<TimeMachineResponse> {\n  return getTimeMachineData({ ...data, ps: 1000 }).then(r => {\n    const result = prev\n      ? {\n          measures: prev.measures.map((measure, idx) => ({\n            ...measure,\n            history: measure.history.concat(r.measures[idx].history)\n          })),\n          paging: r.paging\n        }\n      : r;\n\n    if (result.paging.pageIndex * result.paging.pageSize >= result.paging.total) {\n      return result;\n    }\n    return getAllTimeMachineData({ ...data, p: result.paging.pageIndex + 1 }, result);\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { max } from 'd3-array';\nimport { scaleLinear, scaleBand, ScaleLinear, ScaleBand } from 'd3-scale';\nimport Tooltip from '../controls/Tooltip';\nimport './BarChart.css';\nimport './Histogram.css';\n\ninterface Props {\n  alignTicks?: boolean;\n  bars: number[];\n  height: number;\n  padding?: [number, number, number, number];\n  yTicks?: string[];\n  yTooltips?: string[];\n  yValues?: string[];\n  width: number;\n}\n\nconst BAR_HEIGHT = 10;\nconst DEFAULT_PADDING = [10, 10, 10, 10];\n\ntype XScale = ScaleLinear<number, number>;\ntype YScale = ScaleBand<number>;\n\nexport default class Histogram extends React.PureComponent<Props> {\n  renderBar(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING } = this.props;\n\n    const width = Math.round(xScale(d)) + /* minimum bar width */ 1;\n    const x = xScale.range()[0] + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2);\n\n    return <rect className=\"bar-chart-bar\" height={BAR_HEIGHT} width={width} x={x} y={y} />;\n  }\n\n  renderValue(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING, yValues } = this.props;\n\n    const value = yValues && yValues[index];\n\n    if (!value) {\n      return null;\n    }\n\n    const x = xScale(d) + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n\n    return (\n      <Tooltip overlay={this.props.yTooltips && this.props.yTooltips[index]}>\n        <text className=\"bar-chart-tick histogram-value\" dx=\"1em\" dy=\"0.3em\" x={x} y={y}>\n          {value}\n        </text>\n      </Tooltip>\n    );\n  }\n\n  renderTick(index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, yTicks } = this.props;\n\n    const tick = yTicks && yTicks[index];\n\n    if (!tick) {\n      return null;\n    }\n\n    const x = xScale.range()[0];\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n    const historyTickClass = alignTicks ? 'histogram-tick-start' : 'histogram-tick';\n\n    return (\n      <text\n        className={'bar-chart-tick ' + historyTickClass}\n        dx={alignTicks ? 0 : '-1em'}\n        dy=\"0.3em\"\n        x={x}\n        y={y}>\n        {tick}\n      </text>\n    );\n  }\n\n  renderBars(xScale: XScale, yScale: YScale) {\n    return (\n      <g>\n        {this.props.bars.map((d, index) => {\n          return (\n            <g key={index}>\n              {this.renderBar(d, index, xScale, yScale)}\n              {this.renderValue(d, index, xScale, yScale)}\n              {this.renderTick(index, xScale, yScale)}\n            </g>\n          );\n        })}\n      </g>\n    );\n  }\n\n  render() {\n    const { bars, width, height, padding = DEFAULT_PADDING } = this.props;\n\n    const availableWidth = width - padding[1] - padding[3];\n    const xScale: XScale = scaleLinear()\n      .domain([0, max(bars)!])\n      .range([0, availableWidth]);\n\n    const availableHeight = height - padding[0] - padding[2];\n    const yScale: YScale = scaleBand<number>()\n      .domain(bars.map((_, index) => index))\n      .rangeRound([0, availableHeight]);\n\n    return (\n      <svg className=\"bar-chart\" height={this.props.height} width={this.props.width}>\n        <g transform={`translate(${this.props.alignTicks ? 4 : padding[3]}, ${padding[0]})`}>\n          {this.renderBars(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy } from 'lodash';\nimport Histogram from './Histogram';\nimport { formatMeasure } from '../../helpers/measures';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  alignTicks?: boolean;\n  distribution: string;\n  languages: T.Languages;\n  width: number;\n}\n\nexport default function LanguageDistribution(props: Props) {\n  let distribution = props.distribution.split(';').map(point => {\n    const tokens = point.split('=');\n    return { language: tokens[0], lines: parseInt(tokens[1], 10) };\n  });\n\n  distribution = sortBy(distribution, d => -d.lines);\n\n  const data = distribution.map(d => d.lines);\n  const yTicks = distribution.map(d => getLanguageName(d.language)).map(cutLanguageName);\n  const yTooltips = distribution.map(d => (d.lines > 1000 ? formatMeasure(d.lines, 'INT') : ''));\n  const yValues = distribution.map(d => formatMeasure(d.lines, 'SHORT_INT'));\n\n  return (\n    <Histogram\n      alignTicks={props.alignTicks}\n      bars={data}\n      height={distribution.length * 25}\n      padding={[0, 60, 0, 80]}\n      width={props.width}\n      yTicks={yTicks}\n      yTooltips={yTooltips}\n      yValues={yValues}\n    />\n  );\n\n  function getLanguageName(langKey: string) {\n    if (langKey === '<null>') {\n      return translate('unknown');\n    }\n    const lang = props.languages[langKey];\n    return lang ? lang.name : langKey;\n  }\n}\n\nfunction cutLanguageName(name: string) {\n  return name.length > 10 ? `${name.substr(0, 7)}...` : name;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport LanguageDistribution from './LanguageDistribution';\nimport { getLanguages, Store } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(LanguageDistribution);\n","var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    identity = require('./identity');\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nmodule.exports = max;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ChartLegendIcon from '../icons-components/ChartLegendIcon';\n\ninterface Props {\n  index: number;\n  translatedName: string;\n  value: string;\n}\n\nexport default function PreviewGraphTooltipsContent({ index, translatedName, value }: Props) {\n  return (\n    <tr className=\"overview-analysis-graph-tooltip-line\">\n      <td className=\"thin\">\n        <ChartLegendIcon className=\"little-spacer-right\" index={index} />\n      </td>\n      <td className=\"overview-analysis-graph-tooltip-value text-right little-spacer-right thin\">\n        {value}\n      </td>\n      <td>\n        <div className=\"text-ellipsis overview-analysis-graph-tooltip-description\">\n          {translatedName}\n        </div>\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PreviewGraphTooltipsContent from './PreviewGraphTooltipsContent';\nimport DateFormatter from '../intl/DateFormatter';\nimport { Popup, PopupPlacement } from '../ui/popups';\nimport { Serie } from '../../apps/projectActivity/utils';\n\ninterface Props {\n  formatValue: (value: number | string) => string;\n  graph: string;\n  graphWidth: number;\n  selectedDate: Date;\n  series: Serie[];\n  tooltipIdx: number;\n  tooltipPos: number;\n}\n\nconst TOOLTIP_WIDTH = 160;\n\nexport default class PreviewGraphTooltips extends React.PureComponent<Props> {\n  render() {\n    const { tooltipIdx } = this.props;\n    const top = 16;\n    let left = this.props.tooltipPos;\n    let placement = PopupPlacement.RightTop;\n    if (left > this.props.graphWidth - TOOLTIP_WIDTH) {\n      left -= TOOLTIP_WIDTH;\n      placement = PopupPlacement.LeftTop;\n    }\n\n    return (\n      <Popup\n        className=\"overview-analysis-graph-popup disabled-pointer-events\"\n        placement={placement}\n        style={{ top, left, width: TOOLTIP_WIDTH }}>\n        <div className=\"overview-analysis-graph-tooltip\">\n          <div className=\"overview-analysis-graph-tooltip-title\">\n            <DateFormatter date={this.props.selectedDate} long={true} />\n          </div>\n          <table className=\"width-100\">\n            <tbody>\n              {this.props.series.map((serie, idx) => {\n                const point = serie.data[tooltipIdx];\n                if (!point || (!point.y && point.y !== 0)) {\n                  return null;\n                }\n                return (\n                  <PreviewGraphTooltipsContent\n                    index={idx}\n                    key={serie.name}\n                    translatedName={serie.translatedName}\n                    value={this.props.formatValue(point.y)}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Popup>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { minBy } from 'lodash';\nimport { AutoSizer } from 'react-virtualized/dist/commonjs/AutoSizer';\nimport PreviewGraphTooltips from './PreviewGraphTooltips';\nimport AdvancedTimeline from '../charts/AdvancedTimeline';\nimport {\n  DEFAULT_GRAPH,\n  generateSeries,\n  getDisplayedHistoryMetrics,\n  getProjectActivityGraph,\n  getSeriesMetricType,\n  hasHistoryDataValue,\n  Serie,\n  splitSeriesInGraphs\n} from '../../apps/projectActivity/utils';\nimport { formatMeasure, getShortType } from '../../helpers/measures';\nimport { getBranchLikeQuery } from '../../helpers/branches';\nimport { withRouter, Router } from '../hoc/withRouter';\n\ninterface History {\n  [x: string]: Array<{ date: Date; value?: string }>;\n}\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  history?: History;\n  metrics: { [key: string]: T.Metric };\n  project: string;\n  renderWhenEmpty?: () => React.ReactNode;\n  router: Pick<Router, 'push'>;\n}\n\ninterface State {\n  customMetrics: string[];\n  graph: string;\n  selectedDate?: Date;\n  series: Serie[];\n  tooltipIdx?: number;\n  tooltipXPos?: number;\n}\n\nconst GRAPH_PADDING = [4, 0, 4, 0];\nconst MAX_GRAPH_NB = 1;\nconst MAX_SERIES_PER_GRAPH = 3;\n\nclass PreviewGraph extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const { graph, customGraphs: customMetrics } = getProjectActivityGraph(props.project);\n    const series = splitSeriesInGraphs(\n      this.getSeries(props.history, graph, customMetrics, props.metrics),\n      MAX_GRAPH_NB,\n      MAX_SERIES_PER_GRAPH\n    );\n    this.state = {\n      customMetrics,\n      graph,\n      series: series.length > 0 ? series[0] : []\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.history !== this.props.history || prevProps.metrics !== this.props.metrics) {\n      const { graph, customGraphs: customMetrics } = getProjectActivityGraph(this.props.project);\n      const series = splitSeriesInGraphs(\n        this.getSeries(this.props.history, graph, customMetrics, this.props.metrics),\n        MAX_GRAPH_NB,\n        MAX_SERIES_PER_GRAPH\n      );\n      this.setState({\n        customMetrics,\n        graph,\n        series: series.length > 0 ? series[0] : []\n      });\n    }\n  }\n\n  formatValue = (tick: number | string) => {\n    return formatMeasure(tick, getShortType(getSeriesMetricType(this.state.series)));\n  };\n\n  getDisplayedMetrics = (graph: string, customMetrics: string[]) => {\n    const metrics = getDisplayedHistoryMetrics(graph, customMetrics);\n    if (!metrics || metrics.length <= 0) {\n      return getDisplayedHistoryMetrics(DEFAULT_GRAPH, customMetrics);\n    }\n    return metrics;\n  };\n\n  getSeries = (\n    history: History | undefined,\n    graph: string,\n    customMetrics: string[],\n    metrics: { [x: string]: T.Metric }\n  ) => {\n    const myHistory = history;\n    if (!myHistory) {\n      return [];\n    }\n    const displayedMetrics = this.getDisplayedMetrics(graph, customMetrics);\n    const firstValid = minBy(\n      displayedMetrics.map(metric => myHistory[metric].find(p => p.value !== undefined)),\n      'date'\n    );\n    const measureHistory = displayedMetrics.map(metric => ({\n      metric,\n      history: firstValid\n        ? myHistory[metric].filter(p => p.date >= firstValid.date)\n        : myHistory[metric]\n    }));\n    return generateSeries(measureHistory, graph, metrics, displayedMetrics);\n  };\n\n  handleClick = () => {\n    this.props.router.push({\n      pathname: '/project/activity',\n      query: { id: this.props.project, ...getBranchLikeQuery(this.props.branchLike) }\n    });\n  };\n\n  updateTooltip = (selectedDate?: Date, tooltipXPos?: number, tooltipIdx?: number) =>\n    this.setState({ selectedDate, tooltipXPos, tooltipIdx });\n\n  renderTimeline() {\n    const { graph, selectedDate, series, tooltipIdx, tooltipXPos } = this.state;\n    return (\n      <AutoSizer disableHeight={true}>\n        {({ width }) => (\n          <div>\n            <AdvancedTimeline\n              height={80}\n              hideGrid={true}\n              hideXAxis={true}\n              metricType={getSeriesMetricType(series)}\n              padding={GRAPH_PADDING}\n              series={series}\n              showAreas={['coverage', 'duplications'].includes(graph)}\n              updateTooltip={this.updateTooltip}\n              width={width}\n            />\n            {selectedDate !== undefined &&\n              tooltipXPos !== undefined &&\n              tooltipIdx !== undefined && (\n                <PreviewGraphTooltips\n                  formatValue={this.formatValue}\n                  graph={graph}\n                  graphWidth={width}\n                  selectedDate={selectedDate}\n                  series={series}\n                  tooltipIdx={tooltipIdx}\n                  tooltipPos={tooltipXPos}\n                />\n              )}\n          </div>\n        )}\n      </AutoSizer>\n    );\n  }\n\n  render() {\n    const { series } = this.state;\n    if (!hasHistoryDataValue(series)) {\n      return this.props.renderWhenEmpty ? this.props.renderWhenEmpty() : null;\n    }\n\n    return (\n      <div\n        className=\"overview-analysis-graph big-spacer-bottom spacer-top\"\n        onClick={this.handleClick}\n        role=\"link\"\n        tabIndex={0}>\n        {this.renderTimeline()}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(PreviewGraph);\n"],"sourceRoot":""}