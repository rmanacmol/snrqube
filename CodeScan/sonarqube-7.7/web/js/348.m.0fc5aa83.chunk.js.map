{"version":3,"sources":["webpack:///./src/main/js/app/components/ProjectAdminContainer.tsx","webpack:///./src/main/js/app/utils/handleRequiredAuthorization.ts"],"names":["ProjectAdminContainer","react__WEBPACK_IMPORTED_MODULE_0__","[object Object]","this","checkPermissions","isProjectAdmin","Object","_utils_handleRequiredAuthorization__WEBPACK_IMPORTED_MODULE_1__","configuration","props","component","showSettings","_a","children","__rest","__webpack_require__","d","__webpack_exports__","handleRequiredAuthorization","_getStore__WEBPACK_IMPORTED_MODULE_0__","_getHistory__WEBPACK_IMPORTED_MODULE_1__","_store_appState__WEBPACK_IMPORTED_MODULE_2__","store","history","returnTo","window","location","pathname","search","hash","dispatch","replace","query","return_to"],"mappings":"wbAiCc,MAAOA,UAA8BC,EAAA,cACjDC,oBACEC,KAAKC,mBAGPF,qBACEC,KAAKC,mBAGPF,mBACOC,KAAKE,kBACRC,OAAAC,EAAA,EAAAD,GAIJJ,iBAAc,MACJM,EAAkBL,KAAKM,MAAMC,UAA7BF,cACR,OAAwB,MAAjBA,GAAyBA,EAAcG,aAGhDT,SACE,IAAKC,KAAKE,iBACR,OAAO,KAGH,MAAAO,EAAAT,KAAAM,MAAEI,EAAQD,EAARC,SAAUJ,EAAAK,EAAAF,EAAA,cAClB,OAAOX,EAAA,aAAmBY,EAAUJ,uCC3DxCM,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAAC,EAAAJ,EAAA,KAAAK,EAAAL,EAAA,KAAAM,EAAAN,EAAA,KAuBc,SAAUG,IACtB,MAAMI,EAAQhB,OAAAa,EAAA,QAAAb,GACRiB,EAAUjB,OAAAc,EAAA,EAAAd,GAEVkB,EAAWC,OAAOC,SAASC,SAAWF,OAAOC,SAASE,OAASH,OAAOC,SAASG,KAErFP,EAAMQ,SAASxB,OAAAe,EAAA,EAAAf,IACfiB,EAAQQ,QAAQ,CAAEJ,SAAU,gBAAiBK,MAAO,CAAEC,UAAWT","file":"js/348.m.0fc5aa83.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport handleRequiredAuthorization from '../utils/handleRequiredAuthorization';\n\ninterface Props {\n  children: JSX.Element;\n  branchLike?: T.BranchLike;\n  branchLikes: T.BranchLike[];\n  component: T.Component;\n  isInProgress?: boolean;\n  isPending?: boolean;\n  onBranchesChange: () => void;\n  onComponentChange: (changes: {}) => void;\n}\n\nexport default class ProjectAdminContainer extends React.PureComponent<Props> {\n  componentDidMount() {\n    this.checkPermissions();\n  }\n\n  componentDidUpdate() {\n    this.checkPermissions();\n  }\n\n  checkPermissions() {\n    if (!this.isProjectAdmin()) {\n      handleRequiredAuthorization();\n    }\n  }\n\n  isProjectAdmin() {\n    const { configuration } = this.props.component;\n    return configuration != null && configuration.showSettings;\n  }\n\n  render() {\n    if (!this.isProjectAdmin()) {\n      return null;\n    }\n\n    const { children, ...props } = this.props;\n    return React.cloneElement(children, props);\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport getStore from './getStore';\nimport getHistory from './getHistory';\nimport { requireAuthorization } from '../../store/appState';\n\nexport default function handleRequiredAuthorization() {\n  const store = getStore();\n  const history = getHistory();\n\n  const returnTo = window.location.pathname + window.location.search + window.location.hash;\n\n  store.dispatch(requireAuthorization());\n  history.replace({ pathname: '/sessions/new', query: { return_to: returnTo } });\n}\n"],"sourceRoot":""}