{"version":3,"sources":["webpack:///./src/main/js/app/components/notifications/notifications.css?9247","webpack:///./src/main/js/app/components/notifications/notifications.css","webpack:///./src/main/js/components/icons-components/NotificationIcon.tsx","webpack:///./src/main/js/app/components/notifications/NavLatestNotification.tsx"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","NotificationIcon","_a","className","_b","fill","hasUnread","size","index_js_exposed","Icon","d","style","cx","cy","r","theme","NavLatestNotification_NavLatestNotification","_super","NavLatestNotification","_this","apply","this","arguments","mounted","checkHasUnread","props","notificationsLastReadDate","lastNews","Object","dates","publicationDate","handleClick","event","preventDefault","currentTarget","blur","onClick","handleDismiss","stopPropagation","setCurrentUserSetting","key","value","Date","now","toString","__extends","prototype","render","notificationsOptOut","showNotifications","Boolean","l10n","notification","href","ClearIcon"],"mappings":"gFACA,IAAAA,EAAcC,EAAQ,MAEtB,iBAAAD,MAAA,EAA4CE,EAAAC,EAASH,EAAA,MAOrD,IAAAI,EAAA,CAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAAC,GAEaP,EAAQ,IAARA,CAAuED,EAAAI,GAEpFJ,EAAAS,SAAAP,EAAAQ,QAAAV,EAAAS,+BCjBAP,EAAAQ,QAA2BT,EAAQ,IAARA,EAAmE,IAK9FU,KAAA,CAAcT,EAAAC,EAAS,ukHAAqkH,uFCsB9kH,SAAUS,EAAiBC,OACvCC,EAAAD,EAAAC,UACAC,EAAAF,EAAAG,YAAA,IAAAD,EAAA,eAAAA,EACAE,EAAAJ,EAAAI,UACAC,EAAAL,EAAAK,KAEA,OACEC,EAAA,cAACC,EAAA,EAAI,CAACN,UAAWA,EAAWI,KAAMA,GAC/BD,EACCE,EAAA,cAAAA,EAAA,cACEA,EAAA,sBACEE,EAAE,8ZACFC,MAAO,CAAEN,KAAIA,KAEfG,EAAA,wBAAQI,GAAG,SAASC,GAAG,QAAQC,EAAE,IAAIH,MAAO,CAAEN,KAAMU,EAAA,SAGtDP,EAAA,sBACEE,EAAE,uVACFC,MAAO,CAAEN,KAAIA,wVCVvBW,EAAA,SAAAC,GAAA,SAAAC,IAAA,IAAAC,EAAA,OAAAF,KAAAG,MAAAC,KAAAC,YAAAD,YACEF,EAAAI,SAAU,EAEVJ,EAAAK,eAAiB,WACT,IAAAtB,EAAAiB,EAAAM,MAAEC,EAAAxB,EAAAwB,0BAA2BC,EAAAzB,EAAAyB,SACnC,OACGD,GACDE,OAAAC,EAAA,EAAAD,CAAoBA,OAAAC,EAAA,EAAAD,CAAUD,EAASG,iBAAkBJ,GAA6B,GAI1FP,EAAAY,YAAc,SAACC,GACbA,EAAMC,iBACND,EAAME,cAAcC,OACpBhB,EAAKM,MAAMW,WAGbjB,EAAAkB,cAAgB,SAACL,GACfA,EAAMC,iBACND,EAAMM,kBAENnB,EAAKM,MAAMc,sBAAsB,CAC/BC,IAAK,yBACLC,MAAOC,KAAKC,MAAMC,gBAiCxB,OAxDmDC,EAAA3B,EAAAD,GA2BjDC,EAAA4B,UAAAC,OAAA,WACQ,IAAA7C,EAAAmB,KAAAI,MAAEuB,EAAA9C,EAAA8C,oBAAqBrB,EAAAzB,EAAAyB,SACvBrB,EAAYe,KAAKG,iBACjByB,EAAoBC,SAASF,GAAuBrB,GAAYrB,GACtE,OACEE,EAAA,cAAAA,EAAA,cACGyC,GACCzC,EAAA,cAAAA,EAAA,cACEA,EAAA,oBAAIL,UAAU,6BAA6BiC,QAASf,KAAKI,MAAMW,SAC7D5B,EAAA,qBAAKL,UAAU,sCACbK,EAAA,sBAAML,UAAU,mBAAmByB,OAAAuB,EAAA,EAAAvB,CAAU,QAC7CpB,EAAA,sBAAML,UAAU,SAASwB,EAASyB,gBAGtC5C,EAAA,oBAAIL,UAAU,sCACZK,EAAA,mBAAGL,UAAU,cAAckD,KAAK,IAAIjB,QAASf,KAAKgB,eAChD7B,EAAA,cAAC8C,EAAA,EAAS,CAACjD,KAAMU,EAAA,mBAAoBR,KAAM,QAKnDC,EAAA,wBACEA,EAAA,mBAAGL,UAAU,cAAckD,KAAK,IAAIjB,QAASf,KAAKU,aAChDvB,EAAA,cAACP,EAAgB,CAACK,UAAWA,IAAc0C,QAMvD9B,EAxDA,CAAmDV,EAAA","file":"js/341.1553004420962.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./notifications.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./notifications.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./notifications.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.navbar-latest-notification {\\n  flex: 0 1 240px;\\n  text-align: right;\\n  overflow: hidden;\\n}\\n\\n.navbar-latest-notification-wrapper {\\n  position: relative;\\n  display: inline-block;\\n  padding: 8px;\\n  padding-left: 50px;\\n  height: 28px;\\n  max-width: 100%;\\n  box-sizing: border-box;\\n  overflow: hidden;\\n  vertical-align: middle;\\n  font-size: 12px;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  color: #8a8c8f;\\n  background-color: #000;\\n  border-radius: 3px 0 0 3px;\\n  cursor: pointer;\\n}\\n\\n.navbar-latest-notification-wrapper:hover {\\n  color: #cfd3d7;\\n}\\n\\n.navbar-latest-notification-wrapper .badge-new {\\n  position: absolute;\\n  margin-right: 8px;\\n  left: 4px;\\n  top: 5px;\\n}\\n\\n.navbar-latest-notification-wrapper .label {\\n  display: block;\\n  max-width: 330px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.navbar-latest-notification-dismiss .navbar-icon {\\n  height: 28px;\\n  background-color: #000;\\n  border-radius: 0 3px 3px 0;\\n  padding: 9px 8px !important;\\n  margin-left: 1px;\\n  margin-right: 8px;\\n}\\n\\n.navbar-latest-notification-dismiss .navbar-icon:hover path {\\n  fill: #cfd3d7 !important;\\n}\\n\\n.notifications-sidebar {\\n  position: fixed;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  width: 400px;\\n  display: flex;\\n  flex-direction: column;\\n  background: #f9f9fb;\\n}\\n\\n.notifications-sidebar-top {\\n  position: relative;\\n  padding: 16px;\\n  border-bottom: 1px solid #e6e8ea;\\n  background-color: #ffffff;\\n}\\n\\n.notifications-sidebar-top h3 {\\n  font-weight: normal;\\n  font-size: 16px;\\n}\\n\\n.notifications-sidebar-top .close {\\n  position: absolute;\\n  top: 16px;\\n  right: 16px;\\n  border: 0;\\n  color: #8a8c8f;\\n}\\n\\n.notifications-sidebar-content {\\n  flex: 1 1;\\n  overflow-y: auto;\\n}\\n\\n.notifications-sidebar-footer {\\n  padding-top: 8px;\\n  border-top: 1px solid #e6e8ea;\\n  flex: 0 0 40px;\\n}\\n\\n.notifications-sidebar-slice h4 {\\n  padding: 16px;\\n  padding-bottom: 4px;\\n  background-color: #f9f9fb;\\n  font-weight: normal;\\n  font-size: 12px;\\n  text-align: right;\\n  color: #8a8c8f;\\n}\\n\\n.notifications-sidebar-slice .feature:last-of-type {\\n  border-bottom: 1px solid #e6e8ea;\\n}\\n\\n.notifications-sidebar-slice .feature {\\n  padding: 16px;\\n  background-color: #ffffff;\\n  border-top: 1px solid #e6e8ea;\\n  overflow: hidden;\\n}\\n\\n.notifications-sidebar-slice.unread .feature {\\n  background-color: #e6f6ff;\\n  border-color: #cee4f2;\\n}\\n\\n.notifications-sidebar-slice .learn-more {\\n  clear: both;\\n  float: right;\\n  margin-top: 8px;\\n}\\n\\n.notifications-sidebar-slice .categories li {\\n  display: inline-block;\\n  padding: 4px;\\n  margin-right: 8px;\\n  font-size: 9px;\\n  line-height: 8px;\\n  text-transform: uppercase;\\n  font-weight: bold;\\n  color: #fff;\\n  border-radius: 3px;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport { blue } from '../../app/theme';\n\ninterface Props extends IconProps {\n  hasUnread?: boolean;\n}\n\nexport default function NotificationIcon({\n  className,\n  fill = 'currentColor',\n  hasUnread,\n  size\n}: Props) {\n  return (\n    <Icon className={className} size={size}>\n      {hasUnread ? (\n        <>\n          <path\n            d=\"M8 1a.875.875 0 0 0-.875.875v.57c-2.009.418-3.498 2.118-3.498 4.242 0 2.798-.987 3.652-1.516 4.22a.856.856 0 0 0-.236.593.875.875 0 0 0 .877.875h10.496a.875.875 0 0 0 .877-.875.854.854 0 0 0-.236-.594c-.497-.534-1.388-1.342-1.494-3.76a2.814 2.814 0 0 1-.768.108A2.814 2.814 0 0 1 8.814 4.44a2.814 2.814 0 0 1 .665-1.818 4.543 4.543 0 0 0-.604-.178v-.57A.875.875 0 0 0 8 1zM6.25 13.25a1.75 1.75 0 0 0 3.5 0h-3.5z\"\n            style={{ fill }}\n          />\n          <circle cx=\"11.627\" cy=\"4.441\" r=\"2\" style={{ fill: blue }} />\n        </>\n      ) : (\n        <path\n          d=\"M8 15a1.75 1.75 0 0 0 1.75-1.75h-3.5c0 .967.784 1.75 1.75 1.75zm5.89-4.094c-.529-.567-1.517-1.421-1.517-4.218 0-2.125-1.49-3.826-3.499-4.243v-.57a.875.875 0 1 0-1.748 0v.57c-2.01.417-3.499 2.118-3.499 4.243 0 2.797-.988 3.65-1.517 4.218a.854.854 0 0 0-.235.594.876.876 0 0 0 .878.875h10.494a.876.876 0 0 0 .878-.875.853.853 0 0 0-.235-.594z\"\n          style={{ fill }}\n        />\n      )}\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ClearIcon from '../../../components/icons-components/ClearIcon';\nimport NotificationIcon from '../../../components/icons-components/NotificationIcon';\nimport { sonarcloudBlack500 } from '../../theme';\nimport { PrismicFeatureNews } from '../../../api/news';\nimport { differenceInSeconds, parseDate } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\nimport './notifications.css';\n\ninterface Props {\n  lastNews: PrismicFeatureNews;\n  notificationsLastReadDate?: Date;\n  notificationsOptOut?: boolean;\n  onClick: () => void;\n  setCurrentUserSetting: (setting: T.CurrentUserSetting) => void;\n}\n\nexport default class NavLatestNotification extends React.PureComponent<Props> {\n  mounted = false;\n\n  checkHasUnread = () => {\n    const { notificationsLastReadDate, lastNews } = this.props;\n    return (\n      !notificationsLastReadDate ||\n      differenceInSeconds(parseDate(lastNews.publicationDate), notificationsLastReadDate) > 0\n    );\n  };\n\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onClick();\n  };\n\n  handleDismiss = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    this.props.setCurrentUserSetting({\n      key: 'notifications.readDate',\n      value: Date.now().toString()\n    });\n  };\n\n  render() {\n    const { notificationsOptOut, lastNews } = this.props;\n    const hasUnread = this.checkHasUnread();\n    const showNotifications = Boolean(!notificationsOptOut && lastNews && hasUnread);\n    return (\n      <>\n        {showNotifications && (\n          <>\n            <li className=\"navbar-latest-notification\" onClick={this.props.onClick}>\n              <div className=\"navbar-latest-notification-wrapper\">\n                <span className=\"badge badge-new\">{translate('new')}</span>\n                <span className=\"label\">{lastNews.notification}</span>\n              </div>\n            </li>\n            <li className=\"navbar-latest-notification-dismiss\">\n              <a className=\"navbar-icon\" href=\"#\" onClick={this.handleDismiss}>\n                <ClearIcon fill={sonarcloudBlack500} size={10} />\n              </a>\n            </li>\n          </>\n        )}\n        <li>\n          <a className=\"navbar-icon\" href=\"#\" onClick={this.handleClick}>\n            <NotificationIcon hasUnread={hasUnread && !notificationsOptOut} />\n          </a>\n        </li>\n      </>\n    );\n  }\n}\n"],"sourceRoot":""}