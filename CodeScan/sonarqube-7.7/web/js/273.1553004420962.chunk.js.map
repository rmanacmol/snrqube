{"version":3,"sources":["webpack:///./node_modules/lodash/max.js","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltipsContent.tsx","webpack:///./src/main/js/components/preview-graph/PreviewGraphTooltips.tsx","webpack:///./src/main/js/components/preview-graph/PreviewGraph.tsx","webpack:///./src/main/js/apps/portfolio/styles.css?506b","webpack:///./src/main/js/apps/portfolio/styles.css","webpack:///./src/main/js/apps/portfolio/components/Summary.tsx","webpack:///./src/main/js/api/report.ts","webpack:///./src/main/js/apps/portfolio/components/Subscription.tsx","webpack:///./src/main/js/apps/portfolio/components/SubscriptionContainer.tsx","webpack:///./src/main/js/apps/portfolio/components/Report.tsx","webpack:///./src/main/js/apps/portfolio/components/WorstProjects.tsx","webpack:///./src/main/js/apps/portfolio/components/RatingFreshness.tsx","webpack:///./src/main/js/apps/portfolio/components/ReleasabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/Effort.tsx","webpack:///./src/main/js/apps/portfolio/components/MeasuresButtonLink.tsx","webpack:///./src/main/js/apps/portfolio/components/HistoryButtonLink.tsx","webpack:///./src/main/js/apps/portfolio/components/MainRating.tsx","webpack:///./src/main/js/apps/portfolio/components/ReliabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/SecurityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/MaintainabilityBox.tsx","webpack:///./src/main/js/apps/portfolio/components/Activity.tsx","webpack:///./src/main/js/apps/portfolio/utils.ts","webpack:///./src/main/js/apps/portfolio/components/App.tsx","webpack:///./src/main/js/components/controls/HelpTooltip.tsx","webpack:///./node_modules/lodash/toFinite.js","webpack:///./src/main/js/components/controls/HelpTooltip.css?1425","webpack:///./src/main/js/components/controls/HelpTooltip.css","webpack:///./src/main/js/components/docs/DocTooltip.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/icons-components/QualifierIcon.tsx","webpack:///./node_modules/lodash/map.js","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./src/main/js/components/ui/Rating.tsx","webpack:///./src/main/js/components/ui/Level.css?5a2b","webpack:///./src/main/js/components/ui/Level.css","webpack:///./node_modules/lodash/groupBy.js","webpack:///./src/main/js/components/ui/Rating.css?38ca","webpack:///./src/main/js/components/ui/Rating.css","webpack:///./node_modules/lodash/toInteger.js","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/apps/projectActivity/utils.ts","webpack:///./src/main/js/helpers/organizations.ts","webpack:///./node_modules/lodash/_baseExtremum.js","webpack:///./src/main/js/components/icons-components/BubblesIcon.tsx","webpack:///./src/main/js/components/icons-components/VisibleIcon.tsx","webpack:///./src/main/js/components/common/PrivacyBadgeContainer.tsx","webpack:///./src/main/js/components/charts/BarChart.css?d69c","webpack:///./src/main/js/components/charts/BarChart.css","webpack:///./node_modules/lodash/_baseGt.js","webpack:///../sonar-docs/src/tooltips/project/visibility-private.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-paid-org-admin.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-paid-org.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public-admin.md","webpack:///../sonar-docs/src/tooltips/project/visibility-public.md","webpack:///./node_modules/lodash/flatMap.js","webpack:///./src/main/js/components/charts/LineChart.css?a838","webpack:///./src/main/js/components/icons-components/ChartLegendIcon.tsx","webpack:///./src/main/js/components/icons-components/HistoryIcon.tsx","webpack:///./src/main/js/components/charts/Histogram.css?58e5","webpack:///./src/main/js/components/charts/Histogram.css","webpack:///./src/main/js/components/charts/LineChart.css","webpack:///./node_modules/lodash/minBy.js","webpack:///./node_modules/lodash/_baseLt.js","webpack:///./src/main/js/components/charts/AdvancedTimeline.tsx","webpack:///./src/main/js/components/charts/AdvancedTimeline.css?76b9","webpack:///./src/main/js/components/charts/AdvancedTimeline.css","webpack:///./node_modules/lodash/chunk.js","webpack:///./node_modules/lodash/_baseSlice.js","webpack:///./src/main/js/api/time-machine.ts","webpack:///./src/main/js/components/charts/Histogram.tsx","webpack:///./src/main/js/components/charts/LanguageDistribution.tsx","webpack:///./src/main/js/components/charts/LanguageDistributionContainer.tsx"],"names":["baseExtremum","__webpack_require__","baseGt","identity","module","exports","array","length","undefined","PreviewGraphTooltipsContent","_a","index","translatedName","value","index_js_exposed","className","ChartLegendIcon","_super","PreviewGraphTooltips","__extends","prototype","render","_this","this","tooltipIdx","props","left","tooltipPos","placement","popups","RightTop","graphWidth","LeftTop","style","top","width","DateFormatter","date","selectedDate","long","series","map","serie","idx","point","data","y","key","name","formatValue","GRAPH_PADDING","MAX_GRAPH_NB","MAX_SERIES_PER_GRAPH","PreviewGraph_PreviewGraph","PreviewGraph","call","tick","Object","measures","utils","state","getDisplayedMetrics","graph","customMetrics","metrics","getSeries","history","myHistory","displayedMetrics","firstValid","minBy_default","metric","find","p","measureHistory","filter","handleClick","router","push","pathname","query","__assign","id","project","branches","branchLike","updateTooltip","tooltipXPos","setState","customGraphs","PreviewGraph_extends","componentDidUpdate","prevProps","renderTimeline","AutoSizer","disableHeight","AdvancedTimeline","height","hideGrid","hideXAxis","metricType","padding","showAreas","includes","preview_graph_PreviewGraphTooltips","onClick","role","tabIndex","renderWhenEmpty","__webpack_exports__","withRouter","content","i","options","hmr","transform","insertInto","locals","Summary","component","projects","ncloc","nclocDistribution","description","react_router_es","to","urls","componentKey","Measure","metricKey","l10n","LanguageDistributionContainer","distribution","getReportUrl","window","baseUrl","encodeURIComponent","Subscription","mounted","stopLoading","loading","handleSubscription","subscribed","handleSubscribe","request","catch","throwGlobalError","then","handleUnsubscribe","getEffectiveFrequencyText","effectiveFrequency","status","componentFrequency","globalFrequency","renderLoading","renderWhenSubscribed","AlertSuccessIcon","buttons","renderWhenNotSubscribed","componentDidMount","componentWillReceiveProps","nextProps","componentWillUnmount","inner","hasEmail","users","currentUser","email","SubscriptionContainer","es","rootReducer","components_Subscription","Report","apply","arguments","renderHeader","Report_extends","loadStatus","canDownload","download","href","target","canSubscribe","WorstProjects","subComponents","total","count","maxLoc","max_default","Number","projectsPageUrl","refKey","QualifierIcon","qualifier","renderCell","barWidth","Math","max","round","x","renderNcloc","helpers_measures","type","RatingFreshness","lastChange","rating","index_es","defaultMessage","values","Rating","small","JSON","parse","DateFromNow","ReleasabilityBox","lastReleasabilityChange","effort","Level","level","Effort","String","MeasuresButtonLink","BubblesIcon","size","HistoryButtonLink","HistoryIcon","MainRating","ReliabilityBox","lastReliabilityChange","rawEffort","SecurityBox","lastSecurityChange","MaintainabilityBox","lastMaintainabilityChange","Activity","fetchHistory","graphMetrics","time_machine","join","timeMachine","history_1","forEach","measure","analysis","dates","Activity_extends","PORTFOLIO_METRICS","SUB_COMPONENTS_METRICS","convertMeasures","result","App_App","App","isEmpty","isNotComputed","App_extends","fetchMetrics","fetchData","Promise","all","api_measures","metricKeys","components","ps","s","totalSubComponents","paging","renderSpinner","renderEmpty","renderWhenNotComputed","renderMain","visibility","PrivacyBadgeContainer","organization","tooltipProps","projectKey","components_Activity","components_Report","mapDispatchToProps","rootActions","d","HelpTooltip","react__WEBPACK_IMPORTED_MODULE_0__","classnames__WEBPACK_IMPORTED_MODULE_1__","_Tooltip__WEBPACK_IMPORTED_MODULE_2__","_icons_components_HelpIcon__WEBPACK_IMPORTED_MODULE_3__","_app_theme__WEBPACK_IMPORTED_MODULE_4__","children","fill","_b","tagName","mouseLeaveDelay","onShow","overlay","toNumber","INFINITY","MAX_INTEGER","DocMarkdownBlock","_lazyLoad__WEBPACK_IMPORTED_MODULE_2__","e","bind","DocTooltip","open","close","doc","default","document","addEventListener","removeEventListener","_controls_HelpTooltip__WEBPACK_IMPORTED_MODULE_1__","childProps","overlayProps","isTooltip","formatterOption","year","month","day","longFormatterOption","react_intl__WEBPACK_IMPORTED_MODULE_1__","_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","_Icon__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","qualifierIcons","app","brc","dev","dir","DirectoryIcon","fil","svw","trk","ProjectIcon","uts","UnitTestIcon","vw","cla","dev_prj","lib","pac","toLowerCase","FoundIcon","arrayMap","baseIteratee","baseMap","isArray","collection","iteratee","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","formatted","level-small","level-muted","muted","_c","rating-small","rating-muted","baseAssignValue","createAggregator","hasOwnProperty","groupBy","toFinite","remainder","_utils__WEBPACK_IMPORTED_MODULE_1__","_ui_Rating__WEBPACK_IMPORTED_MODULE_2__","_ui_Level__WEBPACK_IMPORTED_MODULE_3__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_4__","_helpers_measures__WEBPACK_IMPORTED_MODULE_5__","decimals","formattedValue","tooltip","KNOWN_RATINGS","enhanceMeasure","leak","getLeakValue","periods","period","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","getRatingTooltip","finalMetricKey","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","substr","getLeakPeriod","getPeriodLabel","getPeriodDate","_l10n__WEBPACK_IMPORTED_MODULE_0__","_dates__WEBPACK_IMPORTED_MODULE_1__","Array","getPeriod","dateFormatter","parameter","modeParam","mode","EVENT_TYPES","APPLICATION_EVENT_TYPES","DEFAULT_GRAPH","GRAPH_TYPES","GRAPHS_METRICS_DISPLAYED","issues","coverage","duplications","GRAPHS_METRICS","concat","PROJECT_ACTIVITY_GRAPH","PROJECT_ACTIVITY_GRAPH_CUSTOM","activityQueryChanged","prevQuery","nextQuery","category","datesQueryChanged","customMetricsChanged","lodash_isEqual__WEBPACK_IMPORTED_MODULE_1___default","from","hasDataValues","some","Boolean","hasHistoryData","hasHistoryDataValue","historyQueryChanged","isCustomGraph","selectedDateQueryChanged","generateSeries","measuresHistory","lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default","indexOf","uncoveredLines","linesToCover","_helpers_l10n__WEBPACK_IMPORTED_MODULE_7__","generateCoveredLinesMetric","findMetric","splitSeriesInGraphs","maxGraph","maxSeries","lodash_flatMap__WEBPACK_IMPORTED_MODULE_3___default","lodash_groupBy__WEBPACK_IMPORTED_MODULE_2___default","lodash_chunk__WEBPACK_IMPORTED_MODULE_4___default","slice","getSeriesMetricType","getAnalysesByVersionByDay","analyses","reduce","acc","currentVersion","versionEvent","events","event","newVersion","version","byDay","keys","_helpers_dates__WEBPACK_IMPORTED_MODULE_6__","getTime","toString","matchFilters","isAfterFrom","isBeforeTo","hasSelectedCategoryEvents","getDisplayedHistoryMetrics","getHistoryMetrics","getProjectActivityGraph","_helpers_storage__WEBPACK_IMPORTED_MODULE_8__","split","parseQuery","urlQuery","_helpers_query__WEBPACK_IMPORTED_MODULE_5__","serializeQuery","serializeUrlQuery","custom_metrics","selected_date","isPaidOrganization","hasPrivateAccess","isCurrentUserMemberOf","_users__WEBPACK_IMPORTED_MODULE_0__","subscription","userOrganizations","actions","admin","org","isSymbol","comparator","current","computed","fillRule","VisibleIcon","Icon","onSonarCloud","system","organizations","icon","theme","badge","classnames","badge-info","badge-icon","getDoc","Tooltip","resolve","t","other","baseFlatten","COLORS","baseLt","getRatingScale","availableHeight","d3_scale__WEBPACK_IMPORTED_MODULE_8__","domain","range","getLevelScale","getYScale","flatData","d3_array__WEBPACK_IMPORTED_MODULE_7__","nice","getXScale","availableWidth","startDate","endDate","dateRange","start","end","xScale","lodash_sortBy__WEBPACK_IMPORTED_MODULE_2___default","clamp","maxXRange","getScales","lodash_flatten__WEBPACK_IMPORTED_MODULE_4___default","yScale","getSelectedDatePos","firstSerie","findIndex","valueOf","xRange","xPos","selectedDateXPos","selectedDateIdx","getEventMarker","half","handleWheel","preventDefault","parentBbox","currentTarget","getBoundingClientRect","mouseXPos","pageX","speed","deltaMode","zoomSpeed","leftPos","deltaY","rightPos","invert","handleZoomUpdate","updateZoom","handleMouseMove","updateTooltipPos","handleMouseEnter","mouseOver","handleMouseOut","updateSelectedDate","bisectX","right","previousPoint","nextPoint","xPos_1","renderHorizontalGrid","formatYTick","ticks","maxYTicksCount","formattedTicks","lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_5__","dx","dy","textAnchor","x1","x2","y1","y2","renderXAxisTicks","format","tickFormat","nextTick","renderLeak","leakPeriodDate","yRange","leakWidth","_app_theme__WEBPACK_IMPORTED_MODULE_10__","renderLines","lineGenerator","d3_shape__WEBPACK_IMPORTED_MODULE_9__","defined","basisCurve","curve","classnames__WEBPACK_IMPORTED_MODULE_6__","renderDots","serieIdx","pointNotDefined","hasPointBefore","hasPointAfter","cx","cy","r","_helpers_types__WEBPACK_IMPORTED_MODULE_11__","dots","renderAreas","areaGenerator","y0","renderSelectedDate","renderClipPath","renderMouseEventsOverlay","zoomEnabled","mouseEvents","onWheel","onMouseEnter","onMouseMove","onMouseOut","scales","selectedDatePos","lodash_throttle__WEBPACK_IMPORTED_MODULE_1___default","lodash_isEqual__WEBPACK_IMPORTED_MODULE_3___default","disableZoom","isZoomed","chart-zoomed","defaultProps","eventSize","baseSlice","isIterateeCall","toInteger","nativeCeil","ceil","nativeMax","guard","resIndex","getAllTimeMachineData","prev","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","getTimeMachineData","pageIndex","pageSize","DEFAULT_PADDING","Histogram","renderBar","alignTicks","bandwidth","renderValue","yValues","BAR_HEIGHT","yTooltips","renderTick","yTicks","historyTickClass","renderBars","bars","d3_scale_src","src","_","rangeRound","cutLanguageName","languages","tokens","language","lines","parseInt","sortBy_default","langKey","lang","getLanguageName","components_charts_Histogram"],"mappings":"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","file":"js/273.1553004420962.chunk.js","sourcesContent":["var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    identity = require('./identity');\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nmodule.exports = max;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ChartLegendIcon from '../icons-components/ChartLegendIcon';\n\ninterface Props {\n  index: number;\n  translatedName: string;\n  value: string;\n}\n\nexport default function PreviewGraphTooltipsContent({ index, translatedName, value }: Props) {\n  return (\n    <tr className=\"overview-analysis-graph-tooltip-line\">\n      <td className=\"thin\">\n        <ChartLegendIcon className=\"little-spacer-right\" index={index} />\n      </td>\n      <td className=\"overview-analysis-graph-tooltip-value text-right little-spacer-right thin\">\n        {value}\n      </td>\n      <td>\n        <div className=\"text-ellipsis overview-analysis-graph-tooltip-description\">\n          {translatedName}\n        </div>\n      </td>\n    </tr>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport PreviewGraphTooltipsContent from './PreviewGraphTooltipsContent';\nimport DateFormatter from '../intl/DateFormatter';\nimport { Popup, PopupPlacement } from '../ui/popups';\nimport { Serie } from '../../apps/projectActivity/utils';\n\ninterface Props {\n  formatValue: (value: number | string) => string;\n  graph: string;\n  graphWidth: number;\n  selectedDate: Date;\n  series: Serie[];\n  tooltipIdx: number;\n  tooltipPos: number;\n}\n\nconst TOOLTIP_WIDTH = 160;\n\nexport default class PreviewGraphTooltips extends React.PureComponent<Props> {\n  render() {\n    const { tooltipIdx } = this.props;\n    const top = 16;\n    let left = this.props.tooltipPos;\n    let placement = PopupPlacement.RightTop;\n    if (left > this.props.graphWidth - TOOLTIP_WIDTH) {\n      left -= TOOLTIP_WIDTH;\n      placement = PopupPlacement.LeftTop;\n    }\n\n    return (\n      <Popup\n        className=\"overview-analysis-graph-popup disabled-pointer-events\"\n        placement={placement}\n        style={{ top, left, width: TOOLTIP_WIDTH }}>\n        <div className=\"overview-analysis-graph-tooltip\">\n          <div className=\"overview-analysis-graph-tooltip-title\">\n            <DateFormatter date={this.props.selectedDate} long={true} />\n          </div>\n          <table className=\"width-100\">\n            <tbody>\n              {this.props.series.map((serie, idx) => {\n                const point = serie.data[tooltipIdx];\n                if (!point || (!point.y && point.y !== 0)) {\n                  return null;\n                }\n                return (\n                  <PreviewGraphTooltipsContent\n                    index={idx}\n                    key={serie.name}\n                    translatedName={serie.translatedName}\n                    value={this.props.formatValue(point.y)}\n                  />\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </Popup>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { minBy } from 'lodash';\nimport { AutoSizer } from 'react-virtualized/dist/commonjs/AutoSizer';\nimport PreviewGraphTooltips from './PreviewGraphTooltips';\nimport AdvancedTimeline from '../charts/AdvancedTimeline';\nimport {\n  DEFAULT_GRAPH,\n  generateSeries,\n  getDisplayedHistoryMetrics,\n  getProjectActivityGraph,\n  getSeriesMetricType,\n  hasHistoryDataValue,\n  Serie,\n  splitSeriesInGraphs\n} from '../../apps/projectActivity/utils';\nimport { formatMeasure, getShortType } from '../../helpers/measures';\nimport { getBranchLikeQuery } from '../../helpers/branches';\nimport { withRouter, Router } from '../hoc/withRouter';\n\ninterface History {\n  [x: string]: Array<{ date: Date; value?: string }>;\n}\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  history?: History;\n  metrics: { [key: string]: T.Metric };\n  project: string;\n  renderWhenEmpty?: () => React.ReactNode;\n  router: Pick<Router, 'push'>;\n}\n\ninterface State {\n  customMetrics: string[];\n  graph: string;\n  selectedDate?: Date;\n  series: Serie[];\n  tooltipIdx?: number;\n  tooltipXPos?: number;\n}\n\nconst GRAPH_PADDING = [4, 0, 4, 0];\nconst MAX_GRAPH_NB = 1;\nconst MAX_SERIES_PER_GRAPH = 3;\n\nclass PreviewGraph extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const { graph, customGraphs: customMetrics } = getProjectActivityGraph(props.project);\n    const series = splitSeriesInGraphs(\n      this.getSeries(props.history, graph, customMetrics, props.metrics),\n      MAX_GRAPH_NB,\n      MAX_SERIES_PER_GRAPH\n    );\n    this.state = {\n      customMetrics,\n      graph,\n      series: series.length > 0 ? series[0] : []\n    };\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.history !== this.props.history || prevProps.metrics !== this.props.metrics) {\n      const { graph, customGraphs: customMetrics } = getProjectActivityGraph(this.props.project);\n      const series = splitSeriesInGraphs(\n        this.getSeries(this.props.history, graph, customMetrics, this.props.metrics),\n        MAX_GRAPH_NB,\n        MAX_SERIES_PER_GRAPH\n      );\n      this.setState({\n        customMetrics,\n        graph,\n        series: series.length > 0 ? series[0] : []\n      });\n    }\n  }\n\n  formatValue = (tick: number | string) => {\n    return formatMeasure(tick, getShortType(getSeriesMetricType(this.state.series)));\n  };\n\n  getDisplayedMetrics = (graph: string, customMetrics: string[]) => {\n    const metrics = getDisplayedHistoryMetrics(graph, customMetrics);\n    if (!metrics || metrics.length <= 0) {\n      return getDisplayedHistoryMetrics(DEFAULT_GRAPH, customMetrics);\n    }\n    return metrics;\n  };\n\n  getSeries = (\n    history: History | undefined,\n    graph: string,\n    customMetrics: string[],\n    metrics: { [x: string]: T.Metric }\n  ) => {\n    const myHistory = history;\n    if (!myHistory) {\n      return [];\n    }\n    const displayedMetrics = this.getDisplayedMetrics(graph, customMetrics);\n    const firstValid = minBy(\n      displayedMetrics.map(metric => myHistory[metric].find(p => p.value !== undefined)),\n      'date'\n    );\n    const measureHistory = displayedMetrics.map(metric => ({\n      metric,\n      history: firstValid\n        ? myHistory[metric].filter(p => p.date >= firstValid.date)\n        : myHistory[metric]\n    }));\n    return generateSeries(measureHistory, graph, metrics, displayedMetrics);\n  };\n\n  handleClick = () => {\n    this.props.router.push({\n      pathname: '/project/activity',\n      query: { id: this.props.project, ...getBranchLikeQuery(this.props.branchLike) }\n    });\n  };\n\n  updateTooltip = (selectedDate?: Date, tooltipXPos?: number, tooltipIdx?: number) =>\n    this.setState({ selectedDate, tooltipXPos, tooltipIdx });\n\n  renderTimeline() {\n    const { graph, selectedDate, series, tooltipIdx, tooltipXPos } = this.state;\n    return (\n      <AutoSizer disableHeight={true}>\n        {({ width }) => (\n          <div>\n            <AdvancedTimeline\n              height={80}\n              hideGrid={true}\n              hideXAxis={true}\n              metricType={getSeriesMetricType(series)}\n              padding={GRAPH_PADDING}\n              series={series}\n              showAreas={['coverage', 'duplications'].includes(graph)}\n              updateTooltip={this.updateTooltip}\n              width={width}\n            />\n            {selectedDate !== undefined &&\n              tooltipXPos !== undefined &&\n              tooltipIdx !== undefined && (\n                <PreviewGraphTooltips\n                  formatValue={this.formatValue}\n                  graph={graph}\n                  graphWidth={width}\n                  selectedDate={selectedDate}\n                  series={series}\n                  tooltipIdx={tooltipIdx}\n                  tooltipPos={tooltipXPos}\n                />\n              )}\n          </div>\n        )}\n      </AutoSizer>\n    );\n  }\n\n  render() {\n    const { series } = this.state;\n    if (!hasHistoryDataValue(series)) {\n      return this.props.renderWhenEmpty ? this.props.renderWhenEmpty() : null;\n    }\n\n    return (\n      <div\n        className=\"overview-analysis-graph big-spacer-bottom spacer-top\"\n        onClick={this.handleClick}\n        role=\"link\"\n        tabIndex={0}>\n        {this.renderTimeline()}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(PreviewGraph);\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.portfolio-measure-secondary-value {\\n  line-height: 24px;\\n  font-size: 18px;\\n  font-weight: 300;\\n}\\n\\n.portfolio-grid {\\n  position: relative;\\n  z-index: 10;\\n  display: flex;\\n  justify-content: space-around;\\n  align-items: center;\\n}\\n\\n.portfolio-grid > li {\\n  vertical-align: top;\\n  width: 50%;\\n  text-align: center;\\n}\\n\\n.portfolio-grid > li.text-middle {\\n  vertical-align: middle;\\n}\\n\\n.portfolio-freshness {\\n  line-height: 24px;\\n  margin-top: 12px;\\n  color: #777;\\n  font-size: 12px;\\n  white-space: nowrap;\\n}\\n\\n.portfolio-effort {\\n  margin-top: 12px;\\n  padding-top: 12px;\\n  border-top: 1px solid #e6e6e6;\\n}\\n\\n.portfolio-boxes {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: stretch;\\n  margin-bottom: 20px;\\n  padding: 15px 0;\\n  border: 1px solid #e6e6e6;\\n  background-color: #fff;\\n}\\n\\n.portfolio-box {\\n  position: relative;\\n  width: 25%;\\n  padding: 0 5px;\\n  border-radius: 3px;\\n  box-sizing: border-box;\\n  text-align: center;\\n}\\n\\n.portfolio-box-title {\\n  margin-bottom: 25px;\\n  font-size: 16px;\\n}\\n\\n.portfolio-box-title > .button-small > svg {\\n  margin-top: 0;\\n}\\n\\n.portfolio-box-rating,\\n.portfolio-box-rating .rating {\\n  display: block;\\n  width: 120px;\\n  height: 120px;\\n  line-height: 120px;\\n}\\n\\n.portfolio-box-rating {\\n  margin: 0 auto;\\n  border: none;\\n}\\n\\n.portfolio-box-rating .rating {\\n  border-radius: 120px;\\n  font-size: 60px;\\n  text-align: center;\\n}\\n\\n.portfolio-sub-components table.data > thead > tr > th {\\n  font-size: 13px;\\n  text-transform: none;\\n}\\n\\n.portfolio-sub-components-cell {\\n  width: 90px;\\n}\\n\\n.portfolio-meta-header {\\n  margin-bottom: 4px;\\n  color: #444;\\n}\\n\\n.portfolio-meta-card {\\n  min-width: 200px;\\n  box-sizing: border-box;\\n}\\n\\n.portfolio-meta-card + .portfolio-meta-card {\\n  margin-top: 16px;\\n  padding-top: 15px;\\n  border-top: 1px solid #e6e6e6;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport LanguageDistributionContainer from '../../../components/charts/LanguageDistributionContainer';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: { description?: string; key: string };\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function Summary({ component, measures }: Props) {\n  const { projects, ncloc } = measures;\n  const nclocDistribution = measures['ncloc_language_distribution'];\n\n  return (\n    <section className=\"big-spacer-bottom\" id=\"portfolio-summary\">\n      {component.description && <div className=\"big-spacer-bottom\">{component.description}</div>}\n\n      <ul className=\"portfolio-grid\">\n        <li>\n          <div className=\"portfolio-measure-secondary-value\">\n            {projects ? (\n              <Link\n                to={getComponentDrilldownUrl({ componentKey: component.key, metric: 'projects' })}>\n                <Measure metricKey=\"projects\" metricType=\"SHORT_INT\" value={projects} />\n              </Link>\n            ) : (\n              '0'\n            )}\n          </div>\n          <div className=\"spacer-top text-muted\">{translate('projects')}</div>\n        </li>\n        <li>\n          <div className=\"portfolio-measure-secondary-value\">\n            {ncloc ? (\n              <Link to={getComponentDrilldownUrl({ componentKey: component.key, metric: 'ncloc' })}>\n                <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={ncloc} />\n              </Link>\n            ) : (\n              '0'\n            )}\n          </div>\n          <div className=\"spacer-top text-muted\">{translate('metric.ncloc.name')}</div>\n        </li>\n      </ul>\n\n      {nclocDistribution && (\n        <div className=\"big-spacer-top\">\n          <LanguageDistributionContainer distribution={nclocDistribution} width={260} />\n        </div>\n      )}\n    </section>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport interface ReportStatus {\n  canDownload?: boolean;\n  canSubscribe: boolean;\n  componentFrequency?: string;\n  globalFrequency: string;\n  subscribed?: boolean;\n}\n\nexport function getReportStatus(component: string): Promise<ReportStatus> {\n  return getJSON('/api/governance_reports/status', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function getReportUrl(component: string): string {\n  return (\n    (window as any).baseUrl +\n    '/api/governance_reports/download?componentKey=' +\n    encodeURIComponent(component)\n  );\n}\n\nexport function subscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/subscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n\nexport function unsubscribe(component: string): Promise<void | Response> {\n  return post('/api/governance_reports/unsubscribe', { componentKey: component }).catch(\n    throwGlobalError\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport AlertSuccessIcon from '../../../components/icons-components/AlertSuccessIcon';\nimport { ReportStatus, subscribe, unsubscribe } from '../../../api/report';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { Button } from '../../../components/ui/buttons';\nimport { isLoggedIn } from '../../../helpers/users';\n\ninterface Props {\n  component: string;\n  currentUser: T.CurrentUser;\n  status: ReportStatus;\n}\n\ninterface State {\n  loading: boolean;\n  subscribed?: boolean;\n}\n\nexport default class Subscription extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { subscribed: props.status.subscribed, loading: false };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.status.subscribed !== this.props.status.subscribed) {\n      this.setState({ subscribed: nextProps.status.subscribed });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  handleSubscription = (subscribed: boolean) => {\n    if (this.mounted) {\n      this.setState({ loading: false, subscribed });\n    }\n  };\n\n  handleSubscribe = () => {\n    this.setState({ loading: true });\n    subscribe(this.props.component)\n      .then(() => this.handleSubscription(true))\n      .catch(this.stopLoading);\n  };\n\n  handleUnsubscribe = () => {\n    this.setState({ loading: true });\n    unsubscribe(this.props.component)\n      .then(() => this.handleSubscription(false))\n      .catch(this.stopLoading);\n  };\n\n  getEffectiveFrequencyText = () => {\n    const effectiveFrequency =\n      this.props.status.componentFrequency || this.props.status.globalFrequency;\n    return translate('report.frequency', effectiveFrequency, 'effective');\n  };\n\n  renderLoading = () => this.state.loading && <i className=\"spacer-left spinner\" />;\n\n  renderWhenSubscribed = () => (\n    <div className=\"js-subscribed\">\n      <div className=\"spacer-bottom\">\n        <AlertSuccessIcon className=\"pull-left spacer-right\" />\n        <div className=\"overflow-hidden\">\n          {translateWithParameters('report.subscribed', this.getEffectiveFrequencyText())}\n        </div>\n      </div>\n      <Button onClick={this.handleUnsubscribe}>{translate('report.unsubscribe')}</Button>\n      {this.renderLoading()}\n    </div>\n  );\n\n  renderWhenNotSubscribed = () => (\n    <div className=\"js-not-subscribed\">\n      <p className=\"spacer-bottom\">\n        {translateWithParameters('report.unsubscribed', this.getEffectiveFrequencyText())}\n      </p>\n      <Button className=\"js-report-subscribe\" onClick={this.handleSubscribe}>\n        {translate('report.subscribe')}\n      </Button>\n      {this.renderLoading()}\n    </div>\n  );\n\n  render() {\n    const hasEmail = isLoggedIn(this.props.currentUser) && !!this.props.currentUser.email;\n    const { subscribed } = this.state;\n\n    let inner;\n    if (hasEmail) {\n      inner = subscribed ? this.renderWhenSubscribed() : this.renderWhenNotSubscribed();\n    } else {\n      inner = <p className=\"note js-no-email\">{translate('report.no_email_to_subscribe')}</p>;\n    }\n\n    return <div className=\"big-spacer-top js-report-subscription\">{inner}</div>;\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport Subscription from './Subscription';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(Subscription);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SubscriptionContainer from './SubscriptionContainer';\nimport { getReportStatus, ReportStatus, getReportUrl } from '../../../api/report';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: { key: string; name: string };\n}\n\ninterface State {\n  loading: boolean;\n  status?: ReportStatus;\n}\n\nexport default class Report extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadStatus();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadStatus() {\n    getReportStatus(this.props.component.key).then(\n      status => {\n        if (this.mounted) {\n          this.setState({ status, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  renderHeader = () => <h4>{translate('report.page')}</h4>;\n\n  render() {\n    const { component } = this.props;\n    const { status, loading } = this.state;\n\n    if (loading) {\n      return (\n        <div>\n          {this.renderHeader()}\n          <i className=\"spinner\" />\n        </div>\n      );\n    }\n\n    if (!status) {\n      return null;\n    }\n\n    return (\n      <div>\n        {this.renderHeader()}\n\n        {!status.canDownload && (\n          <div className=\"note js-report-cant-download\">{translate('report.cant_download')}</div>\n        )}\n\n        {status.canDownload && (\n          <div className=\"js-report-can-download\">\n            {translate('report.can_download')}\n            <div className=\"spacer-top\">\n              <a\n                className=\"button js-report-download\"\n                download={component.name + ' - Executive Report.pdf'}\n                href={getReportUrl(component.key)}\n                target=\"_blank\">\n                {translate('report.print')}\n              </a>\n            </div>\n          </div>\n        )}\n\n        {status.canSubscribe && <SubscriptionContainer component={component.key} status={status} />}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { max } from 'lodash';\nimport { SubComponent } from '../types';\nimport Measure from '../../../components/measure/Measure';\nimport QualifierIcon from '../../../components/icons-components/QualifierIcon';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { getProjectUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  subComponents: SubComponent[];\n  total: number;\n}\n\nexport default function WorstProjects({ component, subComponents, total }: Props) {\n  const count = subComponents.length;\n\n  if (!count) {\n    return null;\n  }\n\n  const maxLoc = max(\n    subComponents.map(component => Number(component.measures['ncloc'] || 0))\n  ) as number;\n\n  const projectsPageUrl = { pathname: '/code', query: { id: component } };\n\n  return (\n    <div className=\"panel panel-white portfolio-sub-components\" id=\"portfolio-sub-components\">\n      <table className=\"data zebra\">\n        <thead>\n          <tr>\n            <th>&nbsp;</th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Releasability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Reliability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Security')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric_domain.Maintainability')}\n            </th>\n            <th className=\"text-center portfolio-sub-components-cell\">\n              {translate('metric.ncloc.name')}\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {subComponents.map(component => (\n            <tr key={component.key}>\n              <td>\n                <Link\n                  className=\"link-with-icon\"\n                  to={getProjectUrl(component.refKey || component.key)}>\n                  <QualifierIcon qualifier={component.qualifier} /> {component.name}\n                </Link>\n              </td>\n              {component.qualifier === 'TRK'\n                ? renderCell(component.measures, 'alert_status', 'LEVEL')\n                : renderCell(component.measures, 'releasability_rating', 'RATING')}\n              {renderCell(component.measures, 'reliability_rating', 'RATING')}\n              {renderCell(component.measures, 'security_rating', 'RATING')}\n              {renderCell(component.measures, 'sqale_rating', 'RATING')}\n              {renderNcloc(component.measures, maxLoc)}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n\n      {total > count && (\n        <footer className=\"spacer-top note text-center\">\n          {translateWithParameters(\n            'x_of_y_shown',\n            formatMeasure(count, 'INT'),\n            formatMeasure(total, 'INT')\n          )}\n          <Link className=\"spacer-left\" to={projectsPageUrl}>\n            {translate('show_more')}\n          </Link>\n        </footer>\n      )}\n    </div>\n  );\n}\n\nfunction renderCell(measures: { [key: string]: string | undefined }, metric: string, type: string) {\n  return (\n    <td className=\"text-center\">\n      <Measure metricKey={metric} metricType={type} value={measures[metric]} />\n    </td>\n  );\n}\n\nfunction renderNcloc(measures: { [key: string]: string | undefined }, maxLoc: number) {\n  const ncloc = Number(measures['ncloc'] || 0);\n  const barWidth = maxLoc > 0 ? Math.max(1, Math.round((ncloc / maxLoc) * 50)) : 0;\n  return (\n    <td className=\"text-right\">\n      <span className=\"note\">\n        <Measure metricKey=\"ncloc\" metricType=\"SHORT_INT\" value={measures['ncloc']} />\n      </span>\n      {maxLoc > 0 && (\n        <svg className=\"spacer-left\" height=\"16\" width=\"50\">\n          <rect className=\"bar-chart-bar\" height=\"10\" width={barWidth} x=\"0\" y=\"3\" />\n        </svg>\n      )}\n    </td>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport DateFromNow from '../../../components/intl/DateFromNow';\nimport Rating from '../../../components/ui/Rating';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  lastChange?: string;\n  rating?: string;\n}\n\nexport default function RatingFreshness({ lastChange, rating }: Props) {\n  if (!lastChange) {\n    return (\n      <div className=\"portfolio-freshness\">\n        {rating && (\n          <FormattedMessage\n            defaultMessage={translate('portfolio.has_always_been_x')}\n            id=\"portfolio.has_always_been_x\"\n            values={{ rating: <Rating small={true} value={rating} /> }}\n          />\n        )}\n      </div>\n    );\n  }\n\n  const data = JSON.parse(lastChange);\n\n  return (\n    <div className=\"portfolio-freshness\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.was_x_y')}\n        id=\"portfolio.was_x_y\"\n        values={{\n          rating: <Rating small={true} value={data.value} />,\n          date: <DateFromNow date={data.date} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport RatingFreshness from './RatingFreshness';\nimport Rating from '../../../components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\nimport Level from '../../../components/ui/Level';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function ReleasabilityBox({ component, measures }: Props) {\n  const rating = measures['releasability_rating'];\n  const lastReleasabilityChange = measures['last_change_on_releasability_rating'];\n  const effort = measures['releasability_effort'];\n\n  return (\n    <div className=\"portfolio-box portfolio-releasability\">\n      <h2 className=\"portfolio-box-title\">{translate('metric_domain.Releasability')}</h2>\n\n      {rating && (\n        <Link\n          className=\"portfolio-box-rating\"\n          to={getComponentDrilldownUrl({ componentKey: component, metric: 'alert_status' })}>\n          <Rating value={rating} />\n        </Link>\n      )}\n\n      <RatingFreshness lastChange={lastReleasabilityChange} rating={rating} />\n\n      {effort &&\n        Number(effort) > 0 && (\n          <div className=\"portfolio-effort\">\n            <Link\n              to={getComponentDrilldownUrl({ componentKey: component, metric: 'alert_status' })}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={effort}\n                />\n                {Number(effort) === 1 ? 'project' : 'projects'}\n              </span>\n            </Link>{' '}\n            <Level level=\"ERROR\" small={true} />\n          </div>\n        )}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { FormattedMessage } from 'react-intl';\nimport Rating from '../../../components/ui/Rating';\nimport Measure from '../../../components/measure/Measure';\nimport { translate } from '../../../helpers/l10n';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  effort: { projects: number; rating: number };\n  metricKey: string;\n}\n\nexport default function Effort({ component, effort, metricKey }: Props) {\n  return (\n    <div className=\"portfolio-effort\">\n      <FormattedMessage\n        defaultMessage={translate('portfolio.x_in_y')}\n        id=\"portfolio.x_in_y\"\n        values={{\n          projects: (\n            <Link to={getComponentDrilldownUrl({ componentKey: component, metric: metricKey })}>\n              <span>\n                <Measure\n                  className=\"little-spacer-right\"\n                  metricKey=\"projects\"\n                  metricType=\"SHORT_INT\"\n                  value={String(effort.projects)}\n                />\n                {translate('projects_')}\n              </span>\n            </Link>\n          ),\n          rating: <Rating small={true} value={effort.rating} />\n        }}\n      />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport BubblesIcon from '../../../components/icons-components/BubblesIcon';\nimport { getComponentDrilldownUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n}\n\nexport default function MeasuresButtonLink({ component, metric }: Props) {\n  return (\n    <Link\n      className=\"button button-small spacer-left text-text-bottom\"\n      to={getComponentDrilldownUrl({ componentKey: component, metric })}>\n      <BubblesIcon size={14} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport HistoryIcon from '../../../components/icons-components/HistoryIcon';\nimport { getMeasureHistoryUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n}\n\nexport default function HistoryButtonLink({ component, metric }: Props) {\n  return (\n    <Link\n      className=\"button button-small spacer-left text-text-bottom\"\n      to={getMeasureHistoryUrl(component, metric)}>\n      <HistoryIcon size={14} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport Rating from '../../../components/ui/Rating';\nimport { getMeasureTreemapUrl } from '../../../helpers/urls';\n\ninterface Props {\n  component: string;\n  metric: string;\n  value: string;\n}\n\nexport default function MainRating({ component, metric, value }: Props) {\n  return (\n    <Link className=\"portfolio-box-rating\" to={getMeasureTreemapUrl(component, metric)}>\n      <Rating value={value} />\n    </Link>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport MainRating from './MainRating';\nimport RatingFreshness from './RatingFreshness';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function ReliabilityBox({ component, measures }: Props) {\n  const rating = measures['reliability_rating'];\n  const lastReliabilityChange = measures['last_change_on_reliability_rating'];\n  const rawEffort = measures['reliability_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-reliability\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Reliability')}\n        <MeasuresButtonLink component={component} metric=\"Reliability\" />\n        <HistoryButtonLink component={component} metric=\"reliability_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric=\"reliability_rating\" value={rating} />}\n\n      <RatingFreshness lastChange={lastReliabilityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey=\"reliability_rating\" />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport RatingFreshness from './RatingFreshness';\nimport MainRating from './MainRating';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function SecurityBox({ component, measures }: Props) {\n  const rating = measures['security_rating'];\n  const lastSecurityChange = measures['last_change_on_security_rating'];\n  const rawEffort = measures['security_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-security\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Security')}\n        <MeasuresButtonLink component={component} metric=\"Security\" />\n        <HistoryButtonLink component={component} metric=\"security_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric=\"security_rating\" value={rating} />}\n\n      <RatingFreshness lastChange={lastSecurityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey=\"security_rating\" />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Effort from './Effort';\nimport MainRating from './MainRating';\nimport MeasuresButtonLink from './MeasuresButtonLink';\nimport HistoryButtonLink from './HistoryButtonLink';\nimport RatingFreshness from './RatingFreshness';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  measures: { [key: string]: string | undefined };\n}\n\nexport default function MaintainabilityBox({ component, measures }: Props) {\n  const rating = measures['sqale_rating'];\n  const lastMaintainabilityChange = measures['last_change_on_maintainability_rating'];\n  const rawEffort = measures['maintainability_rating_effort'];\n  const effort = rawEffort ? JSON.parse(rawEffort) : undefined;\n\n  return (\n    <div className=\"portfolio-box portfolio-maintainability\">\n      <h2 className=\"portfolio-box-title\">\n        {translate('metric_domain.Maintainability')}\n        <MeasuresButtonLink component={component} metric=\"Maintainability\" />\n        <HistoryButtonLink component={component} metric=\"sqale_rating\" />\n      </h2>\n\n      {rating && <MainRating component={component} metric={'sqale_rating'} value={rating} />}\n\n      <RatingFreshness lastChange={lastMaintainabilityChange} rating={rating} />\n\n      {effort && <Effort component={component} effort={effort} metricKey={'sqale_rating'} />}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport {\n  getDisplayedHistoryMetrics,\n  DEFAULT_GRAPH,\n  getProjectActivityGraph\n} from '../../projectActivity/utils';\nimport PreviewGraph from '../../../components/preview-graph/PreviewGraph';\nimport { getAllTimeMachineData } from '../../../api/time-machine';\nimport { parseDate } from '../../../helpers/dates';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  component: string;\n  metrics: { [key: string]: T.Metric };\n}\n\ninterface State {\n  history?: {\n    [metric: string]: Array<{ date: Date; value?: string }>;\n  };\n  loading: boolean;\n}\n\nexport default class Activity extends React.PureComponent<Props> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchHistory();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchHistory();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchHistory = () => {\n    const { component } = this.props;\n\n    const { graph, customGraphs } = getProjectActivityGraph(component);\n    let graphMetrics = getDisplayedHistoryMetrics(graph, customGraphs);\n    if (!graphMetrics || graphMetrics.length <= 0) {\n      graphMetrics = getDisplayedHistoryMetrics(DEFAULT_GRAPH, []);\n    }\n\n    this.setState({ loading: true });\n    return getAllTimeMachineData({ component, metrics: graphMetrics.join() }).then(\n      timeMachine => {\n        if (this.mounted) {\n          const history: { [metric: string]: Array<{ date: Date; value?: string }> } = {};\n          timeMachine.measures.forEach(measure => {\n            const measureHistory = measure.history.map(analysis => ({\n              date: parseDate(analysis.date),\n              value: analysis.value\n            }));\n            history[measure.metric] = measureHistory;\n          });\n          this.setState({ history, loading: false });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  renderWhenEmpty = () => <div className=\"note\">{translate('component_measures.no_history')}</div>;\n\n  render() {\n    return (\n      <div className=\"big-spacer-bottom\">\n        <h4>{translate('project_activity.page')}</h4>\n\n        {this.state.loading ? (\n          <i className=\"spinner\" />\n        ) : (\n          this.state.history !== undefined && (\n            <PreviewGraph\n              history={this.state.history}\n              metrics={this.props.metrics}\n              project={this.props.component}\n              renderWhenEmpty={this.renderWhenEmpty}\n            />\n          )\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getNextRating(rating: number): number | undefined {\n  return rating > 1 ? rating - 1 : undefined;\n}\n\nfunction getWorstSeverity(data: string): { severity: string; count: number } | undefined {\n  const SEVERITY_ORDER = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\n  const severities: { [key: string]: number } = {};\n  data.split(';').forEach(equality => {\n    const [key, count] = equality.split('=');\n    severities[key] = Number(count);\n  });\n\n  for (let i = 0; i < SEVERITY_ORDER.length; i++) {\n    const count = severities[SEVERITY_ORDER[i]];\n    if (count > 0) {\n      return { severity: SEVERITY_ORDER[i], count };\n    }\n  }\n\n  return undefined;\n}\n\nexport function getEffortToNextRating(\n  measures: Array<{ metric: { key: string }; value: string }>,\n  metricKey: string\n) {\n  const measure = measures.find(measure => measure.metric.key === metricKey);\n  if (!measure) {\n    return undefined;\n  }\n  return getWorstSeverity(measure.value);\n}\n\nexport const PORTFOLIO_METRICS = [\n  'projects',\n  'ncloc',\n  'ncloc_language_distribution',\n\n  'releasability_rating',\n  'releasability_effort',\n\n  'sqale_rating',\n  'maintainability_rating_effort',\n\n  'reliability_rating',\n  'reliability_rating_effort',\n\n  'security_rating',\n  'security_rating_effort',\n\n  'last_change_on_releasability_rating',\n  'last_change_on_maintainability_rating',\n  'last_change_on_security_rating',\n  'last_change_on_reliability_rating'\n];\n\nexport const SUB_COMPONENTS_METRICS = [\n  'ncloc',\n  'releasability_rating',\n  'security_rating',\n  'reliability_rating',\n  'sqale_rating',\n  'alert_status'\n];\n\nexport function convertMeasures(measures: Array<{ metric: string; value?: string }>) {\n  const result: { [key: string]: string | undefined } = {};\n  measures.forEach(measure => {\n    result[measure.metric] = measure.value;\n  });\n  return result;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport Summary from './Summary';\nimport Report from './Report';\nimport WorstProjects from './WorstProjects';\nimport ReleasabilityBox from './ReleasabilityBox';\nimport ReliabilityBox from './ReliabilityBox';\nimport SecurityBox from './SecurityBox';\nimport MaintainabilityBox from './MaintainabilityBox';\nimport Activity from './Activity';\nimport { SubComponent } from '../types';\nimport { PORTFOLIO_METRICS, SUB_COMPONENTS_METRICS, convertMeasures } from '../utils';\nimport { getMeasures } from '../../../api/measures';\nimport { getChildren } from '../../../api/components';\nimport { translate } from '../../../helpers/l10n';\nimport { fetchMetrics } from '../../../store/rootActions';\nimport { getMetrics, Store } from '../../../store/rootReducer';\nimport '../styles.css';\nimport PrivacyBadgeContainer from '../../../components/common/PrivacyBadgeContainer';\n\ninterface OwnProps {\n  component: T.Component;\n}\n\ninterface StateToProps {\n  metrics: { [key: string]: T.Metric };\n}\n\ninterface DispatchToProps {\n  fetchMetrics: () => void;\n}\n\ntype Props = StateToProps & DispatchToProps & OwnProps;\n\ninterface State {\n  loading: boolean;\n  measures?: { [key: string]: string | undefined };\n  subComponents?: SubComponent[];\n  totalSubComponents?: number;\n}\n\nexport class App extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.props.fetchMetrics();\n    this.fetchData();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.component !== this.props.component) {\n      this.fetchData();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData() {\n    this.setState({ loading: true });\n    Promise.all([\n      getMeasures({ component: this.props.component.key, metricKeys: PORTFOLIO_METRICS.join() }),\n      getChildren(this.props.component.key, SUB_COMPONENTS_METRICS, { ps: 20, s: 'qualifier' })\n    ]).then(\n      ([measures, subComponents]) => {\n        if (this.mounted) {\n          this.setState({\n            loading: false,\n            measures: convertMeasures(measures),\n            subComponents: subComponents.components.map((component: any) => ({\n              ...component,\n              measures: convertMeasures(component.measures)\n            })),\n            totalSubComponents: subComponents.paging.total\n          });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  isEmpty = () => this.state.measures === undefined || this.state.measures['ncloc'] === undefined;\n\n  isNotComputed = () =>\n    this.state.measures && this.state.measures['reliability_rating'] === undefined;\n\n  renderSpinner() {\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"text-center\">\n          <i className=\"spinner spinner-margin\" />\n        </div>\n      </div>\n    );\n  }\n\n  renderEmpty() {\n    return (\n      <div className=\"empty-search\">\n        <h3>\n          {!this.state.measures || !this.state.measures['projects']\n            ? translate('portfolio.empty')\n            : translate('portfolio.no_lines_of_code')}\n        </h3>\n      </div>\n    );\n  }\n\n  renderWhenNotComputed() {\n    return (\n      <div className=\"empty-search\">\n        <h3>{translate('portfolio.not_computed')}</h3>\n      </div>\n    );\n  }\n\n  renderMain() {\n    const { component } = this.props;\n    const { measures, subComponents, totalSubComponents } = this.state;\n\n    if (this.isEmpty()) {\n      return this.renderEmpty();\n    }\n\n    if (this.isNotComputed()) {\n      return this.renderWhenNotComputed();\n    }\n\n    return (\n      <div>\n        <div className=\"portfolio-boxes\">\n          <ReleasabilityBox component={component.key} measures={measures!} />\n          <ReliabilityBox component={component.key} measures={measures!} />\n          <SecurityBox component={component.key} measures={measures!} />\n          <MaintainabilityBox component={component.key} measures={measures!} />\n        </div>\n\n        {subComponents !== undefined &&\n          totalSubComponents !== undefined && (\n            <WorstProjects\n              component={component.key}\n              subComponents={subComponents}\n              total={totalSubComponents}\n            />\n          )}\n      </div>\n    );\n  }\n\n  render() {\n    const { component } = this.props;\n    const { loading, measures } = this.state;\n\n    if (loading) {\n      return this.renderSpinner();\n    }\n\n    return (\n      <div className=\"page page-limited\">\n        <div className=\"page-with-sidebar\">\n          <div className=\"page-main\">{this.renderMain()}</div>\n\n          <aside className=\"page-sidebar-fixed\">\n            <div className=\"portfolio-meta-card\">\n              <h4 className=\"portfolio-meta-header\">\n                {translate('overview.about_this_portfolio')}\n                {component.visibility && (\n                  <PrivacyBadgeContainer\n                    className=\"spacer-left pull-right\"\n                    organization={component.organization}\n                    qualifier={component.qualifier}\n                    tooltipProps={{ projectKey: component.key }}\n                    visibility={component.visibility}\n                  />\n                )}\n              </h4>\n              <Summary component={component} measures={measures || {}} />\n            </div>\n\n            <div className=\"portfolio-meta-card\">\n              <Activity component={component.key} metrics={this.props.metrics} />\n            </div>\n\n            <div className=\"portfolio-meta-card\">\n              <Report component={component} />\n            </div>\n          </aside>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapDispatchToProps: DispatchToProps = { fetchMetrics };\n\nconst mapStateToProps = (state: Store): StateToProps => ({\n  metrics: getMetrics(state)\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip, { Placement } from './Tooltip';\nimport HelpIcon from '../icons-components/HelpIcon';\nimport * as theme from '../../app/theme';\nimport './HelpTooltip.css';\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  onShow?: () => void;\n  overlay: React.ReactNode;\n  placement?: Placement;\n  tagName?: string;\n}\n\nexport default function HelpTooltip(props: Props) {\n  const { children = <HelpIcon fill={theme.gray71} size={12} />, tagName = 'div' } = props;\n\n  return React.createElement(\n    tagName,\n    { className: classNames('help-tooltip', props.className) },\n    <Tooltip\n      mouseLeaveDelay={0.25}\n      onShow={props.onShow}\n      overlay={props.overlay}\n      placement={props.placement}>\n      <span className=\"display-inline-flex-center\">{children}</span>\n    </Tooltip>\n  );\n}\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./HelpTooltip.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.help-tooltip {\\n  display: inline-flex;\\n  align-items: center;\\n  vertical-align: middle;\\n}\\n\\n.help-toolip-link {\\n  display: block;\\n  width: 12px;\\n  height: 12px;\\n  border: none;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport HelpTooltip from '../controls/HelpTooltip';\nimport { lazyLoad } from '../lazyLoad';\n\nconst DocMarkdownBlock = lazyLoad(() => import('./DocMarkdownBlock'));\n\ninterface Props {\n  className?: string;\n  children?: React.ReactNode;\n  // Use as `import(/* webpackMode: \"eager\" */ 'Docs/tooltips/foo/bar.md')`\n  doc: Promise<{ default: string }>;\n  overlayProps?: { [k: string]: string };\n}\n\ninterface State {\n  content?: string;\n  open: boolean;\n}\n\nexport default class DocTooltip extends React.PureComponent<Props, State> {\n  state: State = { open: false };\n\n  componentDidMount() {\n    this.props.doc.then(\n      ({ default: content }) => {\n        this.setState({ content });\n      },\n      () => {}\n    );\n    document.addEventListener('scroll', this.close, true);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('scroll', this.close, true);\n  }\n\n  close = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    return this.state.content ? (\n      <HelpTooltip\n        className={this.props.className}\n        overlay={\n          <div className=\"abs-width-300\">\n            <DocMarkdownBlock\n              childProps={this.props.overlayProps}\n              className=\"cut-margins\"\n              content={this.state.content}\n              isTooltip={true}\n            />\n          </div>\n        }>\n        {this.props.children}\n      </HelpTooltip>\n    ) : (\n      this.props.children || null\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\nconst qualifierIcons: { [x: string]: (props: IconProps) => React.ReactElement<any> } = {\n  app: ApplicationIcon,\n  brc: SubProjectIcon,\n  dev: DeveloperIcon,\n  dir: DirectoryIcon,\n  fil: FileIcon,\n  svw: SubPortfolioIcon,\n  trk: ProjectIcon,\n  uts: UnitTestIcon,\n  vw: PortfolioIcon,\n\n  // deprecated:\n  cla: UnitTestIcon,\n  dev_prj: ProjectIcon,\n  lib: LibraryIcon,\n  pac: DirectoryIcon\n};\n\ninterface QualifierIconProps {\n  className?: string;\n  fill?: string;\n  qualifier: string | null | undefined;\n}\n\nexport default function QualifierIcon(props: QualifierIconProps) {\n  if (!props.qualifier) {\n    return null;\n  }\n\n  const qualifier = props.qualifier.toLowerCase();\n  const FoundIcon = qualifierIcons[qualifier];\n  return FoundIcon ? <FoundIcon className={props.className} fill={props.fill} /> : null;\n}\n\nfunction ApplicationIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M3.014 10.986a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zm-5.004-.021c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zm-4.98 1.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM2.984 6a2 2 0 1 1-.001 4.001A2 2 0 0 1 2.984 6zm9.984 0a2 2 0 1 1-.001 4.001A2 2 0 0 1 12.968 6zm-5.004-.021c1.103 0 2 .897 2 2a2 2 0 1 1-2-2zM2.984 7a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5.004-.021a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM3 1.025a2 2 0 1 1-.001 4.001A2 2 0 0 1 3 1.025zm9.984 0a2 2 0 1 1-.001 4.001 2 2 0 0 1 .001-4.001zM7.98 1.004c1.103 0 2 .896 2 2s-.897 2-2 2a2 2 0 0 1 0-4zM3 2.025a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm9.984 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.98 2.004a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction DeveloperIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M7.974 8.02a3.5 3.5 0 0 1-2.482-1.017 3.428 3.428 0 0 1-1.028-2.455c0-.927.365-1.8 1.028-2.455a3.505 3.505 0 0 1 2.482-1.017 3.5 3.5 0 0 1 2.482 1.017 3.434 3.434 0 0 1 1.027 2.455c0 .928-.365 1.8-1.027 2.455A3.504 3.504 0 0 1 7.974 8.02zm0-5.778c-1.286 0-2.332 1.034-2.332 2.306s1.046 2.307 2.332 2.307c1.285 0 2.332-1.035 2.332-2.307S9.258 2.242 7.974 2.242zm3.534 6.418c.127.016.243.045.348.086.17.066.302.146.406.246.132.124.253.282.36.47.126.218.226.442.3.668.08.253.15.535.206.838.056.313.095.604.113.867.02.28.03.57.03.862 0 .532-.174.758-.306.882-.142.132-.397.31-.973.31H3.948c-.233 0-.437-.03-.606-.09-.14-.05-.26-.123-.366-.222-.13-.123-.306-.35-.306-.88 0-.294.01-.584.03-.863.018-.263.056-.554.112-.867a6.5 6.5 0 0 1 .207-.838c.073-.226.173-.45.298-.667.108-.19.23-.347.36-.47.106-.1.238-.18.407-.247.105-.04.22-.07.348-.086.202.13.432.277.683.435.342.217.756.4 1.265.564.523.166 1.06.25 1.59.25a5.25 5.25 0 0 0 1.592-.25c.51-.164.923-.348 1.266-.565.25-.158.48-.304.682-.435l-.002.002zm-.244-1.18c-.055 0-.184.066-.387.196-.202.13-.43.276-.685.437-.255.16-.586.307-.994.437-.408.13-.818.196-1.23.196-.41 0-.82-.065-1.228-.196a4.303 4.303 0 0 1-.993-.437c-.255-.16-.484-.306-.686-.437-.202-.13-.33-.196-.386-.196-.374 0-.716.06-1.026.183-.31.12-.572.283-.787.487a3.28 3.28 0 0 0-.57.737 4.662 4.662 0 0 0-.395.888c-.098.303-.18.633-.244.988a9.652 9.652 0 0 0-.128.992c-.02.306-.032.62-.032.942 0 .73.224 1.304.672 1.726.448.42 1.043.632 1.785.632h8.044c.743 0 1.34-.21 1.787-.633.447-.42.67-.996.67-1.725 0-.32-.01-.635-.03-.942a9.159 9.159 0 0 0-.374-1.98c-.098-.304-.23-.6-.395-.888a3.23 3.23 0 0 0-.57-.737 2.404 2.404 0 0 0-.788-.487 2.779 2.779 0 0 0-1.026-.183h-.004z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction DirectoryIcon({ className, fill = theme.orange, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 12.286V5.703a.673.673 0 0 0-.195-.5.644.644 0 0 0-.49-.203H6.704a.686.686 0 0 1-.5-.214.707.707 0 0 1-.203-.51v-.57c0-.2-.07-.363-.207-.502A.679.679 0 0 0 5.29 3H2.707a.672.672 0 0 0-.5.204.683.683 0 0 0-.206.5v8.582c0 .2.07.367.206.506.137.14.304.208.5.208h10.61a.66.66 0 0 0 .49-.208.685.685 0 0 0 .194-.506H14zm1-6.598v6.65c0 .458-.152.83-.475 1.16-.324.326-.7.502-1.15.502H2.647c-.452 0-.84-.175-1.162-.503a1.572 1.572 0 0 1-.486-1.158V3.654a1.6 1.6 0 0 1 .486-1.17A1.578 1.578 0 0 1 2.648 2h2.7c.45 0 .84.157 1.164.485.324.328.488.714.488 1.17V4h6.373c.452 0 .83.174 1.152.5.323.33.475.73.475 1.187v.001z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction FileIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 15H2V1l7.997.02c1 .034 1.759.758 2.428 1.42.667.663 1.561 1.605 1.574 2.555H14V15zM9 2H3v12h10V6H9V2zm3 10H4v-1h8v1zm0-2H4V9h8v1zm-1.988-5h3.008c-.012-.674-.714-1.443-1.204-1.937-.488-.495-1.039-1.058-1.816-1.055v2.96l.012.032z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction LibraryIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M1 13h4V3H1v10zm3-1H2v-2h2v2zM2 4h2v4H2V4zm4 9h4V3H6v10zm3-1H7v-2h2v2zM7 4h2v4H7V4zm4 9h4V3h-4v10zm3-1h-2v-2h2v2zm-2-8h2v4h-2V4z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction PortfolioIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.97 14.97H1.016V1.015H14.97V14.97zm-1-12.955H2.015V13.97H13.97V2.015zm-.973 10.982H9V9h3.997v3.997zM7 12.996H3.004V9H7v3.996zM11.997 10H10v1.997h1.997V10zM6 10H4.004v1.996H6V10zm1-3H3.006V3.006H7V7zm5.985 0H9V3.015h3.985V7zM6 4.006H4.006V6H6V4.006zm5.985.009H10V6h1.985V4.015z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction ProjectIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.985 13.988L1 14.005 1.02 5h13.966v8.988h-.001zM1.998 5.995l.006 7.02L14.022 13 14 6.004l-12.002-.01v.001zM3 4.5V4h9.996l.004.5h1l-.005-1.497-11.98.003L2 4.5h1zm1-2v-.504h8.002L12 2.5h1l-.004-1.495H3.003L3 2.5h1z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction SubPortfolioIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 7h2v9H7v-2H0V0h14v7zM8 8v7h7V8H8zm3 6H9v-2h2v2zm3 0h-2v-2h2v2zm-1-7V1H1v12h6V7h6zm-7 5H2V8h4v4zm5-1H9V9h2v2zm3 0h-2V9h2v2zM5 9H3v2h2V9zm1-3H2V2h4v4zm6 0H8V2h4v4zM5 3H3v2h2V3zm6 0H9v2h2V3z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction SubProjectIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 9V8h6v1h1v1h1v6H6v-6h1V9h1zm7 2H7v4h8v-4zm-1-7v3h-1V5H1v7h4v1H0V4h14zm-1-2v1.5h-1V3H2v.5H1V2h12zm-1-2v1.5h-1V1H3v.5H2V0h10z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n\nfunction UnitTestIcon({ className, fill = theme.blue, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 15H2V1l7.997.02c1.013-.03 1.57.893 2.239 1.555.667.663 1.75 1.47 1.763 2.42H14V15zM9 2H3v12h10V6H9V2zM7 8l-3 2.5L7 13V8zm1 5l3-2.5L8 8v5zm2.012-8h3.008c-.012-.674-.78-1.258-1.27-1.752-.488-.495-.973-1.243-1.75-1.24v2.96l.012.032z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\ninterface Props {\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: Props) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n\n  return <span className={className}>{formatted}</span>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Rating.css';\n\ninterface Props {\n  className?: string;\n  muted?: boolean;\n  small?: boolean;\n  value: string | number | undefined;\n}\n\nexport default function Rating({ className, muted = false, small = false, value }: Props) {\n  if (value === undefined) {\n    return <span>{''}</span>;\n  }\n  const formatted = formatMeasure(value, 'RATING');\n  return (\n    <span\n      className={classNames(\n        'rating',\n        'rating-' + formatted,\n        { 'rating-small': small, 'rating-muted': muted },\n        className\n      )}>\n      {formatted}\n    </span>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.level {\\n  display: inline-block;\\n  width: auto;\\n  min-width: 80px;\\n  padding-left: 9px;\\n  padding-right: 9px;\\n  height: 24px;\\n  line-height: 24px;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n  color: #fff;\\n  letter-spacing: 0.02em;\\n  font-size: 13px;\\n  font-weight: 400;\\n  text-align: center;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35);\\n}\\n\\n.level-small {\\n  width: auto;\\n  min-width: 64px;\\n  padding-left: 9px;\\n  padding-right: 9px;\\n  margin-top: -1px;\\n  margin-bottom: -1px;\\n  height: 20px;\\n  line-height: 20px;\\n  font-size: 12px;\\n}\\n\\n.level-muted {\\n  background-color: #bdbdbd !important;\\n}\\n\\na > .level {\\n  margin-bottom: -1px;\\n  border-bottom: 1px solid;\\n  transition: all 0.2s ease;\\n}\\n\\na > .level:hover {\\n  opacity: 0.8;\\n}\\n\\n.level-OK {\\n  background-color: #00aa00;\\n}\\n\\n.level-WARN {\\n  background-color: #ed7d20;\\n}\\n\\n.level-ERROR {\\n  background-color: #d4333f;\\n}\\n\\n.level-NONE {\\n  background-color: #b4b4b4;\\n}\\n\", \"\"]);\n\n// exports\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.rating {\\n  display: inline-block;\\n  width: 24px;\\n  height: 24px;\\n  line-height: 24px;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n  color: #fff;\\n  font-size: 16px;\\n  font-weight: 400;\\n  text-align: center;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35);\\n}\\n\\n.rating-muted {\\n  background-color: #bdbdbd !important;\\n  color: #fff !important;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35) !important;\\n}\\n\\na > .rating {\\n  margin-bottom: -1px;\\n  border-bottom: 1px solid;\\n  transition: all 0.2s ease;\\n}\\n\\na > .rating:hover {\\n  opacity: 0.8;\\n}\\n\\n.rating-A {\\n  line-height: 23px;\\n  background-color: #00aa00;\\n}\\n\\na > .rating-A {\\n  border-bottom-color: #00aa00;\\n}\\n\\n.rating-B {\\n  background-color: #b0d513;\\n}\\n\\na .rating-B {\\n  border-bottom-color: #b0d513;\\n}\\n\\n.rating-C {\\n  background-color: #eabe06;\\n}\\n\\na .rating-C {\\n  border-bottom-color: #eabe06;\\n}\\n\\n.rating-D {\\n  background-color: #ed7d20;\\n}\\n\\na .rating-D {\\n  border-bottom-color: #ed7d20;\\n}\\n\\n.rating-E {\\n  background-color: #e00;\\n}\\n\\na .rating-E {\\n  border-bottom-color: #e00;\\n}\\n\\n.rating-small {\\n  width: 18px;\\n  height: 18px;\\n  line-height: 18px;\\n  margin-top: -1px;\\n  margin-bottom: -1px;\\n  font-size: 12px;\\n}\\n\", \"\"]);\n\n// exports\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getRatingTooltip } from './utils';\nimport Rating from '../ui/Rating';\nimport Level from '../ui/Level';\nimport Tooltip from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span>{''}</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : ''}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(\n  measure: T.Measure,\n  metrics: { [key: string]: T.Metric }\n): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from './l10n';\nimport { parseDate } from './dates';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter;\n  if (period.mode === 'previous_version' && !parameter) {\n    return translate('overview.period.previous_version_only_date');\n  }\n\n  if (period.mode === 'date' && parameter) {\n    parameter = dateFormatter(parameter);\n  } else if (period.mode === 'manual_baseline') {\n    if (!parameter) {\n      parameter = dateFormatter(period.date);\n    } else {\n      return translateWithParameters('overview.period.previous_version', parameter);\n    }\n  }\n\n  return translateWithParameters(`overview.period.${period.mode}`, parameter || '');\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { chunk, flatMap, groupBy, isEqual, sortBy } from 'lodash';\nimport {\n  cleanQuery,\n  parseAsArray,\n  parseAsDate,\n  parseAsString,\n  serializeStringArray,\n  serializeDate,\n  serializeString,\n  RawQuery\n} from '../../helpers/query';\nimport { parseDate, startOfDay } from '../../helpers/dates';\nimport { getLocalizedMetricName, translate } from '../../helpers/l10n';\nimport { get } from '../../helpers/storage';\n\nexport type ParsedAnalysis = T.Omit<T.Analysis, 'date'> & { date: Date };\n\nexport interface Query {\n  category: string;\n  customMetrics: string[];\n  from?: Date;\n  graph: string;\n  project: string;\n  selectedDate?: Date;\n  to?: Date;\n}\n\nexport interface Point {\n  x: Date;\n  y: number | string | undefined;\n}\n\nexport interface Serie {\n  data: Point[];\n  name: string;\n  translatedName: string;\n  type: string;\n}\n\nexport interface HistoryItem {\n  date: Date;\n  value?: string;\n}\n\nexport interface MeasureHistory {\n  metric: string;\n  history: HistoryItem[];\n}\n\nexport const EVENT_TYPES = ['VERSION', 'QUALITY_GATE', 'QUALITY_PROFILE', 'OTHER'];\nexport const APPLICATION_EVENT_TYPES = ['QUALITY_GATE', 'DEFINITION_CHANGE', 'OTHER'];\nexport const DEFAULT_GRAPH = 'issues';\nexport const GRAPH_TYPES = ['issues', 'coverage', 'duplications', 'custom'];\nexport const GRAPHS_METRICS_DISPLAYED: { [x: string]: string[] } = {\n  issues: ['bugs', 'code_smells', 'vulnerabilities'],\n  coverage: ['lines_to_cover', 'uncovered_lines'],\n  duplications: ['ncloc', 'duplicated_lines']\n};\nexport const GRAPHS_METRICS: { [x: string]: string[] } = {\n  issues: GRAPHS_METRICS_DISPLAYED['issues'].concat([\n    'reliability_rating',\n    'security_rating',\n    'sqale_rating'\n  ]),\n  coverage: GRAPHS_METRICS_DISPLAYED['coverage'].concat(['coverage']),\n  duplications: GRAPHS_METRICS_DISPLAYED['duplications'].concat(['duplicated_lines_density'])\n};\n\nexport const PROJECT_ACTIVITY_GRAPH = 'sonar_project_activity.graph';\nexport const PROJECT_ACTIVITY_GRAPH_CUSTOM = 'sonar_project_activity.graph.custom';\n\nexport function activityQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return prevQuery.category !== nextQuery.category || datesQueryChanged(prevQuery, nextQuery);\n}\n\nexport function customMetricsChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.customMetrics, nextQuery.customMetrics);\n}\n\nexport function datesQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.from, nextQuery.from) || !isEqual(prevQuery.to, nextQuery.to);\n}\n\nexport function hasDataValues(serie: Serie) {\n  return serie.data.some(point => Boolean(point.y || point.y === 0));\n}\n\nexport function hasHistoryData(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1);\n}\n\nexport function hasHistoryDataValue(series: Serie[]) {\n  return series.some(serie => serie.data && serie.data.length > 1 && hasDataValues(serie));\n}\n\nexport function historyQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return prevQuery.graph !== nextQuery.graph;\n}\n\nexport function isCustomGraph(graph: string) {\n  return graph === 'custom';\n}\n\nexport function selectedDateQueryChanged(prevQuery: Query, nextQuery: Query) {\n  return !isEqual(prevQuery.selectedDate, nextQuery.selectedDate);\n}\n\nexport function generateCoveredLinesMetric(\n  uncoveredLines: MeasureHistory,\n  measuresHistory: MeasureHistory[]\n) {\n  const linesToCover = measuresHistory.find(measure => measure.metric === 'lines_to_cover');\n  return {\n    data: linesToCover\n      ? uncoveredLines.history.map((analysis, idx) => ({\n          x: analysis.date,\n          y: Number(linesToCover.history[idx].value) - Number(analysis.value)\n        }))\n      : [],\n    name: 'covered_lines',\n    translatedName: translate('project_activity.custom_metric.covered_lines'),\n    type: 'INT'\n  };\n}\n\nfunction findMetric(key: string, metrics: T.Metric[] | { [key: string]: T.Metric }) {\n  if (Array.isArray(metrics)) {\n    return metrics.find(metric => metric.key === key);\n  }\n  return metrics[key];\n}\n\nexport function generateSeries(\n  measuresHistory: MeasureHistory[],\n  graph: string,\n  metrics: T.Metric[] | { [key: string]: T.Metric },\n  displayedMetrics: string[]\n): Serie[] {\n  if (displayedMetrics.length <= 0 || typeof measuresHistory === 'undefined') {\n    return [];\n  }\n  return sortBy(\n    measuresHistory\n      .filter(measure => displayedMetrics.indexOf(measure.metric) >= 0)\n      .map(measure => {\n        if (measure.metric === 'uncovered_lines' && !isCustomGraph(graph)) {\n          return generateCoveredLinesMetric(measure, measuresHistory);\n        }\n        const metric = findMetric(measure.metric, metrics);\n        return {\n          data: measure.history.map(analysis => ({\n            x: analysis.date,\n            y: metric && metric.type === 'LEVEL' ? analysis.value : Number(analysis.value)\n          })),\n          name: measure.metric,\n          translatedName: metric ? getLocalizedMetricName(metric) : measure.metric,\n          type: metric ? metric.type : 'INT'\n        };\n      }),\n    serie =>\n      displayedMetrics.indexOf(serie.name === 'covered_lines' ? 'uncovered_lines' : serie.name)\n  );\n}\n\nexport function splitSeriesInGraphs(series: Serie[], maxGraph: number, maxSeries: number) {\n  return flatMap(groupBy(series, serie => serie.type), type => chunk(type, maxSeries)).slice(\n    0,\n    maxGraph\n  );\n}\n\nexport function getSeriesMetricType(series: Serie[]) {\n  return series.length > 0 ? series[0].type : 'INT';\n}\n\ninterface AnalysesByDay {\n  byDay: { [x: string]: ParsedAnalysis[] };\n  version: string | null;\n  key: string | null;\n}\n\nexport function getAnalysesByVersionByDay(analyses: ParsedAnalysis[], query: Query) {\n  return analyses.reduce<AnalysesByDay[]>((acc, analysis) => {\n    let currentVersion = acc[acc.length - 1];\n    const versionEvent = analysis.events.find(event => event.category === 'VERSION');\n    if (versionEvent) {\n      const newVersion = { version: versionEvent.name, key: versionEvent.key, byDay: {} };\n      if (!currentVersion || Object.keys(currentVersion.byDay).length > 0) {\n        acc.push(newVersion);\n      } else {\n        acc[acc.length - 1] = newVersion;\n      }\n      currentVersion = newVersion;\n    } else if (!currentVersion) {\n      // APPs don't have version events, so let's create a fake one\n      currentVersion = { version: null, key: null, byDay: {} };\n      acc.push(currentVersion);\n    }\n\n    const day = startOfDay(parseDate(analysis.date))\n      .getTime()\n      .toString();\n\n    let matchFilters = true;\n    if (query.category || query.from || query.to) {\n      const isAfterFrom = !query.from || analysis.date >= query.from;\n      const isBeforeTo = !query.to || analysis.date <= query.to;\n      const hasSelectedCategoryEvents =\n        !query.category || analysis.events.find(event => event.category === query.category) != null;\n      matchFilters = isAfterFrom && isBeforeTo && hasSelectedCategoryEvents;\n    }\n\n    if (matchFilters) {\n      if (!currentVersion.byDay[day]) {\n        currentVersion.byDay[day] = [];\n      }\n      currentVersion.byDay[day].push(analysis);\n    }\n    return acc;\n  }, []);\n}\n\nexport function getDisplayedHistoryMetrics(graph: string, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS_DISPLAYED[graph];\n}\n\nexport function getHistoryMetrics(graph: string, customMetrics: string[]) {\n  return isCustomGraph(graph) ? customMetrics : GRAPHS_METRICS[graph];\n}\n\nexport function getProjectActivityGraph(project: string) {\n  const customGraphs = get(PROJECT_ACTIVITY_GRAPH_CUSTOM, project);\n  return {\n    graph: get(PROJECT_ACTIVITY_GRAPH, project) || 'issues',\n    customGraphs: customGraphs ? customGraphs.split(',') : []\n  };\n}\n\nfunction parseGraph(value?: string) {\n  const graph = parseAsString(value);\n  return GRAPH_TYPES.includes(graph) ? graph : DEFAULT_GRAPH;\n}\n\nfunction serializeGraph(value: string) {\n  return value === DEFAULT_GRAPH ? undefined : value;\n}\n\nexport function parseQuery(urlQuery: RawQuery): Query {\n  return {\n    category: parseAsString(urlQuery['category']),\n    customMetrics: parseAsArray(urlQuery['custom_metrics'], parseAsString),\n    from: parseAsDate(urlQuery['from']),\n    graph: parseGraph(urlQuery['graph']),\n    project: parseAsString(urlQuery['id']),\n    to: parseAsDate(urlQuery['to']),\n    selectedDate: parseAsDate(urlQuery['selected_date'])\n  };\n}\n\nexport function serializeQuery(query: Query): RawQuery {\n  return cleanQuery({\n    category: serializeString(query.category),\n    from: serializeDate(query.from),\n    project: serializeString(query.project),\n    to: serializeDate(query.to)\n  });\n}\n\nexport function serializeUrlQuery(query: Query): RawQuery {\n  return cleanQuery({\n    category: serializeString(query.category),\n    custom_metrics: serializeStringArray(query.customMetrics),\n    from: serializeDate(query.from),\n    graph: serializeGraph(query.graph),\n    id: serializeString(query.project),\n    to: serializeDate(query.to),\n    selected_date: serializeDate(query.selectedDate)\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { isLoggedIn } from './users';\n\nexport function isPaidOrganization(organization: T.Organization | undefined): boolean {\n  return Boolean(organization && organization.subscription === 'PAID');\n}\n\nexport function hasPrivateAccess(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return (\n    !isPaidOrganization(organization) ||\n    isCurrentUserMemberOf(currentUser, organization, userOrganizations)\n  );\n}\n\nexport function isCurrentUserMemberOf(\n  currentUser: T.CurrentUser,\n  organization: T.Organization | undefined,\n  userOrganizations: T.Organization[]\n): boolean {\n  return Boolean(\n    organization &&\n      isLoggedIn(currentUser) &&\n      ((organization.actions && organization.actions.admin) ||\n        userOrganizations.some(org => org.key === organization.key))\n  );\n}\n","var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function BubblesIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size} style={{ fillRule: 'nonzero' }}>\n      <path\n        d=\"M4.1 10.2c1 0 1.9.8 1.9 1.9S5.1 14 4.1 14s-1.9-.8-1.9-1.9.8-1.9 1.9-1.9m0-2C2 8.2.2 9.9.2 12.1S1.9 16 4.1 16 8 14.3 8 12.1 6.2 8.2 4.1 8.2zM10.3 2c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7-3.8-1.6-3.8-3.7S8.2 2 10.3 2m0-2C7.1 0 4.5 2.6 4.5 5.7s2.6 5.7 5.7 5.7S16 8.9 16 5.7 13.4 0 10.3 0z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function VisibleIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M13.524 8.403q-1.093-1.697-2.74-2.539 0.439 0.748 0.439 1.618 0 1.331-0.946 2.276t-2.276 0.946-2.276-0.946-0.946-2.276q0-0.87 0.439-1.618-1.647 0.842-2.74 2.539 0.957 1.474 2.399 2.348t3.125 0.874 3.125-0.874 2.399-2.348zM8.345 5.641q0-0.144-0.101-0.245t-0.245-0.101q-0.899 0-1.543 0.644t-0.644 1.543q0 0.144 0.101 0.245t0.245 0.101 0.245-0.101 0.101-0.245q0-0.619 0.439-1.057t1.057-0.439q0.144 0 0.245-0.101t0.101-0.245zM14.444 8.403q0 0.245-0.144 0.496-1.007 1.654-2.708 2.65t-3.593 0.996-3.593-1-2.708-2.647q-0.144-0.252-0.144-0.496t0.144-0.496q1.007-1.647 2.708-2.647t3.593-1 3.593 1 2.708 2.647q0.144 0.252 0.144 0.496z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { connect } from 'react-redux';\nimport * as theme from '../../app/theme';\nimport Tooltip from '../controls/Tooltip';\nimport { translate } from '../../helpers/l10n';\nimport { isSonarCloud } from '../../helpers/system';\nimport { isCurrentUserMemberOf, isPaidOrganization } from '../../helpers/organizations';\nimport {\n  getCurrentUser,\n  getOrganizationByKey,\n  getMyOrganizations,\n  Store\n} from '../../store/rootReducer';\nimport VisibleIcon from '../icons-components/VisibleIcon';\nimport DocTooltip from '../docs/DocTooltip';\n\ninterface StateToProps {\n  currentUser: T.CurrentUser;\n  organization?: T.Organization;\n  userOrganizations: T.Organization[];\n}\n\ninterface OwnProps {\n  className?: string;\n  organization: T.Organization | string | undefined;\n  qualifier: string;\n  tooltipProps?: { projectKey: string };\n  visibility: T.Visibility;\n}\n\ninterface Props extends OwnProps, StateToProps {\n  organization: T.Organization | undefined;\n}\n\nexport function PrivacyBadge({\n  className,\n  currentUser,\n  organization,\n  qualifier,\n  userOrganizations,\n  tooltipProps,\n  visibility\n}: Props) {\n  const onSonarCloud = isSonarCloud();\n  if (\n    visibility !== 'private' &&\n    (!onSonarCloud || !isCurrentUserMemberOf(currentUser, organization, userOrganizations))\n  ) {\n    return null;\n  }\n\n  let icon = null;\n  if (isPaidOrganization(organization) && visibility === 'public') {\n    icon = <VisibleIcon className=\"little-spacer-right\" fill={theme.blue} />;\n  }\n\n  const badge = (\n    <div\n      className={classNames('outline-badge', className, {\n        'badge-info': Boolean(icon),\n        'badge-icon': Boolean(icon)\n      })}>\n      {icon}\n      {translate('visibility', visibility)}\n    </div>\n  );\n\n  if (onSonarCloud && organization) {\n    return (\n      <DocTooltip\n        className={className}\n        doc={getDoc(visibility, icon, organization)}\n        overlayProps={{ ...tooltipProps, organization: organization.key }}>\n        {badge}\n      </DocTooltip>\n    );\n  }\n\n  return (\n    <Tooltip overlay={translate('visibility', visibility, 'description', qualifier)}>\n      {badge}\n    </Tooltip>\n  );\n}\n\nconst mapStateToProps = (state: Store, { organization }: OwnProps) => {\n  if (typeof organization === 'string') {\n    organization = getOrganizationByKey(state, organization);\n  }\n  return {\n    currentUser: getCurrentUser(state),\n    organization,\n    userOrganizations: getMyOrganizations(state)\n  };\n};\n\nexport default connect(mapStateToProps)(PrivacyBadge);\n\nfunction getDoc(visibility: T.Visibility, icon: JSX.Element | null, organization: T.Organization) {\n  let doc;\n  const { actions = {} } = organization;\n  if (visibility === 'private') {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-private.md');\n  } else if (icon) {\n    if (actions.admin) {\n      doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-paid-org-admin.md');\n    } else {\n      doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-paid-org.md');\n    }\n  } else if (actions.admin) {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public-admin.md');\n  } else {\n    doc = import(/* webpackMode: \"eager\" */ 'Docs/tooltips/project/visibility-public.md');\n  }\n  return doc;\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./BarChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.bar-chart-bar {\\n  fill: #4b9fd5;\\n}\\n\\n.bar-chart-tick {\\n  fill: #777;\\n  font-size: 12px;\\n  text-anchor: middle;\\n}\\n\", \"\"]);\n\n// exports\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n","module.exports = \"This project is private. Only the members of this organization are able to browse it and its source code.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Go to your project's [Administration > Permissions](/#sonarcloud#/project_roles?id=#projectKey#) to make it private.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Contact the project administrator to make it private.\\n\\n---\\n\\nSee also: [Organization Visibility](/organizations/organization-visibility/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Subscribe to a paid plan to get unlimited private projects in [Administration > Billing](/#sonarcloud#/organizations/#organization#/extension/billing/billing).\\n\\n---\\n\\nSee also: [Pricing](/sonarcloud-pricing/)\\n\"","module.exports = \"This project is public, which means anyone is able to browse its source code. Contact the organization administrator if you want to make it private.\\n\\n---\\n\\nSee also: [Pricing](/sonarcloud-pricing/)\\n\"","var baseFlatten = require('./_baseFlatten'),\n    map = require('./map');\n\n/**\n * Creates a flattened array of values by running each element in `collection`\n * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n * with three arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * function duplicate(n) {\n *   return [n, n];\n * }\n *\n * _.flatMap([1, 2], duplicate);\n * // => [1, 1, 2, 2]\n */\nfunction flatMap(collection, iteratee) {\n  return baseFlatten(map(collection, iteratee), 1);\n}\n\nmodule.exports = flatMap;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LineChart.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon from './Icon';\nimport * as theme from '../../app/theme';\n\ninterface Props {\n  className?: string;\n  index: number;\n  size?: number;\n}\n\nconst COLORS = [theme.blue, theme.darkBlue, '#24c6e0'];\n\nexport default function ChartLegendIcon({ className, index, size }: Props) {\n  const fill = COLORS[index] || COLORS[0];\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.325 7.143v1.714q0 0.357-0.25 0.607t-0.607 0.25h-10.857q-0.357 0-0.607-0.25t-0.25-0.607v-1.714q0-0.357 0.25-0.607t0.607-0.25h10.857q0.357 0 0.607 0.25t0.25 0.607z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function HistoryIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14.7 3.4v3.3c0 .1 0 .2-.1.2s-.2 0-.3-.1l-.9-.9-4.8 4.8c-.1.1-.1.1-.2.1s-.1 0-.2-.1L6.4 9l-3.2 3.2-1.5-1.5 4.5-4.5c.1-.1.1-.1.2-.1s.1 0 .2.1L8.4 8l3.5-3.5-.9-1c-.1-.1-.1-.2-.1-.3s.1-.1.2-.1h3.3c.1 0 .1 0 .2.1.1 0 .1.1.1.2z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Histogram.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.histogram-tick {\\n  text-anchor: end;\\n}\\n\\n.histogram-tick-start {\\n  text-anchor: start;\\n}\\n\\n.histogram-value {\\n  text-anchor: start;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.line-chart-path {\\n  fill: none;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-path.line-chart-path-1 {\\n  stroke: #236a97;\\n}\\n\\n.line-chart-path.line-chart-path-2 {\\n  stroke: #24c6e0;\\n}\\n\\n.line-chart-area {\\n  fill: rgba(75, 159, 213, 0.3);\\n  stroke-width: 0;\\n}\\n\\n.line-chart-area.line-chart-area-1 {\\n  fill: rgba(35, 106, 151, 0.3);\\n}\\n\\n.line-chart-area.line-chart-area-2 {\\n  fill: rgba(36, 198, 224, 0.3);\\n}\\n\\n.line-chart-point {\\n  fill: #fff;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-tick {\\n  fill: #777;\\n  font-size: 12px;\\n  text-anchor: middle;\\n}\\n\\n.line-chart-tick-x {\\n  text-anchor: end;\\n}\\n\\n.line-chart-tick-x-right {\\n  text-anchor: start;\\n}\\n\\n.line-chart-grid {\\n  shape-rendering: crispedges;\\n  stroke: #eee;\\n}\\n\", \"\"]);\n\n// exports\n","var baseExtremum = require('./_baseExtremum'),\n    baseIteratee = require('./_baseIteratee'),\n    baseLt = require('./_baseLt');\n\n/**\n * This method is like `_.min` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * // The `_.property` iteratee shorthand.\n * _.minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nfunction minBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseLt)\n    : undefined;\n}\n\nmodule.exports = minBy;\n","/**\n * The base implementation of `_.lt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than `other`,\n *  else `false`.\n */\nfunction baseLt(value, other) {\n  return value < other;\n}\n\nmodule.exports = baseLt;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { flatten, isEqual, sortBy, throttle, uniq } from 'lodash';\nimport { bisector, extent, max } from 'd3-array';\nimport { scaleLinear, scalePoint, scaleTime, ScaleTime } from 'd3-scale';\nimport { line as d3Line, area, curveBasis } from 'd3-shape';\nimport * as theme from '../../app/theme';\nimport { Serie, Point } from '../../apps/projectActivity/utils';\nimport { isDefined } from '../../helpers/types';\nimport './LineChart.css';\nimport './AdvancedTimeline.css';\n\nexport interface Props {\n  basisCurve?: boolean;\n  endDate?: Date;\n  disableZoom?: boolean;\n  formatYTick?: (tick: number | string) => string;\n  hideGrid?: boolean;\n  hideXAxis?: boolean;\n  height: number;\n  width: number;\n  leakPeriodDate?: Date;\n  // used to avoid same y ticks labels\n  maxYTicksCount: number;\n  metricType: string;\n  padding: number[];\n  selectedDate?: Date;\n  series: Serie[];\n  showAreas?: boolean;\n  startDate?: Date;\n  updateSelectedDate?: (selectedDate?: Date) => void;\n  updateTooltip?: (selectedDate?: Date, tooltipXPos?: number, tooltipIdx?: number) => void;\n  updateZoom?: (start?: Date, endDate?: Date) => void;\n  zoomSpeed: number;\n}\n\ntype XScale = ScaleTime<number, number>;\n// TODO it should be `ScaleLinear<number, number> | ScalePoint<number> | ScalePoint<string>`, but it's super hard to make it work :'(\ntype YScale = any;\n\ninterface State {\n  maxXRange: number[];\n  mouseOver?: boolean;\n  selectedDate?: Date;\n  selectedDateXPos?: number;\n  selectedDateIdx?: number;\n  yScale: YScale;\n  xScale: XScale;\n}\n\nexport default class AdvancedTimeline extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    eventSize: 8,\n    maxYTicksCount: 4,\n    padding: [10, 10, 30, 60],\n    zoomSpeed: 1\n  };\n\n  constructor(props: Props) {\n    super(props);\n    const scales = this.getScales(props);\n    const selectedDatePos = this.getSelectedDatePos(scales.xScale, props.selectedDate);\n    this.state = { ...scales, ...selectedDatePos };\n    this.updateTooltipPos = throttle(this.updateTooltipPos, 40);\n    this.handleZoomUpdate = throttle(this.handleZoomUpdate, 40);\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    let scales;\n    let selectedDatePos;\n    if (\n      nextProps.metricType !== this.props.metricType ||\n      nextProps.startDate !== this.props.startDate ||\n      nextProps.endDate !== this.props.endDate ||\n      nextProps.width !== this.props.width ||\n      nextProps.padding !== this.props.padding ||\n      nextProps.height !== this.props.height ||\n      nextProps.series !== this.props.series\n    ) {\n      scales = this.getScales(nextProps);\n      if (this.state.selectedDate != null) {\n        selectedDatePos = this.getSelectedDatePos(scales.xScale, this.state.selectedDate);\n      }\n    }\n\n    if (!isEqual(nextProps.selectedDate, this.props.selectedDate)) {\n      const xScale = scales ? scales.xScale : this.state.xScale;\n      selectedDatePos = this.getSelectedDatePos(xScale, nextProps.selectedDate);\n    }\n\n    if (scales || selectedDatePos) {\n      if (scales) {\n        this.setState({ ...scales });\n      }\n      if (selectedDatePos) {\n        this.setState({ ...selectedDatePos });\n      }\n\n      if (selectedDatePos && nextProps.updateTooltip) {\n        nextProps.updateTooltip(\n          selectedDatePos.selectedDate,\n          selectedDatePos.selectedDateXPos,\n          selectedDatePos.selectedDateIdx\n        );\n      }\n    }\n  }\n\n  getRatingScale = (availableHeight: number) => {\n    return scalePoint<number>()\n      .domain([5, 4, 3, 2, 1])\n      .range([availableHeight, 0]);\n  };\n\n  getLevelScale = (availableHeight: number) => {\n    return scalePoint()\n      .domain(['ERROR', 'WARN', 'OK'])\n      .range([availableHeight, 0]);\n  };\n\n  getYScale = (props: Props, availableHeight: number, flatData: Point[]): YScale => {\n    if (props.metricType === 'RATING') {\n      return this.getRatingScale(availableHeight);\n    } else if (props.metricType === 'LEVEL') {\n      return this.getLevelScale(availableHeight);\n    } else {\n      return scaleLinear()\n        .range([availableHeight, 0])\n        .domain([0, max(flatData, d => Number(d.y || 0)) || 1])\n        .nice();\n    }\n  };\n\n  getXScale = ({ startDate, endDate }: Props, availableWidth: number, flatData: Point[]) => {\n    const dateRange = extent(flatData, d => d.x) as [Date, Date];\n    const start = startDate && startDate > dateRange[0] ? startDate : dateRange[0];\n    const end = endDate && endDate < dateRange[1] ? endDate : dateRange[1];\n    const xScale: ScaleTime<number, number> = scaleTime()\n      .domain(sortBy([start, end]))\n      .range([0, availableWidth])\n      .clamp(false);\n    return {\n      xScale,\n      maxXRange: dateRange.map(xScale)\n    };\n  };\n\n  getScales = (props: Props) => {\n    const availableWidth = props.width - props.padding[1] - props.padding[3];\n    const availableHeight = props.height - props.padding[0] - props.padding[2];\n    const flatData = flatten(props.series.map(serie => serie.data));\n    return {\n      ...this.getXScale(props, availableWidth, flatData),\n      yScale: this.getYScale(props, availableHeight, flatData)\n    };\n  };\n\n  getSelectedDatePos = (xScale: XScale, selectedDate?: Date) => {\n    const firstSerie = this.props.series[0];\n    if (selectedDate && firstSerie) {\n      const idx = firstSerie.data.findIndex(p => p.x.valueOf() === selectedDate.valueOf());\n      const xRange = sortBy(xScale.range());\n      const xPos = xScale(selectedDate);\n      if (idx >= 0 && xPos >= xRange[0] && xPos <= xRange[1]) {\n        return {\n          selectedDate,\n          selectedDateXPos: xScale(selectedDate),\n          selectedDateIdx: idx\n        };\n      }\n    }\n    return { selectedDate: undefined, selectedDateXPos: undefined, selectedDateIdx: undefined };\n  };\n\n  getEventMarker = (size: number) => {\n    const half = size / 2;\n    return `M${half} 0 L${size} ${half} L ${half} ${size} L0 ${half} L${half} 0 L${size} ${half}`;\n  };\n\n  handleWheel = (event: React.WheelEvent<SVGElement>) => {\n    event.preventDefault();\n    const { maxXRange, xScale } = this.state;\n    const parentBbox = event.currentTarget.getBoundingClientRect();\n    const mouseXPos = (event.pageX - parentBbox.left) / parentBbox.width;\n    const xRange = xScale.range();\n    const speed = event.deltaMode\n      ? (25 / event.deltaMode) * this.props.zoomSpeed\n      : this.props.zoomSpeed;\n    const leftPos = xRange[0] - Math.round(speed * event.deltaY * mouseXPos);\n    const rightPos = xRange[1] + Math.round(speed * event.deltaY * (1 - mouseXPos));\n    const startDate = leftPos > maxXRange[0] ? xScale.invert(leftPos) : undefined;\n    const endDate = rightPos < maxXRange[1] ? xScale.invert(rightPos) : undefined;\n    this.handleZoomUpdate(startDate, endDate);\n  };\n\n  handleZoomUpdate = (startDate?: Date, endDate?: Date) => {\n    if (this.props.updateZoom) {\n      this.props.updateZoom(startDate, endDate);\n    }\n  };\n\n  handleMouseMove = (event: React.MouseEvent<SVGElement>) => {\n    const parentBbox = event.currentTarget.getBoundingClientRect();\n    this.updateTooltipPos(event.pageX - parentBbox.left);\n  };\n\n  handleMouseEnter = () => {\n    this.setState({ mouseOver: true });\n  };\n\n  handleMouseOut = () => {\n    const { updateTooltip } = this.props;\n    if (updateTooltip) {\n      this.setState({\n        mouseOver: false,\n        selectedDate: undefined,\n        selectedDateXPos: undefined,\n        selectedDateIdx: undefined\n      });\n      updateTooltip(undefined, undefined, undefined);\n    }\n  };\n\n  handleClick = () => {\n    const { updateSelectedDate } = this.props;\n    if (updateSelectedDate) {\n      updateSelectedDate(this.state.selectedDate || undefined);\n    }\n  };\n\n  updateTooltipPos = (xPos: number) => {\n    const firstSerie = this.props.series[0];\n    if (this.state.mouseOver && firstSerie) {\n      const { updateTooltip } = this.props;\n      const date = this.state.xScale.invert(xPos);\n      const bisectX = bisector<Point, Date>(d => d.x).right;\n      let idx = bisectX(firstSerie.data, date);\n      if (idx >= 0) {\n        const previousPoint = firstSerie.data[idx - 1];\n        const nextPoint = firstSerie.data[idx];\n        if (\n          !nextPoint ||\n          (previousPoint &&\n            date.valueOf() - previousPoint.x.valueOf() <= nextPoint.x.valueOf() - date.valueOf())\n        ) {\n          idx--;\n        }\n        const selectedDate = firstSerie.data[idx].x;\n        const xPos = this.state.xScale(selectedDate);\n        this.setState({ selectedDate, selectedDateXPos: xPos, selectedDateIdx: idx });\n        if (updateTooltip) {\n          updateTooltip(selectedDate, xPos, idx);\n        }\n      }\n    }\n  };\n\n  renderHorizontalGrid = () => {\n    const { formatYTick } = this.props;\n    const { xScale, yScale } = this.state;\n    const hasTicks = typeof yScale.ticks === 'function';\n    let ticks: Array<string | number> = hasTicks\n      ? yScale.ticks(this.props.maxYTicksCount)\n      : yScale.domain();\n\n    if (!ticks.length) {\n      ticks.push(yScale.domain()[1]);\n    }\n\n    // if there are duplicated ticks, that means 4 ticks are too much for this data\n    // so let's just use the domain values (min and max)\n    if (formatYTick) {\n      const formattedTicks = ticks.map(tick => formatYTick(tick));\n      if (ticks.length > uniq(formattedTicks).length) {\n        ticks = yScale.domain();\n      }\n    }\n\n    return (\n      <g>\n        {ticks.map(tick => (\n          <g key={tick}>\n            {formatYTick != null && (\n              <text\n                className=\"line-chart-tick line-chart-tick-x\"\n                dx=\"-1em\"\n                dy=\"0.3em\"\n                textAnchor=\"end\"\n                x={xScale.range()[0]}\n                y={yScale(tick)}>\n                {formatYTick(tick)}\n              </text>\n            )}\n            <line\n              className=\"line-chart-grid\"\n              x1={xScale.range()[0]}\n              x2={xScale.range()[1]}\n              y1={yScale(tick)}\n              y2={yScale(tick)}\n            />\n          </g>\n        ))}\n      </g>\n    );\n  };\n\n  renderXAxisTicks = () => {\n    const { xScale, yScale } = this.state;\n    const format = xScale.tickFormat(7);\n    const ticks = xScale.ticks(7);\n    const y = yScale.range()[0];\n    return (\n      <g>\n        {ticks.slice(0, -1).map((tick, index) => {\n          const nextTick = index + 1 < ticks.length ? ticks[index + 1] : xScale.domain()[1];\n          const x = (xScale(tick) + xScale(nextTick)) / 2;\n          return (\n            <text className=\"line-chart-tick\" dy=\"1.5em\" key={index} x={x} y={y}>\n              {format(tick)}\n            </text>\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderLeak = () => {\n    const { leakPeriodDate } = this.props;\n    if (!leakPeriodDate) {\n      return null;\n    }\n    const { xScale, yScale } = this.state;\n    const yRange = yScale.range();\n    const xRange = xScale.range();\n    const leakWidth = xRange[xRange.length - 1] - xScale(leakPeriodDate);\n    if (leakWidth < 0) {\n      return null;\n    }\n    return (\n      <rect\n        className=\"leak-chart-rect\"\n        fill={theme.leakColor}\n        height={yRange[0] - yRange[yRange.length - 1]}\n        width={leakWidth}\n        x={xScale(leakPeriodDate)}\n        y={yRange[yRange.length - 1]}\n      />\n    );\n  };\n\n  renderLines = () => {\n    const lineGenerator = d3Line<Point>()\n      .defined(d => Boolean(d.y || d.y === 0))\n      .x(d => this.state.xScale(d.x))\n      .y(d => this.state.yScale(d.y));\n    if (this.props.basisCurve) {\n      lineGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            className={classNames('line-chart-path', 'line-chart-path-' + idx)}\n            d={lineGenerator(serie.data) || undefined}\n            key={serie.name}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderDots = () => {\n    return (\n      <g>\n        {this.props.series\n          .map((serie, serieIdx) =>\n            serie.data\n              .map((point, idx) => {\n                const pointNotDefined = !point.y && point.y !== 0;\n                const hasPointBefore =\n                  serie.data[idx - 1] && (serie.data[idx - 1].y || serie.data[idx - 1].y === 0);\n                const hasPointAfter =\n                  serie.data[idx + 1] && (serie.data[idx + 1].y || serie.data[idx + 1].y === 0);\n                if (pointNotDefined || (hasPointBefore || hasPointAfter)) {\n                  return undefined;\n                }\n                return (\n                  <circle\n                    className={classNames('line-chart-dot', 'line-chart-dot-' + serieIdx)}\n                    cx={this.state.xScale(point.x)}\n                    cy={this.state.yScale(point.y)}\n                    key={serie.name + idx}\n                    r=\"2\"\n                  />\n                );\n              })\n              .filter(isDefined)\n          )\n          .filter(dots => dots.length > 0)}\n      </g>\n    );\n  };\n\n  renderAreas = () => {\n    const areaGenerator = area<Point>()\n      .defined(d => Boolean(d.y || d.y === 0))\n      .x(d => this.state.xScale(d.x))\n      .y1(d => this.state.yScale(d.y))\n      .y0(this.state.yScale(0));\n    if (this.props.basisCurve) {\n      areaGenerator.curve(curveBasis);\n    }\n    return (\n      <g>\n        {this.props.series.map((serie, idx) => (\n          <path\n            className={classNames('line-chart-area', 'line-chart-area-' + idx)}\n            d={areaGenerator(serie.data) || undefined}\n            key={serie.name}\n          />\n        ))}\n      </g>\n    );\n  };\n\n  renderSelectedDate = () => {\n    const { selectedDateIdx, selectedDateXPos, yScale } = this.state;\n    const firstSerie = this.props.series[0];\n    if (selectedDateIdx == null || selectedDateXPos == null || !firstSerie) {\n      return null;\n    }\n\n    return (\n      <g>\n        <line\n          className=\"line-tooltip\"\n          x1={selectedDateXPos}\n          x2={selectedDateXPos}\n          y1={yScale.range()[0]}\n          y2={yScale.range()[1]}\n        />\n        {this.props.series.map((serie, idx) => {\n          const point = serie.data[selectedDateIdx];\n          if (!point || (!point.y && point.y !== 0)) {\n            return null;\n          }\n          return (\n            <circle\n              className={classNames('line-chart-dot', 'line-chart-dot-' + idx)}\n              cx={selectedDateXPos}\n              cy={yScale(point.y)}\n              key={serie.name}\n              r=\"4\"\n            />\n          );\n        })}\n      </g>\n    );\n  };\n\n  renderClipPath = () => {\n    return (\n      <defs>\n        <clipPath id=\"chart-clip\">\n          <rect\n            height={this.state.yScale.range()[0] + 10}\n            transform=\"translate(0,-5)\"\n            width={this.state.xScale.range()[1]}\n          />\n        </clipPath>\n      </defs>\n    );\n  };\n\n  renderMouseEventsOverlay = (zoomEnabled: boolean) => {\n    const mouseEvents: Partial<React.SVGProps<SVGRectElement>> = {};\n    if (zoomEnabled) {\n      mouseEvents.onWheel = this.handleWheel;\n    }\n    if (this.props.updateTooltip) {\n      mouseEvents.onMouseEnter = this.handleMouseEnter;\n      mouseEvents.onMouseMove = this.handleMouseMove;\n      mouseEvents.onMouseOut = this.handleMouseOut;\n    }\n    if (this.props.updateSelectedDate) {\n      mouseEvents.onClick = this.handleClick;\n    }\n    return (\n      <rect\n        className=\"chart-mouse-events-overlay\"\n        height={this.state.yScale.range()[0]}\n        width={this.state.xScale.range()[1]}\n        {...mouseEvents}\n      />\n    );\n  };\n\n  render() {\n    if (!this.props.width || !this.props.height) {\n      return <div />;\n    }\n    const zoomEnabled = !this.props.disableZoom && this.props.updateZoom != null;\n    const isZoomed = Boolean(this.props.startDate || this.props.endDate);\n    return (\n      <svg\n        className={classNames('line-chart', { 'chart-zoomed': isZoomed })}\n        height={this.props.height}\n        width={this.props.width}>\n        {zoomEnabled && this.renderClipPath()}\n        <g transform={`translate(${this.props.padding[3]}, ${this.props.padding[0]})`}>\n          {this.props.leakPeriodDate != null && this.renderLeak()}\n          {!this.props.hideGrid && this.renderHorizontalGrid()}\n          {!this.props.hideXAxis && this.renderXAxisTicks()}\n          {this.props.showAreas && this.renderAreas()}\n          {this.renderLines()}\n          {this.renderDots()}\n          {this.renderSelectedDate()}\n          {this.renderMouseEventsOverlay(zoomEnabled)}\n        </g>\n      </svg>\n    );\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./AdvancedTimeline.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.line-tooltip {\\n  fill: none;\\n  stroke: #777;\\n  stroke-width: 1px;\\n  shape-rendering: crispEdges;\\n}\\n\\n.chart-mouse-events-overlay {\\n  fill: none;\\n  stroke: none;\\n  pointer-events: all;\\n}\\n\\n.chart-zoomed .line-chart-area {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.chart-zoomed .line-chart-path {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.chart-zoomed .leak-chart-rect {\\n  -webkit-clip-path: url(#chart-clip);\\n          clip-path: url(#chart-clip);\\n}\\n\\n.line-chart-dot {\\n  fill: #4b9fd5;\\n}\\n\\n.line-chart-dot.line-chart-dot-1 {\\n  fill: #236a97;\\n}\\n\\n.line-chart-dot.line-chart-dot-2 {\\n  fill: #24c6e0;\\n}\\n\\n.line-chart-event {\\n  fill: #fff;\\n  stroke: #4b9fd5;\\n  stroke-width: 2px;\\n}\\n\\n.line-chart-event.VERSION {\\n  stroke: #4b9fd5;\\n}\\n\\n.line-chart-event.QUALITY_GATE {\\n  stroke: #00aa00;\\n}\\n\\n.line-chart-event.QUALITY_PROFILE {\\n  stroke: #ed7d20;\\n}\\n\\n.line-chart-event.OTHER {\\n  stroke: #9139d4;\\n}\\n\", \"\"]);\n\n// exports\n","var baseSlice = require('./_baseSlice'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * Creates an array of elements split into groups the length of `size`.\n * If `array` can't be split evenly, the final chunk will be the remaining\n * elements.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to process.\n * @param {number} [size=1] The length of each chunk\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the new array of chunks.\n * @example\n *\n * _.chunk(['a', 'b', 'c', 'd'], 2);\n * // => [['a', 'b'], ['c', 'd']]\n *\n * _.chunk(['a', 'b', 'c', 'd'], 3);\n * // => [['a', 'b', 'c'], ['d']]\n */\nfunction chunk(array, size, guard) {\n  if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n    size = 1;\n  } else {\n    size = nativeMax(toInteger(size), 0);\n  }\n  var length = array == null ? 0 : array.length;\n  if (!length || size < 1) {\n    return [];\n  }\n  var index = 0,\n      resIndex = 0,\n      result = Array(nativeCeil(length / size));\n\n  while (index < length) {\n    result[resIndex++] = baseSlice(array, index, (index += size));\n  }\n  return result;\n}\n\nmodule.exports = chunk;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\ninterface TimeMachineResponse {\n  measures: {\n    metric: string;\n    history: Array<{ date: string; value?: string }>;\n  }[];\n  paging: T.Paging;\n}\n\nexport function getTimeMachineData(\n  data: {\n    component: string;\n    from?: string;\n    metrics: string;\n    p?: number;\n    ps?: number;\n    to?: string;\n  } & T.BranchParameters\n): Promise<TimeMachineResponse> {\n  return getJSON('/api/measures/search_history', data).catch(throwGlobalError);\n}\n\nexport function getAllTimeMachineData(\n  data: {\n    component: string;\n    metrics: string;\n    from?: string;\n    p?: number;\n    to?: string;\n  } & T.BranchParameters,\n  prev?: TimeMachineResponse\n): Promise<TimeMachineResponse> {\n  return getTimeMachineData({ ...data, ps: 1000 }).then(r => {\n    const result = prev\n      ? {\n          measures: prev.measures.map((measure, idx) => ({\n            ...measure,\n            history: measure.history.concat(r.measures[idx].history)\n          })),\n          paging: r.paging\n        }\n      : r;\n\n    if (result.paging.pageIndex * result.paging.pageSize >= result.paging.total) {\n      return result;\n    }\n    return getAllTimeMachineData({ ...data, p: result.paging.pageIndex + 1 }, result);\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { max } from 'd3-array';\nimport { scaleLinear, scaleBand, ScaleLinear, ScaleBand } from 'd3-scale';\nimport Tooltip from '../controls/Tooltip';\nimport './BarChart.css';\nimport './Histogram.css';\n\ninterface Props {\n  alignTicks?: boolean;\n  bars: number[];\n  height: number;\n  padding?: [number, number, number, number];\n  yTicks?: string[];\n  yTooltips?: string[];\n  yValues?: string[];\n  width: number;\n}\n\nconst BAR_HEIGHT = 10;\nconst DEFAULT_PADDING = [10, 10, 10, 10];\n\ntype XScale = ScaleLinear<number, number>;\ntype YScale = ScaleBand<number>;\n\nexport default class Histogram extends React.PureComponent<Props> {\n  renderBar(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING } = this.props;\n\n    const width = Math.round(xScale(d)) + /* minimum bar width */ 1;\n    const x = xScale.range()[0] + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2);\n\n    return <rect className=\"bar-chart-bar\" height={BAR_HEIGHT} width={width} x={x} y={y} />;\n  }\n\n  renderValue(d: number, index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, padding = DEFAULT_PADDING, yValues } = this.props;\n\n    const value = yValues && yValues[index];\n\n    if (!value) {\n      return null;\n    }\n\n    const x = xScale(d) + (alignTicks ? padding[3] : 0);\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n\n    return (\n      <Tooltip overlay={this.props.yTooltips && this.props.yTooltips[index]}>\n        <text className=\"bar-chart-tick histogram-value\" dx=\"1em\" dy=\"0.3em\" x={x} y={y}>\n          {value}\n        </text>\n      </Tooltip>\n    );\n  }\n\n  renderTick(index: number, xScale: XScale, yScale: YScale) {\n    const { alignTicks, yTicks } = this.props;\n\n    const tick = yTicks && yTicks[index];\n\n    if (!tick) {\n      return null;\n    }\n\n    const x = xScale.range()[0];\n    const y = Math.round(yScale(index)! + yScale.bandwidth() / 2 + BAR_HEIGHT / 2);\n    const historyTickClass = alignTicks ? 'histogram-tick-start' : 'histogram-tick';\n\n    return (\n      <text\n        className={'bar-chart-tick ' + historyTickClass}\n        dx={alignTicks ? 0 : '-1em'}\n        dy=\"0.3em\"\n        x={x}\n        y={y}>\n        {tick}\n      </text>\n    );\n  }\n\n  renderBars(xScale: XScale, yScale: YScale) {\n    return (\n      <g>\n        {this.props.bars.map((d, index) => {\n          return (\n            <g key={index}>\n              {this.renderBar(d, index, xScale, yScale)}\n              {this.renderValue(d, index, xScale, yScale)}\n              {this.renderTick(index, xScale, yScale)}\n            </g>\n          );\n        })}\n      </g>\n    );\n  }\n\n  render() {\n    const { bars, width, height, padding = DEFAULT_PADDING } = this.props;\n\n    const availableWidth = width - padding[1] - padding[3];\n    const xScale: XScale = scaleLinear()\n      .domain([0, max(bars)!])\n      .range([0, availableWidth]);\n\n    const availableHeight = height - padding[0] - padding[2];\n    const yScale: YScale = scaleBand<number>()\n      .domain(bars.map((_, index) => index))\n      .rangeRound([0, availableHeight]);\n\n    return (\n      <svg className=\"bar-chart\" height={this.props.height} width={this.props.width}>\n        <g transform={`translate(${this.props.alignTicks ? 4 : padding[3]}, ${padding[0]})`}>\n          {this.renderBars(xScale, yScale)}\n        </g>\n      </svg>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { sortBy } from 'lodash';\nimport Histogram from './Histogram';\nimport { formatMeasure } from '../../helpers/measures';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  alignTicks?: boolean;\n  distribution: string;\n  languages: T.Languages;\n  width: number;\n}\n\nexport default function LanguageDistribution(props: Props) {\n  let distribution = props.distribution.split(';').map(point => {\n    const tokens = point.split('=');\n    return { language: tokens[0], lines: parseInt(tokens[1], 10) };\n  });\n\n  distribution = sortBy(distribution, d => -d.lines);\n\n  const data = distribution.map(d => d.lines);\n  const yTicks = distribution.map(d => getLanguageName(d.language)).map(cutLanguageName);\n  const yTooltips = distribution.map(d => (d.lines > 1000 ? formatMeasure(d.lines, 'INT') : ''));\n  const yValues = distribution.map(d => formatMeasure(d.lines, 'SHORT_INT'));\n\n  return (\n    <Histogram\n      alignTicks={props.alignTicks}\n      bars={data}\n      height={distribution.length * 25}\n      padding={[0, 60, 0, 80]}\n      width={props.width}\n      yTicks={yTicks}\n      yTooltips={yTooltips}\n      yValues={yValues}\n    />\n  );\n\n  function getLanguageName(langKey: string) {\n    if (langKey === '<null>') {\n      return translate('unknown');\n    }\n    const lang = props.languages[langKey];\n    return lang ? lang.name : langKey;\n  }\n}\n\nfunction cutLanguageName(name: string) {\n  return name.length > 10 ? `${name.substr(0, 7)}...` : name;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { connect } from 'react-redux';\nimport LanguageDistribution from './LanguageDistribution';\nimport { getLanguages, Store } from '../../store/rootReducer';\n\nconst mapStateToProps = (state: Store) => ({\n  languages: getLanguages(state)\n});\n\nexport default connect(mapStateToProps)(LanguageDistribution);\n"],"sourceRoot":""}