{"version":3,"sources":["webpack:///./src/main/js/apps/account/profile/UserExternalIdentity.tsx","webpack:///./src/main/js/apps/account/profile/UserGroups.tsx","webpack:///./src/main/js/apps/account/profile/UserScmAccounts.tsx","webpack:///./src/main/js/apps/account/profile/Profile.tsx"],"names":["UserExternalIdentity_UserExternalIdentity","index_js_exposed","[object Object]","this","mounted","state","loading","fetchIdentityProviders","prevProps","user","props","setState","Object","users","then","r","identityProviders","providers","identityProvider","find","provider","key","externalProvider","catch","_this$state","className","style","backgroundColor","color","colors","theme","alt","name","height","src","urls","iconPath","width","externalIdentity","UserGroups","groups","l10n","id","map","group","title","UserScmAccounts","scmAccounts","login","email","scmAccount","__webpack_exports__","es","customOrganizations","rootReducer","local"],"mappings":"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","file":"js/363.m.5b9c92a6.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getIdentityProviders } from '../../../api/users';\nimport * as theme from '../../../app/theme';\nimport { getTextColor } from '../../../helpers/colors';\nimport { getBaseUrl } from '../../../helpers/urls';\n\ninterface Props {\n  user: T.LoggedInUser;\n}\n\ninterface State {\n  identityProvider?: T.IdentityProvider;\n  loading: boolean;\n}\n\nexport default class UserExternalIdentity extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    loading: true\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchIdentityProviders();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.user !== this.props.user) {\n      this.fetchIdentityProviders();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchIdentityProviders() {\n    this.setState({ loading: true });\n    getIdentityProviders()\n      .then(r => r.identityProviders)\n      .then(providers => {\n        if (this.mounted) {\n          const identityProvider = providers.find(\n            provider => provider.key === this.props.user.externalProvider\n          );\n          this.setState({ loading: false, identityProvider });\n        }\n      })\n      .catch(() => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      });\n  }\n\n  render() {\n    const { user } = this.props;\n    const { loading, identityProvider } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (!identityProvider) {\n      return (\n        <div>\n          {user.externalProvider}\n          {': '}\n          {user.externalIdentity}\n        </div>\n      );\n    }\n\n    return (\n      <div\n        className=\"identity-provider\"\n        style={{\n          backgroundColor: identityProvider.backgroundColor,\n          color: getTextColor(identityProvider.backgroundColor, theme.secondFontColor)\n        }}>\n        <img\n          alt={identityProvider.name}\n          className=\"little-spacer-right\"\n          height=\"14\"\n          src={getBaseUrl() + identityProvider.iconPath}\n          width=\"14\"\n        />{' '}\n        {user.externalIdentity}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  groups: string[];\n}\n\nexport default function UserGroups({ groups }: Props) {\n  return (\n    <div>\n      <h2 className=\"spacer-bottom\">{translate('my_profile.groups')}</h2>\n      <ul id=\"groups\">\n        {groups.map(group => (\n          <li className=\"little-spacer-bottom\" key={group} title={group}>\n            {group}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  scmAccounts: string[];\n  user: T.LoggedInUser;\n}\n\nexport default function UserScmAccounts({ user, scmAccounts }: Props) {\n  return (\n    <div>\n      <h2 className=\"spacer-bottom\">{translate('my_profile.scm_accounts')}</h2>\n      <ul id=\"scm-accounts\">\n        <li className=\"little-spacer-bottom text-ellipsis\" title={user.login}>\n          {user.login}\n        </li>\n\n        {user.email && (\n          <li className=\"little-spacer-bottom text-ellipsis\" title={user.email}>\n            {user.email}\n          </li>\n        )}\n\n        {scmAccounts.map(scmAccount => (\n          <li className=\"little-spacer-bottom\" key={scmAccount} title={scmAccount}>\n            {scmAccount}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { connect } from 'react-redux';\nimport UserExternalIdentity from './UserExternalIdentity';\nimport UserGroups from './UserGroups';\nimport UserScmAccounts from './UserScmAccounts';\nimport { getCurrentUser, areThereCustomOrganizations, Store } from '../../../store/rootReducer';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  customOrganizations?: boolean;\n  user: T.LoggedInUser;\n}\n\nfunction Profile({ customOrganizations, user }: Props) {\n  return (\n    <div className=\"account-body account-container\">\n      <div className=\"boxed-group boxed-group-inner\">\n        <div className=\"spacer-bottom\">\n          {translate('login')}: <strong id=\"login\">{user.login}</strong>\n        </div>\n\n        {!user.local &&\n          user.externalProvider !== 'sonarqube' && (\n            <div className=\"spacer-bottom\" id=\"identity-provider\">\n              <UserExternalIdentity user={user} />\n            </div>\n          )}\n\n        {!!user.email && (\n          <div className=\"spacer-bottom\">\n            {translate('my_profile.email')}: <strong id=\"email\">{user.email}</strong>\n          </div>\n        )}\n\n        {!customOrganizations && (\n          <>\n            <hr className=\"account-separator\" />\n            <UserGroups groups={user.groups} />\n          </>\n        )}\n\n        <hr />\n\n        <UserScmAccounts scmAccounts={user.scmAccounts} user={user} />\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state: Store) => ({\n  customOrganizations: areThereCustomOrganizations(state),\n  user: getCurrentUser(state) as T.LoggedInUser\n});\n\nexport default connect(mapStateToProps)(Profile);\n"],"sourceRoot":""}