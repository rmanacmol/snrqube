{"version":3,"sources":["webpack:///./node_modules/lodash/intersection.js","webpack:///./node_modules/lodash/_baseIntersection.js","webpack:///./node_modules/lodash/_castArrayLikeObject.js","webpack:///./src/main/js/components/SourceViewer/styles.css?c905","webpack:///./src/main/js/components/SourceViewer/styles.css","webpack:///./src/main/js/components/controls/Modal.tsx","webpack:///./node_modules/lodash/toFinite.js","webpack:///./src/main/js/components/controls/Checkbox.tsx","webpack:///./src/main/js/components/intl/DateFormatter.tsx","webpack:///./src/main/js/components/intl/DateTimeFormatter.tsx","webpack:///./node_modules/lodash/map.js","webpack:///./src/main/js/components/intl/DateFromNow.tsx","webpack:///./src/main/js/components/ui/Level.tsx","webpack:///./src/main/js/components/ui/Rating.tsx","webpack:///./node_modules/lodash/_baseInRange.js","webpack:///./src/main/js/helpers/path.ts","webpack:///./src/main/js/components/ui/Level.css?5a2b","webpack:///./src/main/js/components/ui/Level.css","webpack:///./node_modules/lodash/groupBy.js","webpack:///./node_modules/lodash/inRange.js","webpack:///./src/main/js/components/ui/Rating.css?38ca","webpack:///./src/main/js/components/ui/Rating.css","webpack:///./src/main/js/components/measure/Measure.tsx","webpack:///./src/main/js/components/measure/utils.ts","webpack:///./src/main/js/helpers/periods.ts","webpack:///./src/main/js/components/ui/CoverageRating.tsx","webpack:///./src/main/js/components/ui/DuplicationsRating.tsx","webpack:///./src/main/js/components/icons-components/FavoriteIcon.tsx","webpack:///./src/main/js/components/ui/DuplicationsRating.css?4de2","webpack:///./src/main/js/components/ui/DuplicationsRating.css","webpack:///./src/main/js/components/controls/FavoriteBase.tsx","webpack:///./src/main/js/components/controls/Favorite.tsx","webpack:///./src/main/js/api/favorites.ts","webpack:///./src/main/js/components/common/LocationIndex.tsx","webpack:///./src/main/js/components/icons-components/StatusIcon.tsx","webpack:///./src/main/js/components/shared/StatusHelper.tsx","webpack:///./src/main/js/components/icons-components/ListIcon.tsx","webpack:///./src/main/js/components/icons-components/EllipsisIcon.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlayMeasure.tsx","webpack:///./src/main/js/components/SourceViewer/components/MeasuresOverlay.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerHeader.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerContext.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineOptionsPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineNumber.tsx","webpack:///./src/main/js/components/SourceViewer/components/SCMPopup.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineSCM.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineCoverage.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplications.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineDuplicationBlock.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesIndicator.tsx","webpack:///./src/main/js/components/SourceViewer/components/LineIssuesList.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/highlight.ts","webpack:///./src/main/js/components/SourceViewer/components/LineCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/Line.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/issueLocations.tsx","webpack:///./src/main/js/components/SourceViewer/SourceViewerCode.tsx","webpack:///./src/main/js/components/SourceViewer/components/DuplicationPopup.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/loadIssues.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/getCoverageStatus.tsx","webpack:///./src/main/js/components/SourceViewer/helpers/indexing.ts","webpack:///./src/main/js/components/SourceViewer/SourceViewerBase.tsx","webpack:///./node_modules/lodash/times.js","webpack:///./src/main/js/components/common/LocationIndex.css?97f1","webpack:///./src/main/js/components/common/LocationIndex.css","webpack:///./src/main/js/components/issue/Issue.css?0f03","webpack:///./src/main/js/components/issue/Issue.css","webpack:///./src/main/js/components/common/LocationMessage.tsx","webpack:///./src/main/js/components/common/LocationMessage.css?faa2","webpack:///./src/main/js/components/common/LocationMessage.css","webpack:///./src/main/js/components/issue/actions.ts","webpack:///./src/main/js/components/issue/components/IssueChangelogDiff.tsx","webpack:///./src/main/js/components/issue/popups/ChangelogPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueChangelog.tsx","webpack:///./src/main/js/components/issue/components/IssueMessage.tsx","webpack:///./src/main/js/components/common/SelectListItem.tsx","webpack:///./src/main/js/components/common/SelectList.tsx","webpack:///./src/main/js/components/issue/popups/SimilarIssuesPopup.tsx","webpack:///./src/main/js/components/issue/components/SimilarIssuesFilter.tsx","webpack:///./src/main/js/components/issue/components/IssueTitleBar.tsx","webpack:///./src/main/js/components/issue/popups/SetAssigneePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueAssign.tsx","webpack:///./src/main/js/components/issue/popups/CommentPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentAction.tsx","webpack:///./src/main/js/components/issue/popups/SetSeverityPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueSeverity.tsx","webpack:///./src/main/js/components/issue/popups/SetIssueTagsPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTags.tsx","webpack:///./src/main/js/components/issue/popups/SetTransitionPopup.tsx","webpack:///./src/main/js/components/issue/components/IssueTransition.tsx","webpack:///./src/main/js/components/issue/popups/SetTypePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueType.tsx","webpack:///./src/main/js/components/issue/components/IssueActionsBar.tsx","webpack:///./src/main/js/components/issue/popups/CommentDeletePopup.tsx","webpack:///./src/main/js/components/issue/components/IssueCommentLine.tsx","webpack:///./src/main/js/components/issue/IssueView.tsx","webpack:///./src/main/js/components/issue/Issue.tsx"],"names":["arrayMap","__webpack_require__","baseIntersection","baseRest","castArrayLikeObject","intersection","arrays","mapped","length","module","exports","SetCache","arrayIncludes","arrayIncludesWith","baseUnary","cacheHas","nativeMin","Math","min","iteratee","comparator","includes","othLength","othIndex","caches","Array","maxLength","Infinity","result","array","undefined","index","seen","outer","value","computed","cache","push","isArrayLikeObject","content","i","options","hmr","transform","insertInto","locals","d","__webpack_exports__","Modal","react__WEBPACK_IMPORTED_MODULE_0__","react_modal__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_2__","props","Object","assign","className","modal-small","size","modal-medium","modal-large","isOpen","overlayClassName","modal-no-backdrop","noBackdrop","toNumber","INFINITY","MAX_INTEGER","Checkbox","classnames__WEBPACK_IMPORTED_MODULE_1__","_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_2__","[object Object]","this","handleClick","event","preventDefault","currentTarget","blur","disabled","onCheck","checked","id","_this$props","children","loading","right","icon-checkbox-checked","icon-checkbox-single","thirdState","icon-checkbox-disabled","note","href","onClick","Boolean","defaultProps","longFormatterOption","DateFormatter","react_intl__WEBPACK_IMPORTED_MODULE_1__","_helpers_dates__WEBPACK_IMPORTED_MODULE_2__","formatterOption","year","month","day","date","long","DateTimeFormatter","hour","minute","baseIteratee","baseMap","isArray","collection","DateFromNow","Level","_helpers_measures__WEBPACK_IMPORTED_MODULE_2__","formatted","level","level-small","small","level-muted","muted","Rating","rating-small","rating-muted","nativeMax","max","number","start","end","collapsePath","path","limit","tokens","split","head","tail","middle","slice","cut","join","shift","collapsedDirFromPath","fileFromPath","splitPath","limitComponentName","str","substr","baseAssignValue","createAggregator","hasOwnProperty","prototype","groupBy","key","call","baseInRange","toFinite","Measure","_utils__WEBPACK_IMPORTED_MODULE_1__","_ui_Rating__WEBPACK_IMPORTED_MODULE_2__","_ui_Level__WEBPACK_IMPORTED_MODULE_3__","_controls_Tooltip__WEBPACK_IMPORTED_MODULE_4__","_helpers_measures__WEBPACK_IMPORTED_MODULE_5__","decimals","metricKey","metricType","formattedValue","tooltip","Number","rating","overlay","enhanceMeasure","getLeakValue","getRatingTooltip","_helpers_measures__WEBPACK_IMPORTED_MODULE_0__","_helpers_periods__WEBPACK_IMPORTED_MODULE_1__","KNOWN_RATINGS","measure","metrics","metric","leak","periods","period","finalMetricKey","getLeakPeriod","getPeriodLabel","getPeriodDate","_l10n__WEBPACK_IMPORTED_MODULE_0__","_dates__WEBPACK_IMPORTED_MODULE_1__","find","getPeriod","dateFormatter","parameter","modeParam","mode","CoverageRating","_lazyLoad__WEBPACK_IMPORTED_MODULE_1__","_app_theme__WEBPACK_IMPORTED_MODULE_2__","DonutChart","Promise","all","e","then","bind","SIZE_TO_WIDTH_MAPPING","normal","big","huge","SIZE_TO_THICKNESS_MAPPING","data","fill","numberValue","width","thickness","height","DuplicationsRating","duplications-rating-small","duplications-rating-big","duplications-rating-huge","duplications-rating-muted","isNaN","duplications-rating-A","lodash_inRange__WEBPACK_IMPORTED_MODULE_0___default","duplications-rating-B","duplications-rating-C","duplications-rating-D","duplications-rating-E","react__WEBPACK_IMPORTED_MODULE_1__","FavoriteIcon","_Icon__WEBPACK_IMPORTED_MODULE_2__","_app_theme__WEBPACK_IMPORTED_MODULE_3__","favorite","is-filled","style","color","FavoriteBase_FavoriteBase","index_js_exposed","super","mounted","toggleFavorite","state","removeFavorite","addFavorite","nextProps","setState","l10n","qualifier","Tooltip","classnames","Favorite","_a","component","other","__rest","request","LocationIndex","leading","selected","clickAttributes","role","tabIndex","is-leading","statusIcons","open","icons_components_Icon","theme","confirmed","reopened","resolved","closed","StatusIcon","status","toLowerCase","Icon","StatusHelper","resolution","ListIcon","_Icon__WEBPACK_IMPORTED_MODULE_1__","EllipsisIcon","MeasuresOverlayMeasure","data-metric","IssueTypeIcon","query","type","MeasuresOverlay_MeasuresOverlay","measures","showAllMeasures","fetchData","fetchMeasures","fetchIssues","facets","api_metrics","metricKeys","helpers_measures","map","api_measures","sourceViewerFile","branches","branchLike","withMetrics","filter","keyBy_default","api_issues","componentKeys","severitiesFacet","f","property","tagsFacet","typesFacet","values","handleAllMeasuresClick","renderMeasure","renderLines","lines","ncloc","comment_lines","comment_lines_density","cognitive_complexity","complexity","function_complexity","renderBigMeasure","renderIssues","_this$state","violations","sqale_index","sortBy_default","constants","indexOf","val","count","SeverityHelper","severity","TagsIcon","renderCoverage","coverage","uncovered_lines","lines_to_cover","uncovered_conditions","conditions_to_cover","renderDuplications","duplications","duplicated_lines_density","duplicated_blocks","duplicated_lines","renderTests","tests","test_success_density","test_failures","test_errors","skipped_tests","test_execution_time","renderDomain","domain","renderAllMeasures","domains","groupBy_default","domainKeys","keys","odd","_","even","contentLabel","onRequestClose","onClose","QualifierIcon","es","to","urls","project","projectName","subProject","subProjectName","q","buttons","SourceViewerHeader_SourceViewerHeader","measuresOverlay","handleShowMeasuresClick","handleMeasuresOverlayClose","openInWorkspace","openComponent","_this$props$sourceVie","uuid","isUnitTest","rawSourcesLink","querystring_es3","helpers_path","canMarkAsFavorite","fav","Dropdown","rel","target","overlayPlacement","popups","BottomRight","fileUuids","issues","duplicationDensity","SourceViewerContext","file","LineOptionsPopup","line","Consumer","placement","RightTop","stopPropagation","LineNumber_LineNumber","onPopupToggle","name","handleTogglePopup","closePopup","popupOpen","lineNumber","data-line-number","Toggler","SCMPopup","hasAuthor","scmAuthor","scmDate","spacer-top","scmRevision","LineSCM_LineSCM","previousLine","hasPopup","cell","s","p","changed","isSCMChanged","data-author","LineCoverage","coverageStatus","getStatusTooltip","conditions","coveredConditions","LineDuplications_LineDuplications","source-line-duplicated","duplicated","LineDuplicationBlock_LineDuplicationBlock","data-index","renderDuplicationPopup","LineIssuesIndicator_LineIssuesIndicator","hasIssues","source-line-with-issues","mostImportantIssue","helpers_issues","SeverityIcon","LineIssuesList","issuePopup","issue","Issue","displayLocationsCount","displayIssueLocationsCount","displayLocationsLink","displayIssueLocationsLink","onChange","onIssueChange","onIssueClick","onIssuePopupToggle","openPopup","selectedIssue","ISSUE_LOCATION_CLASS","splitByTokens","code","rootClassName","container","document","createElement","innerHTML","forEach","childNodes","node","nodeType","fullClassName","innerTokens","concat","nodeValue","markers","text","part","from","acc","highlightIssueLocations","issueLocations","location","nextTokens","markerAdded","startLine","token","x","s1","e1","s2","e2","intersect","p1","p2","p3","newClassName","uniq_default","LineCode_LineCode","handleSymbolClick","match","onSymbolClick","attachEvents","highlightedLocationMessage","activeMarkerNode","scroll","detachEvents","prevProps","codeNode","symbols","querySelectorAll","addEventListener","message","onLocationSelect","ref","LocationMessage","highlightedSymbols","onIssueSelect","secondaryIssueLocations","showIssues","symbol","symbolRegExp","RegExp","test","highlightSymbol","has-issues","renderedTokens","leadingMarker","displayLocationMarkers","marker","renderMarker","trim","Line_Line","isPopupOpen","linePopup","handleIssuesIndicatorClick","openIssues","onIssuesClose","onIssueUnselect","onIssuesOpen","_this$props2","displayCoverage","duplicationsCount","source-line-highlighted","highlighted","source-line-filtered","isNew","source-line-filtered-dark","source-line-last","last","onLinePopupToggle","displayDuplications","loadDuplications","times_default","displayIssues","displayAllIssues","getLinearLocations","textRange","locations","endLine","startOffset","endOffset","EMPTY_ARRAY","ZERO_LINE","SourceViewerCode_SourceViewerCode","getDuplicationsForLine","duplicationsByLine","getIssuesForLine","issuesByLine","getIssueLocationsForLine","issueLocationsByLine","getSecondaryIssueLocationsForLine","highlightedLocations","reduce","l","renderLine","sources","issuesForLine","symbolsForLine","symbolsByLine","optimizedHighlightedSymbols","intersection_default","optimizedSelectedIssue","optimizedSecondaryIssueLocations","optimizedLocationMessage","some","highlightedLine","hasSourcesAfter","openIssuesByLine","_this$props2$issues","hasFileIssues","hasSourcesBefore","loadingSourcesBefore","loadSourcesBefore","loadingSourcesAfter","loadSourcesAfter","DuplicationPopup_DuplicationPopup","isDifferentComponent","a","b","handleFileClick","_event$currentTarget$","dataset","shouldLink","data-key","data-line","title","_this$props$duplicate","duplicatedFiles","groupedBlocks","blocks","fileRef","inRemovedComponent","Alert","variant","duplication","renderDuplication","block","PAGE_SIZE","loadPageAndNext","toLine","page","pageSize","ps","r","components","users","rules","loadPage","lastIssue","nextIssues","getCoverageStatus","lineHits","locationsByLine","duplicationIndex","_ref","flatten_default","LINES","SourceViewerBase_SourceViewerBase","loadSources","resolve","reject","aroundLine","response","firstSourceLine","loadIssues","prevState","uniqBy_default","computeCoverageStatus","lastSourceLine","fromLine","files","handleLinePopupToggle","samePopup","closeLinePopup","handleIssuePopupToggle","popupName","handleIssueSelect","handleIssueUnselect","handleOpenIssues","handleCloseIssues","handleIssueChange","newIssues","candidate","foundOne","outOfBounds","shouldDisplay","isOk","context","notAccessible","notExist","sourceRemoved","fetchComponent","isLineOutsideOfRange","fetchSources","reloadIssues","firstLine","lastList","finalSources","onLoaded","onFailLoadSources","loadComponent","componentKey","_this$state2","source-duplications-expanded","Provider","renderCode","leakPeriodDate","_fromLine","additionalFields","buildQuery","n","updateIssue","resultPromise","oldIssue","newIssue","optimisticUpdate","IssueChangelogDiff","diff","oldValue","newValue","ChangelogPopup_ChangelogPopup","changelogs","loadChangelog","author","creationDate","item","idx","userName","Avatar","hash","avatar","diffs","IssueChangelog_IssueChangelog","toggleChangelog","togglePopup","handleClose","mouseEnterDelay","DropdownIcon","IssueMessage_IssueMessage","openRule","rule","organization","aria-label","engine","manualVulnerability","SelectListItem_SelectListItem","handleSelect","onSelect","handleHover","onHover","classnames_default","active","onFocus","onMouseOver","renderLink","SelectList_SelectList","attachShortcuts","previousKeyScope","keymaster","previousFilter","currentKeyScope","uniqueId_default","tagName","srcElement","isInput","keyCode","selectNextElement","selectPreviousElement","detachShortcuts","items","renderChild","child","currentItem","hasChildren","SimilarIssuesPopup_SimilarIssuesPopup","onFilter","tags","tag","noPadding","assignee","assigneeAvatar","assigneeName","ruleName","componentQualifier","componentLongName","SimilarIssuesFilter_SimilarIssuesFilter","handleFilter","FilterIcon","IssueTitleBar","hasSimilarIssuesFilter","locationsCount","secondaryLocations","flows","sum","locationsBadge","displayLocations","issueUrl","types","externalRuleEngine","fromHotspot","currentPopup","LinkIcon","LIST_SIZE","popups_SetAssigneePopup","react_redux_es","currentUser","rootReducer","searchMembers","organizations","projectOrganization","handleSearchResult","searchUsers","login","handleSearchChange","defaultUsersArray","system","helpers_users","SearchBox","autoFocus","minLength","placeholder","map_default","user","marginLeft","IssueAssign_IssueAssign","toggleAssign","canAssign","closeOnEscape","onAssign","renderAssignee","CommentPopup_CommentPopup","handleCommentChange","textComment","handleCommentClick","onComment","handleCancelClick","toggleComment","handleKeyboard","metaKey","ctrlKey","comment","markdown","autoTriggered","onKeyDown","rows","MarkdownTips","IssueCommentAction_IssueCommentAction","addComment","issueKey","closeOnClickOutside","commentAutoTriggered","commentPlaceholder","SEVERITY","SetSeverityPopup","IssueSeverity_IssueSeverity","toggleSetSeverity","setSeverity","setIssueProperty","canSetSeverity","SetIssueTagsPopup_LIST_SIZE","SetIssueTagsPopup_SetIssueTagsPopup","searchResult","onSearch","selectedTags","setTags","onUnselect","without_default","availableTags","difference_default","TagsSelector","listSize","IssueTags_IssueTags","toggleSetTags","_issue$tags","canSetTags","TagsList","allowUpdate","SetTransitionPopup","transitions","transition","IssueTransition_IssueTransition","setTransition","toggleSetTransition","hasTransitions","TYPES","SetTypePopup","IssueType_IssueType","toggleSetType","setType","canSetType","IssueActionsBar_IssueActionsBar","popup","apiCall","handleTransition","actions","canComment","isSecurityHotspot","effort","CommentDeletePopup","onDelete","IssueCommentLine_IssueCommentLine","handleEdit","onEdit","toggleEditPopup","handleDelete","toggleDeletePopup","force","closePopups","authorName","authorAvatar","dangerouslySetInnerHTML","__html","htmlText","createdAt","updatable","IssueView_IssueView","handleCheck","_checked","isClickable","toUpperCase","parentElement","editComment","deleteComment","hasCheckbox","issueClass","issue-with-checkbox","data-issue","comments","Issue_Issue","handleAssignement","bindShortcuts","unbindShortcuts"],"mappings":"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","file":"js/276.m.a9f8ab72.chunk.js","sourcesContent":["var arrayMap = require('./_arrayMap'),\n    baseIntersection = require('./_baseIntersection'),\n    baseRest = require('./_baseRest'),\n    castArrayLikeObject = require('./_castArrayLikeObject');\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nmodule.exports = intersection;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseIntersection;\n","var isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nmodule.exports = castArrayLikeObject;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.source-viewer {\\n  width: 100%;\\n  min-height: 200px;\\n  border: 1px solid #cdcdcd;\\n  box-sizing: border-box;\\n  background-color: #fff;\\n  overflow: hidden;\\n}\\n\\n.source-table {\\n  width: 100%;\\n  border: none;\\n  border-collapse: collapse;\\n}\\n\\n.source-line:hover .source-line-number,\\n.source-line:hover .source-line-issues,\\n.source-line:hover .source-line-coverage,\\n.source-line:hover .source-line-duplications,\\n.source-line:hover .source-line-duplications-extra,\\n.source-line:hover .source-line-scm {\\n  border-color: #e9e9e9;\\n  background-color: #e9e9e9;\\n}\\n\\n.source-line:hover .source-line-code {\\n  background-color: #f5f5f5;\\n}\\n\\n.source-line-highlighted .source-line-number,\\n.source-line-highlighted:hover .source-line-number,\\n.source-line-highlighted .source-line-issues,\\n.source-line-highlighted:hover .source-line-issues,\\n.source-line-highlighted .source-line-coverage,\\n.source-line-highlighted:hover .source-line-coverage,\\n.source-line-highlighted .source-line-duplications,\\n.source-line-highlighted:hover .source-line-duplications,\\n.source-line-highlighted .source-line-duplications-extra,\\n.source-line-highlighted:hover .source-line-duplications-extra,\\n.source-line-highlighted .source-line-scm,\\n.source-line-highlighted:hover .source-line-scm {\\n  border-color: #c4dfec !important;\\n  background-color: #c4dfec;\\n}\\n\\n.source-line-highlighted .source-line-code,\\n.source-line-highlighted:hover .source-line-code {\\n  background-color: #d9edf7;\\n}\\n\\n.source-line-filtered .source-line-code {\\n  background-color: #fbf3d5 !important;\\n}\\n\\n.source-line-filtered.source-line-highlighted .source-line-code,\\n.source-line-filtered.source-line-highlighted:hover .source-line-code {\\n  background-color: #cdd9c4 !important;\\n}\\n\\n.source-line-filtered:hover .source-line-code {\\n  background-color: #f1e8cb !important;\\n}\\n\\n.source-line-filtered.source-line-filtered-dark .source-line-code {\\n  background-color: #f9ebb7 !important;\\n}\\n\\n.source-line-filtered.source-line-filtered-dark:hover .source-line-code {\\n  background-color: #eaddb2 !important;\\n}\\n\\n.source-line-last .source-line-code {\\n  padding-bottom: 160px;\\n}\\n\\n.source-viewer pre {\\n  height: 18px;\\n  padding: 0;\\n}\\n\\n.source-viewer pre,\\n.source-line-number,\\n.source-line-scm {\\n  line-height: 18px;\\n  font-family: Consolas, 'Liberation Mono', Menlo, Courier, monospace;\\n  font-size: 12px;\\n}\\n\\n.source-line-code {\\n  position: relative;\\n  padding: 0 10px;\\n}\\n\\n.source-line-code pre {\\n  float: left;\\n}\\n\\n.source-line-code .issue-list {\\n  margin-left: -10px;\\n  margin-right: -10px;\\n}\\n\\n.source-line-code-inner:before,\\n.source-line-code-inner:after {\\n  display: table;\\n  content: '';\\n  line-height: 0;\\n}\\n\\n.source-line-code-inner:after {\\n  clear: both;\\n}\\n\\n.source-line-code-issue {\\n  display: inline-block;\\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAGCAYAAAAPDoR2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1M0M2Rjk4M0M3QUYxMUUzODkzRUREMUM5OTNDMjY4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1M0M2Rjk4NEM3QUYxMUUzODkzRUREMUM5OTNDMjY4QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjUzQzZGOTgxQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUzQzZGOTgyQzdBRjExRTM4OTNFREQxQzk5M0MyNjhBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+bcqJtQAAAEhJREFUeNpi+G+swwDGDAwgbAWlwZiJAQFCgfgwEIfDRaC67ID4NRDnQ2kQnwFZwgFqnANMAQOUYY9sF0wBiCGH5CBkrAgQYACuWi4sSGW8yAAAAABJRU5ErkJggg==);\\n  background-repeat: repeat-x;\\n  background-size: 4px;\\n  background-position: bottom;\\n}\\n\\n.source-meta {\\n  position: relative;\\n  vertical-align: top;\\n  width: 1px;\\n  background-clip: padding-box;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n\\n.source-meta:focus {\\n  outline: none;\\n}\\n\\n.source-meta[role='button'] {\\n  cursor: pointer;\\n}\\n\\n.source-meta + .source-meta {\\n  border-left: 1px solid #f3f3f3;\\n}\\n\\n.source-line-number {\\n  min-width: 18px;\\n  padding: 0 10px;\\n  background-color: #f3f3f3;\\n  color: #777;\\n  text-align: right;\\n}\\n\\n.source-line-number:before {\\n  content: attr(data-line-number);\\n}\\n\\n.source-line-issues {\\n  position: relative;\\n  padding: 0 2px;\\n  background-color: #f3f3f3;\\n}\\n\\n.source-line-issues-counter {\\n  position: absolute;\\n  top: -1px;\\n  right: -1px;\\n  line-height: 8px;\\n  font-size: 8px;\\n}\\n\\n.source-line-coverage {\\n  background-color: #f3f3f3;\\n}\\n\\n.source-line-duplications,\\n.source-line-duplications-extra {\\n  background-color: #f3f3f3;\\n}\\n\\n.source-line-duplications-extra {\\n  display: none;\\n}\\n\\n.source-duplications-expanded .source-line-duplications {\\n  display: none;\\n}\\n\\n.source-duplications-expanded .source-line-duplications-extra {\\n  display: table-cell;\\n}\\n\\n.source-line-scm {\\n  padding: 0 5px;\\n  background-color: #f3f3f3;\\n}\\n\\n.source-line-scm-inner {\\n  max-width: 40px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.source-line-scm-inner:before {\\n  content: attr(data-author);\\n}\\n\\n.source-line-bar {\\n  width: 5px;\\n  height: 18px;\\n}\\n\\n.source-line-bar[role='button'] {\\n  cursor: pointer;\\n}\\n\\n.source-line-bar:focus {\\n  outline: none;\\n}\\n\\n.source-line-covered {\\n  background-color: #b4dd78 !important;\\n}\\n\\n.source-line-uncovered {\\n  background-color: #a4030f !important;\\n}\\n\\n.source-line-partially-covered {\\n  background-color: #a4030f !important;\\n  background-image: repeating-linear-gradient(\\n    45deg,\\n    rgba(255, 255, 255, 0.5) 4px,\\n    transparent 4px,\\n    transparent 8px,\\n    rgba(255, 255, 255, 0.5) 8px,\\n    rgba(255, 255, 255, 0.5) 12px,\\n    transparent 12px,\\n    transparent 16px,\\n    rgba(255, 255, 255, 0.5) 16px,\\n    rgba(255, 255, 255, 0.5) 20px\\n  ) !important;\\n}\\n\\n.source-line-duplicated {\\n  background-color: #797979 !important;\\n}\\n\\n.source-viewer-header {\\n  position: relative;\\n  padding: 2px 10px 4px;\\n  border-bottom: 1px solid #e6e6e6;\\n  background-color: #f3f3f3;\\n}\\n\\n.source-viewer-header:before,\\n.source-viewer-header:after {\\n  display: table;\\n  content: '';\\n  line-height: 0;\\n}\\n\\n.source-viewer-header:after {\\n  clear: both;\\n}\\n\\n.source-viewer-header-bar + .source-viewer-header-bar {\\n  border-top: 1px solid #e6e6e6;\\n}\\n\\n.source-viewer-header-component {\\n  float: left;\\n  padding-top: 4px;\\n}\\n\\n.source-viewer-header-component-project {\\n  font-size: 12px;\\n}\\n\\n.source-viewer-header-component-name {\\n  font-size: 12px;\\n}\\n\\n.source-viewer-header-favorite {\\n  position: relative;\\n  top: -2px;\\n  margin-left: 4px;\\n  border-bottom: none;\\n}\\n\\n.source-viewer-header-measures {\\n  float: right;\\n}\\n\\n.source-viewer-header-measures-scope {\\n  position: relative;\\n  float: left;\\n}\\n\\n.source-viewer-header-measure {\\n  display: inline-block;\\n  vertical-align: middle;\\n  padding: 3px 0;\\n  font-size: 13px;\\n}\\n\\n.source-viewer-header-measure .rating {\\n  font-size: 18px;\\n}\\n\\n.source-viewer-header-measure + .source-viewer-header-measure {\\n  margin-left: 25px;\\n}\\n\\n.source-viewer-header-measure-label {\\n  display: block;\\n  margin-top: 4px;\\n  line-height: 12px;\\n  color: #777;\\n  font-size: 12px;\\n}\\n\\n.source-viewer-header-measure-value {\\n  display: block;\\n  line-height: 18px;\\n  color: #444;\\n  font-size: 16px;\\n}\\n\\n.source-viewer-header-actions {\\n  float: right;\\n  display: block;\\n  margin-left: 25px;\\n  padding: 8px 5px;\\n}\\n\\n.source-viewer-header-actions svg {\\n  margin-top: 2px;\\n}\\n\\n.source-viewer-header-more-actions {\\n  position: absolute;\\n  z-index: 7500;\\n  right: 0;\\n  top: 100%;\\n  padding: 10px;\\n  border: 1px solid #e6e6e6;\\n  border-right: none;\\n  background-color: #fff;\\n  line-height: 1.8;\\n}\\n\\n.source-viewer-code {\\n  overflow-x: auto;\\n}\\n\\n.source-viewer-measures-overlay {\\n  width: 1100px;\\n  left: 50%;\\n  right: auto;\\n  margin-left: -550px;\\n  padding: 20px 10px;\\n  background-color: #f3f3f3;\\n}\\n\\n.source-viewer-measures-overlay .modal-foot {\\n  width: 1100px;\\n  left: 50%;\\n  right: auto;\\n  margin-left: -550px;\\n}\\n\\n.source-viewer-measures-component {\\n  float: none;\\n  margin: 0 10px 30px;\\n}\\n\\n.source-viewer-measures-modal {\\n  background-color: #f3f3f3;\\n}\\n\\n.source-viewer-measures {\\n  margin: 0 -10px;\\n  background-color: #f3f3f3;\\n}\\n\\n.source-viewer-measures:before,\\n.source-viewer-measures:after {\\n  display: table;\\n  content: '';\\n  line-height: 0;\\n}\\n\\n.source-viewer-measures:after {\\n  clear: both;\\n}\\n\\n.source-viewer-measures + .source-viewer-measures {\\n  margin-top: 40px;\\n}\\n\\n.source-viewer-measures-secondary .source-viewer-measures-card {\\n  background-color: rgba(255, 255, 255, 0.6);\\n}\\n\\n.source-viewer-measures-section {\\n  float: left;\\n  width: 25%;\\n  margin: -20px 0;\\n}\\n\\n.source-viewer-measures-section-big {\\n  width: 50%;\\n}\\n\\n.source-viewer-measures-section-full {\\n  width: 100%;\\n}\\n\\n.source-viewer-measures-section + .source-viewer-measures-section-full {\\n  margin-top: 20px;\\n}\\n\\n.source-viewer-measures-card {\\n  margin: 20px 10px;\\n  padding: 10px;\\n  border: 1px solid #e6e6e6;\\n  background-color: #fff;\\n}\\n\\n.source-viewer-measures-card-overflow {\\n  overflow: auto;\\n}\\n\\n.source-viewer-measures-card-fixed-height {\\n  max-height: 36vh;\\n  overflow-y: scroll;\\n}\\n\\n.source-viewer-tests-list {\\n  width: 100%;\\n  font-size: 13px;\\n}\\n\\n.source-viewer-test-status,\\n.source-viewer-test-duration,\\n.source-viewer-test-covered-lines {\\n  width: 1px;\\n}\\n\\n.source-viewer-test-status,\\n.source-viewer-test-duration,\\n.source-viewer-test-covered-lines,\\n.source-viewer-test-covered-name {\\n  vertical-align: middle;\\n  padding: 3px;\\n}\\n\\n.source-viewer-test-name {\\n  padding-left: 10px;\\n  word-break: break-all;\\n}\\n\\n.source-viewer-test-covered-lines {\\n  text-align: right;\\n}\\n\\n.source-viewer-issue-location {\\n  max-width: 200px;\\n  margin-right: 10px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.source-viewer-flow-location + .source-viewer-flow-location {\\n  z-index: 504;\\n}\\n\\n.source-line-issue-locations {\\n  float: right;\\n  margin-right: -10px;\\n}\\n\\n.source-line-issue-locations:empty {\\n  display: none;\\n}\\n\\n.source-viewer-more-code {\\n  padding: 40px 0;\\n  border-bottom: 1px solid #e6e6e6;\\n  background-color: #f3f3f3;\\n  text-align: center;\\n}\\n\\n.source-viewer-more-code .spinner {\\n  top: -1px;\\n}\\n\\n.source-table + .source-viewer-more-code {\\n  border-bottom: none;\\n  border-top: 1px solid #e6e6e6;\\n}\\n\\n.source-viewer-bubble-popup {\\n  font-family: 'Helvetica Neue', 'Segoe UI', Helvetica, Arial, sans-serif;\\n  font-size: 13px;\\n  text-align: left;\\n  -webkit-user-select: text;\\n     -moz-user-select: text;\\n      -ms-user-select: text;\\n          user-select: text;\\n}\\n\\n.issue-location {\\n  display: inline-block;\\n  vertical-align: top;\\n  line-height: 18px;\\n  height: 18px;\\n  box-sizing: border-box;\\n  background-color: #ffeaea;\\n  transition: background-color 0.3s ease;\\n}\\n\\n.issue-location.highlighted {\\n  border-color: #e1e1f2;\\n  background-color: #e1e1f2;\\n}\\n\\n.issue-location.selected {\\n  border-color: #f4b1b0;\\n  background-color: #f4b1b0;\\n}\\n\\n.measures + .measures {\\n  margin-top: 15px;\\n  padding-top: 15px;\\n  border-top: 1px solid #e6e6e6;\\n}\\n\\n.measures-chart {\\n  display: inline-block;\\n  vertical-align: middle;\\n  width: 70px;\\n  margin-right: 20px;\\n  text-align: center;\\n}\\n\\n.measures-chart .rating {\\n  font-size: 32px;\\n}\\n\\n.measure {\\n  line-height: 1.3333333333333;\\n}\\n\\n.measure-name {\\n  display: block;\\n  font-size: 13px;\\n}\\n\\n.measure-value {\\n  color: #236a97;\\n  font-size: 16px;\\n  font-weight: 400;\\n}\\n\\n.measure-big {\\n  display: inline-block;\\n  vertical-align: middle;\\n}\\n\\n.measure-big .measure-name {\\n  margin-top: 2px;\\n  font-size: 15px;\\n  font-weight: 400;\\n}\\n\\n.measure-big .measure-value {\\n  font-size: 22px;\\n}\\n\\n.measure-big .rating {\\n  font-size: 22px;\\n}\\n\\n.measure-big + .measure-big {\\n  margin-left: 20px;\\n}\\n\\n.measure-one-line:before,\\n.measure-one-line:after {\\n  display: table;\\n  content: '';\\n  line-height: 0;\\n}\\n\\n.measure-one-line:after {\\n  clear: both;\\n}\\n\\n.measure-one-line .measure-name {\\n  float: left;\\n}\\n\\n.measure-one-line .measure-value {\\n  float: right;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as ReactModal from 'react-modal';\nimport * as classNames from 'classnames';\n\nReactModal.setAppElement('#content');\n\nexport interface ModalProps {\n  children: React.ReactNode;\n  size?: 'small' | 'medium' | 'large';\n  noBackdrop?: boolean;\n}\n\ntype MandatoryProps = Pick<ReactModal.Props, 'contentLabel'>;\n\ntype Props = Partial<ReactModal.Props> & MandatoryProps & ModalProps;\n\nexport default function Modal(props: Props) {\n  return (\n    <ReactModal\n      className={classNames('modal', {\n        'modal-small': props.size === 'small',\n        'modal-medium': props.size === 'medium',\n        'modal-large': props.size === 'large'\n      })}\n      isOpen={true}\n      overlayClassName={classNames('modal-overlay', { 'modal-no-backdrop': props.noBackdrop })}\n      {...props}\n    />\n  );\n}\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport DeferredSpinner from '../common/DeferredSpinner';\n\ninterface Props {\n  checked: boolean;\n  disabled?: boolean;\n  children?: React.ReactNode;\n  className?: string;\n  id?: string;\n  loading?: boolean;\n  onCheck: (checked: boolean, id?: string) => void;\n  right?: boolean;\n  thirdState?: boolean;\n}\n\nexport default class Checkbox extends React.PureComponent<Props> {\n  static defaultProps = {\n    thirdState: false\n  };\n\n  handleClick = (event: React.SyntheticEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    if (!this.props.disabled) {\n      this.props.onCheck(!this.props.checked, this.props.id);\n    }\n  };\n\n  render() {\n    const { children, disabled, loading, right } = this.props;\n    const className = classNames('icon-checkbox', {\n      'icon-checkbox-checked': this.props.checked,\n      'icon-checkbox-single': this.props.thirdState,\n      'icon-checkbox-disabled': disabled\n    });\n\n    if (children) {\n      return (\n        <a\n          className={classNames('link-checkbox', this.props.className, {\n            note: disabled,\n            disabled\n          })}\n          href=\"#\"\n          id={this.props.id}\n          onClick={this.handleClick}>\n          {right && children}\n          <DeferredSpinner loading={Boolean(loading)}>\n            <i className={className} />\n          </DeferredSpinner>\n          {!right && children}\n        </a>\n      );\n    }\n\n    if (loading) {\n      return <DeferredSpinner />;\n    }\n\n    return (\n      <a\n        className={classNames(className, this.props.className)}\n        href=\"#\"\n        id={this.props.id}\n        onClick={this.handleClick}\n      />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n  long?: boolean;\n}\n\nexport const formatterOption = { year: 'numeric', month: 'short', day: '2-digit' };\n\nexport const longFormatterOption = { year: 'numeric', month: 'long', day: 'numeric' };\n\nexport default function DateFormatter({ children, date, long }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...(long ? longFormatterOption : formatterOption)}>\n      {children}\n    </FormattedDate>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedDate } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport const formatterOption = {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric',\n  hour: 'numeric',\n  minute: 'numeric'\n};\n\nexport default function DateTimeFormatter({ children, date }: Props) {\n  return (\n    <FormattedDate value={parseDate(date)} {...formatterOption}>\n      {children}\n    </FormattedDate>\n  );\n}\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { DateSource, FormattedRelative } from 'react-intl';\nimport { parseDate } from '../../helpers/dates';\n\ninterface Props {\n  children?: (formattedDate: string) => React.ReactNode;\n  date: DateSource;\n}\n\nexport default function DateFromNow({ children, date }: Props) {\n  return <FormattedRelative value={parseDate(date)}>{children}</FormattedRelative>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Level.css';\n\ninterface Props {\n  className?: string;\n  level: string;\n  small?: boolean;\n  muted?: boolean;\n}\n\nexport default function Level(props: Props) {\n  const formatted = formatMeasure(props.level, 'LEVEL');\n  const className = classNames(props.className, 'level', 'level-' + props.level, {\n    'level-small': props.small,\n    'level-muted': props.muted\n  });\n\n  return <span className={className}>{formatted}</span>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { formatMeasure } from '../../helpers/measures';\nimport './Rating.css';\n\ninterface Props {\n  className?: string;\n  muted?: boolean;\n  small?: boolean;\n  value: string | number | undefined;\n}\n\nexport default function Rating({ className, muted = false, small = false, value }: Props) {\n  if (value === undefined) {\n    return <span>{'–'}</span>;\n  }\n  const formatted = formatMeasure(value, 'RATING');\n  return (\n    <span\n      className={classNames(\n        'rating',\n        'rating-' + formatted,\n        { 'rating-small': small, 'rating-muted': muted },\n        className\n      )}>\n      {formatted}\n    </span>\n  );\n}\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.inRange` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to check.\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n */\nfunction baseInRange(number, start, end) {\n  return number >= nativeMin(start, end) && number < nativeMax(start, end);\n}\n\nmodule.exports = baseInRange;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function collapsePath(path: string, limit = 30): string {\n  if (typeof path !== 'string') {\n    return '';\n  }\n\n  const tokens = path.split('/');\n\n  if (tokens.length <= 2) {\n    return path;\n  }\n\n  const head = tokens[0];\n  const tail = tokens[tokens.length - 1];\n  const middle = tokens.slice(1, -1);\n  let cut = false;\n\n  while (middle.join().length > limit && middle.length > 0) {\n    middle.shift();\n    cut = true;\n  }\n\n  const body = [head, ...(cut ? ['...'] : []), ...middle, tail];\n  return body.join('/');\n}\n\n/**\n * Return a collapsed path without a file name\n * @example\n * // returns 'src/.../js/components/navigator/app/models/'\n * collapsedDirFromPath('src/main/js/components/navigator/app/models/state.js')\n */\nexport function collapsedDirFromPath(path: string | null): string | null {\n  const limit = 30;\n  if (typeof path === 'string') {\n    const tokens = path.split('/').slice(0, -1);\n    if (tokens.length > 2) {\n      const head = tokens[0];\n      const tail = tokens[tokens.length - 1];\n      const middle = tokens.slice(1, -1);\n\n      let cut = false;\n      while (middle.join().length > limit && middle.length > 0) {\n        middle.shift();\n        cut = true;\n      }\n      const body = [head, ...(cut ? ['...'] : []), ...middle, tail];\n      return body.join('/') + '/';\n    } else {\n      return tokens.join('/') + '/';\n    }\n  } else {\n    return null;\n  }\n}\n\n/**\n * Return a file name for a given file path\n * * @example\n * // returns 'state.js'\n * collapsedDirFromPath('src/main/js/components/navigator/app/models/state.js')\n */\nexport function fileFromPath(path: string | null): string | null {\n  if (typeof path === 'string') {\n    const tokens = path.split('/');\n    return tokens[tokens.length - 1];\n  } else {\n    return null;\n  }\n}\n\nexport function splitPath(path: string) {\n  const tokens = path.split('/');\n  return {\n    head: tokens.slice(0, -1).join('/'),\n    tail: tokens[tokens.length - 1]\n  };\n}\n\nexport function limitComponentName(str: string, limit = 30): string {\n  if (typeof str === 'string') {\n    return str.length > limit ? str.substr(0, limit) + '...' : str;\n  } else {\n    return '';\n  }\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Level.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.level {\\n  display: inline-block;\\n  width: auto;\\n  min-width: 80px;\\n  padding-left: 9px;\\n  padding-right: 9px;\\n  height: 24px;\\n  line-height: 24px;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n  color: #fff;\\n  letter-spacing: 0.02em;\\n  font-size: 13px;\\n  font-weight: 400;\\n  text-align: center;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35);\\n}\\n\\n.level-small {\\n  width: auto;\\n  min-width: 64px;\\n  padding-left: 9px;\\n  padding-right: 9px;\\n  margin-top: -1px;\\n  margin-bottom: -1px;\\n  height: 20px;\\n  line-height: 20px;\\n  font-size: 12px;\\n}\\n\\n.level-muted {\\n  background-color: #bdbdbd !important;\\n}\\n\\na > .level {\\n  margin-bottom: -1px;\\n  border-bottom: 1px solid;\\n  transition: all 0.2s ease;\\n}\\n\\na > .level:hover {\\n  opacity: 0.8;\\n}\\n\\n.level-OK {\\n  background-color: #00aa00;\\n}\\n\\n.level-WARN {\\n  background-color: #ed7d20;\\n}\\n\\n.level-ERROR {\\n  background-color: #d4333f;\\n}\\n\\n.level-NONE {\\n  background-color: #b4b4b4;\\n}\\n\", \"\"]);\n\n// exports\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","var baseInRange = require('./_baseInRange'),\n    toFinite = require('./toFinite'),\n    toNumber = require('./toNumber');\n\n/**\n * Checks if `n` is between `start` and up to, but not including, `end`. If\n * `end` is not specified, it's set to `start` with `start` then set to `0`.\n * If `start` is greater than `end` the params are swapped to support\n * negative ranges.\n *\n * @static\n * @memberOf _\n * @since 3.3.0\n * @category Number\n * @param {number} number The number to check.\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n * @see _.range, _.rangeRight\n * @example\n *\n * _.inRange(3, 2, 4);\n * // => true\n *\n * _.inRange(4, 8);\n * // => true\n *\n * _.inRange(4, 2);\n * // => false\n *\n * _.inRange(2, 2);\n * // => false\n *\n * _.inRange(1.2, 2);\n * // => true\n *\n * _.inRange(5.2, 4);\n * // => false\n *\n * _.inRange(-3, -2, -6);\n * // => true\n */\nfunction inRange(number, start, end) {\n  start = toFinite(start);\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  } else {\n    end = toFinite(end);\n  }\n  number = toNumber(number);\n  return baseInRange(number, start, end);\n}\n\nmodule.exports = inRange;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Rating.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.rating {\\n  display: inline-block;\\n  width: 24px;\\n  height: 24px;\\n  line-height: 24px;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n  color: #fff;\\n  font-size: 16px;\\n  font-weight: 400;\\n  text-align: center;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35);\\n}\\n\\n.rating-muted {\\n  background-color: #bdbdbd !important;\\n  color: #fff !important;\\n  text-shadow: 0 0 1px rgba(0, 0, 0, 0.35) !important;\\n}\\n\\na > .rating {\\n  margin-bottom: -1px;\\n  border-bottom: 1px solid;\\n  transition: all 0.2s ease;\\n}\\n\\na > .rating:hover {\\n  opacity: 0.8;\\n}\\n\\n.rating-A {\\n  line-height: 23px;\\n  background-color: #00aa00;\\n}\\n\\na > .rating-A {\\n  border-bottom-color: #00aa00;\\n}\\n\\n.rating-B {\\n  background-color: #b0d513;\\n}\\n\\na .rating-B {\\n  border-bottom-color: #b0d513;\\n}\\n\\n.rating-C {\\n  background-color: #eabe06;\\n}\\n\\na .rating-C {\\n  border-bottom-color: #eabe06;\\n}\\n\\n.rating-D {\\n  background-color: #ed7d20;\\n}\\n\\na .rating-D {\\n  border-bottom-color: #ed7d20;\\n}\\n\\n.rating-E {\\n  background-color: #e00;\\n}\\n\\na .rating-E {\\n  border-bottom-color: #e00;\\n}\\n\\n.rating-small {\\n  width: 18px;\\n  height: 18px;\\n  line-height: 18px;\\n  margin-top: -1px;\\n  margin-bottom: -1px;\\n  font-size: 12px;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getRatingTooltip } from './utils';\nimport Rating from '../ui/Rating';\nimport Level from '../ui/Level';\nimport Tooltip from '../controls/Tooltip';\nimport { formatMeasure } from '../../helpers/measures';\n\ninterface Props {\n  className?: string;\n  decimals?: number | null;\n  metricKey: string;\n  metricType: string;\n  small?: boolean;\n  value: string | undefined;\n}\n\nexport default function Measure({\n  className,\n  decimals,\n  metricKey,\n  metricType,\n  small,\n  value\n}: Props) {\n  if (value === undefined) {\n    return <span>{'–'}</span>;\n  }\n\n  if (metricType === 'LEVEL') {\n    return <Level className={className} level={value} small={small} />;\n  }\n\n  if (metricType !== 'RATING') {\n    const formattedValue = formatMeasure(value, metricType, { decimals });\n    return <span className={className}>{formattedValue != null ? formattedValue : '–'}</span>;\n  }\n\n  const tooltip = getRatingTooltip(metricKey, Number(value));\n  const rating = <Rating small={small} value={value} />;\n  if (tooltip) {\n    return (\n      <Tooltip overlay={tooltip}>\n        <span className={className}>{rating}</span>\n      </Tooltip>\n    );\n  }\n  return rating;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getRatingTooltip as nextGetRatingTooltip, isDiffMetric } from '../../helpers/measures';\nimport { getLeakPeriod } from '../../helpers/periods';\n\nconst KNOWN_RATINGS = [\n  'sqale_rating',\n  'maintainability_rating', // Needed to provide the label for \"new_maintainability_rating\"\n  'reliability_rating',\n  'security_rating'\n];\n\nexport function enhanceMeasure(\n  measure: T.Measure,\n  metrics: { [key: string]: T.Metric }\n): T.MeasureEnhanced {\n  return {\n    ...measure,\n    metric: metrics[measure.metric],\n    leak: getLeakValue(measure)\n  };\n}\n\nexport function getLeakValue(measure: T.Measure | undefined): string | undefined {\n  if (!measure || !measure.periods) {\n    return undefined;\n  }\n  const period = getLeakPeriod(measure.periods);\n  return period && period.value;\n}\n\nexport function getRatingTooltip(metricKey: string, value: number): string | undefined {\n  const finalMetricKey = isDiffMetric(metricKey) ? metricKey.substr(4) : metricKey;\n  if (KNOWN_RATINGS.includes(finalMetricKey)) {\n    return nextGetRatingTooltip(finalMetricKey, value);\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { translate, translateWithParameters } from './l10n';\nimport { parseDate } from './dates';\n\nfunction getPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined, index: number) {\n  if (!Array.isArray(periods)) {\n    return undefined;\n  }\n  return periods.find(period => period.index === index);\n}\n\nexport function getLeakPeriod<T extends T.Period | T.PeriodMeasure>(periods: T[] | undefined) {\n  return getPeriod(periods, 1);\n}\n\nexport function getPeriodLabel(\n  period: T.Period | undefined,\n  dateFormatter: (date: string) => string\n) {\n  if (!period) {\n    return undefined;\n  }\n\n  let parameter = period.modeParam || period.parameter;\n  if (period.mode === 'previous_version' && !parameter) {\n    return translate('overview.period.previous_version_only_date');\n  }\n\n  if (period.mode === 'date' && parameter) {\n    parameter = dateFormatter(parameter);\n  } else if (period.mode === 'manual_baseline') {\n    if (!parameter) {\n      parameter = dateFormatter(period.date);\n    } else {\n      return translateWithParameters('overview.period.previous_version', parameter);\n    }\n  }\n\n  return translateWithParameters(`overview.period.${period.mode}`, parameter || '');\n}\n\nexport function getPeriodDate(period?: { date?: string }): Date | undefined {\n  return period && period.date ? parseDate(period.date) : undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { lazyLoad } from '../lazyLoad';\nimport * as theme from '../../app/theme';\n\nconst DonutChart = lazyLoad(() => import('../charts/DonutChart'));\n\nconst SIZE_TO_WIDTH_MAPPING = { small: 16, normal: 24, big: 40, huge: 60 };\n\nconst SIZE_TO_THICKNESS_MAPPING = { small: 2, normal: 3, big: 3, huge: 4 };\n\ninterface Props {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | string | null | undefined;\n}\n\nexport default function CoverageRating({ muted = false, size = 'normal', value }: Props) {\n  let data = [{ value: 100, fill: '#ccc ' }];\n\n  if (value != null) {\n    const numberValue = Number(value);\n    data = [\n      { value: numberValue, fill: muted ? theme.gray71 : theme.green },\n      { value: 100 - numberValue, fill: muted ? theme.barBackgroundColor : theme.red }\n    ];\n  }\n\n  const width = SIZE_TO_WIDTH_MAPPING[size];\n  const thickness = SIZE_TO_THICKNESS_MAPPING[size];\n\n  return <DonutChart data={data} height={width} thickness={thickness} width={width} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { inRange } from 'lodash';\nimport './DuplicationsRating.css';\n\ninterface Props {\n  muted?: boolean;\n  size?: 'small' | 'normal' | 'big' | 'huge';\n  value: number | null | undefined;\n}\n\nexport default function DuplicationsRating({ muted = false, size = 'normal', value }: Props) {\n  const className = classNames('duplications-rating', {\n    'duplications-rating-small': size === 'small',\n    'duplications-rating-big': size === 'big',\n    'duplications-rating-huge': size === 'huge',\n    'duplications-rating-muted': muted || value == null || isNaN(value),\n    'duplications-rating-A': inRange(value || 0, 0, 3),\n    'duplications-rating-B': inRange(value || 0, 3, 5),\n    'duplications-rating-C': inRange(value || 0, 5, 10),\n    'duplications-rating-D': inRange(value || 0, 10, 20),\n    'duplications-rating-E': (value || 0) >= 20\n  });\n\n  return <div className={className} />;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\nexport interface Props extends IconProps {\n  favorite: boolean;\n}\n\nexport default function FavoriteIcon({ className, favorite, fill = theme.orange, size }: Props) {\n  return (\n    <Icon\n      className={classNames('icon-outline', { 'is-filled': favorite }, className)}\n      size={size}\n      style={{ color: fill }}>\n      <g transform=\"matrix(0.988024,0,0,0.988024,0.0957953,0.717719)\">\n        <path d=\"M15.428,5.777C15.428,5.908 15.35,6.051 15.195,6.205L11.954,9.366L12.722,13.83C12.728,13.872 12.731,13.932 12.731,14.009C12.731,14.134 12.7,14.24 12.637,14.326C12.575,14.412 12.484,14.455 12.365,14.455C12.252,14.455 12.133,14.42 12.008,14.348L7.999,12.241L3.99,14.348C3.859,14.42 3.74,14.455 3.633,14.455C3.508,14.455 3.414,14.412 3.352,14.326C3.289,14.24 3.258,14.134 3.258,14.009C3.258,13.973 3.264,13.914 3.276,13.83L4.044,9.366L0.794,6.205C0.645,6.045 0.57,5.902 0.57,5.777C0.57,5.557 0.737,5.42 1.07,5.366L5.552,4.714L7.561,0.652C7.674,0.408 7.82,0.286 7.999,0.286C8.177,0.286 8.323,0.408 8.436,0.652L10.445,4.714L14.927,5.366C15.261,5.42 15.427,5.557 15.427,5.777L15.428,5.777Z\" />\n      </g>\n    </Icon>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DuplicationsRating.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DuplicationsRating.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./DuplicationsRating.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.duplications-rating {\\n  position: relative;\\n  display: inline-flex;\\n  vertical-align: top;\\n  justify-content: center;\\n  align-items: center;\\n  width: 24px;\\n  height: 24px;\\n  border: 3px solid #ed7d20;\\n  border-radius: 24px;\\n  box-sizing: border-box;\\n}\\n\\n.duplications-rating-small {\\n  width: 16px;\\n  height: 16px;\\n  border-width: 2px;\\n}\\n\\n.duplications-rating-big {\\n  width: 40px;\\n  height: 40px;\\n  border-width: 3px;\\n}\\n\\n.duplications-rating-huge {\\n  width: 60px;\\n  height: 60px;\\n  border-width: 4px;\\n  border-radius: 30px;\\n}\\n\\n.duplications-rating-muted {\\n  border-color: #bdbdbd !important;\\n}\\n\\n.duplications-rating-muted:after {\\n  background-color: #bdbdbd !important;\\n}\\n\\n.duplications-rating:after {\\n  border-radius: 24px;\\n  content: '';\\n}\\n\\n.duplications-rating-A {\\n  border-color: #00aa00;\\n}\\n\\n.duplications-rating-A:after {\\n  display: none;\\n}\\n\\n.duplications-rating-B {\\n  border-color: #b0d513;\\n}\\n\\n.duplications-rating-B:after {\\n  width: 6px;\\n  height: 6px;\\n  background-color: #b0d513;\\n}\\n\\n.duplications-rating-small.duplications-rating-B:after {\\n  width: 2px;\\n  height: 2px;\\n}\\n\\n.duplications-rating-big.duplications-rating-B:after {\\n  width: 12px;\\n  height: 12px;\\n}\\n\\n.duplications-rating-huge.duplications-rating-B:after {\\n  width: 18px;\\n  height: 18px;\\n}\\n\\n.duplications-rating-C {\\n  border-color: #eabe06;\\n}\\n\\n.duplications-rating-C:after {\\n  width: 8px;\\n  height: 8px;\\n  background-color: #eabe06;\\n}\\n\\n.duplications-rating-small.duplications-rating-C:after {\\n  width: 6px;\\n  height: 6px;\\n}\\n\\n.duplications-rating-big.duplications-rating-C:after {\\n  width: 16px;\\n  height: 16px;\\n}\\n\\n.duplications-rating-huge.duplications-rating-C:after {\\n  width: 24px;\\n  height: 24px;\\n}\\n\\n.duplications-rating-D {\\n  border-color: #ed7d20;\\n}\\n\\n.duplications-rating-D:after {\\n  width: 12px;\\n  height: 12px;\\n  background-color: #ed7d20;\\n}\\n\\n.duplications-rating-small.duplications-rating-D:after {\\n  width: 8px;\\n  height: 8px;\\n}\\n\\n.duplications-rating-big.duplications-rating-D:after {\\n  width: 24px;\\n  height: 24px;\\n}\\n\\n.duplications-rating-huge.duplications-rating-D:after {\\n  width: 36px;\\n  height: 36px;\\n}\\n\\n.duplications-rating-E {\\n  border-color: #d4333f;\\n}\\n\\n.duplications-rating-E:after {\\n  width: 14px;\\n  height: 14px;\\n  background-color: #d4333f;\\n}\\n\\n.duplications-rating-small.duplications-rating-E:after {\\n  width: 10px;\\n  height: 10px;\\n}\\n\\n.duplications-rating-big.duplications-rating-E:after {\\n  width: 28px;\\n  height: 28px;\\n}\\n\\n.duplications-rating-huge.duplications-rating-E:after {\\n  width: 42px;\\n  height: 42px;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from './Tooltip';\nimport FavoriteIcon from '../icons-components/FavoriteIcon';\nimport { translate } from '../../helpers/l10n';\n\nexport interface Props {\n  addFavorite: () => Promise<void>;\n  className?: string;\n  favorite: boolean;\n  qualifier: string;\n  removeFavorite: () => Promise<void>;\n}\n\ninterface State {\n  favorite: boolean;\n}\n\nexport default class FavoriteBase extends React.PureComponent<Props, State> {\n  mounted = false;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = { favorite: this.props.favorite };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.favorite !== this.props.favorite || nextProps.favorite !== this.state.favorite) {\n      this.setState({ favorite: nextProps.favorite });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  toggleFavorite = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    if (this.state.favorite) {\n      this.removeFavorite();\n    } else {\n      this.addFavorite();\n    }\n  };\n\n  addFavorite() {\n    this.props.addFavorite().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ favorite: true });\n        }\n      },\n      () => {}\n    );\n  }\n\n  removeFavorite() {\n    this.props.removeFavorite().then(\n      () => {\n        if (this.mounted) {\n          this.setState({ favorite: false });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const tooltip = this.state.favorite\n      ? translate('favorite.current', this.props.qualifier)\n      : translate('favorite.check', this.props.qualifier);\n    return (\n      <Tooltip overlay={tooltip}>\n        <a\n          className={classNames('display-inline-block', 'link-no-underline', this.props.className)}\n          href=\"#\"\n          onClick={this.toggleFavorite}>\n          <FavoriteIcon favorite={this.state.favorite} />\n        </a>\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport FavoriteBase from './FavoriteBase';\nimport { addFavorite, removeFavorite } from '../../api/favorites';\n\ninterface Props {\n  className?: string;\n  component: string;\n  favorite: boolean;\n  qualifier: string;\n}\n\nexport default function Favorite({ component, ...other }: Props) {\n  return (\n    <FavoriteBase\n      {...other}\n      addFavorite={() => addFavorite(component)}\n      removeFavorite={() => removeFavorite(component)}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { post, getJSON } from '../helpers/request';\n\nexport function getFavorites(): Promise<any> {\n  return getJSON('/api/favorites/search');\n}\n\nexport function addFavorite(component: string): Promise<void> {\n  return post('/api/favorites/add', { component });\n}\n\nexport function removeFavorite(component: string): Promise<void> {\n  return post('/api/favorites/remove', { component });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport './LocationIndex.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  leading?: boolean;\n  onClick?: () => void;\n  selected?: boolean;\n  [x: string]: any;\n}\n\nexport default function LocationIndex(props: Props) {\n  const { children, leading, onClick, selected, ...other } = props;\n  const clickAttributes = onClick ? { onClick, role: 'button', tabIndex: 0 } : {};\n  // put {...others} because Tooltip sets some event handlers\n  return (\n    <div\n      className={classNames('location-index', {\n        'is-leading': leading,\n        selected\n      })}\n      {...clickAttributes}\n      {...other}>\n      {children}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\nimport * as theme from '../../app/theme';\n\ninterface Props {\n  className?: string;\n  status: string;\n}\n\nconst statusIcons: { [x: string]: (props: IconProps) => React.ReactElement<any> } = {\n  open: OpenStatusIcon,\n  confirmed: ConfirmedStatusIcon,\n  reopened: ReopenedStatusIcon,\n  resolved: ResolvedStatusIcon,\n  closed: ClosedStatusIcon\n};\n\nexport default function StatusIcon(props: Props) {\n  const status = props.status.toLowerCase();\n  const Icon = statusIcons[status];\n  return Icon ? <Icon className={props.className} /> : null;\n}\n\nfunction OpenStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ConfirmedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M10 8c0 .552-.195 1.023-.586 1.414-.39.39-.862.586-1.414.586a1.926 1.926 0 0 1-1.414-.586A1.928 1.928 0 0 1 6 8c0-.552.195-1.023.586-1.414C6.976 6.196 7.448 6 8 6c.552 0 1.023.195 1.414.586.39.39.586.862.586 1.414zM8 3.75c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57.77 0 1.482-.19 2.133-.57a4.242 4.242 0 0 0 1.547-1.547c.38-.65.57-1.362.57-2.133 0-.77-.19-1.482-.57-2.133a4.25 4.25 0 0 0-1.547-1.547A4.153 4.153 0 0 0 8 3.75zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ReopenedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M8 12.25v-8.5c-.77 0-1.482.19-2.133.57A4.25 4.25 0 0 0 4.32 5.867c-.38.65-.57 1.362-.57 2.133 0 .77.19 1.482.57 2.133.38.65.896 1.167 1.547 1.547.65.38 1.362.57 2.133.57zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.blue }}\n      />\n    </Icon>\n  );\n}\n\nfunction ResolvedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M12.03 6.734a.49.49 0 0 0-.14-.36l-.71-.702a.48.48 0 0 0-.352-.15.474.474 0 0 0-.35.15l-3.19 3.18-1.765-1.766a.479.479 0 0 0-.35-.15.479.479 0 0 0-.353.15l-.71.703a.482.482 0 0 0-.14.358c0 .14.046.258.14.352l2.828 2.828c.098.1.216.15.35.15.142 0 .26-.05.36-.15l4.243-4.242a.475.475 0 0 0 .14-.352l-.001.001zM14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.baseFontColor }}\n      />\n    </Icon>\n  );\n}\n\nfunction ClosedStatusIcon({ className, size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M14 8c0 1.09-.268 2.092-.805 3.012a5.96 5.96 0 0 1-2.183 2.183A5.863 5.863 0 0 1 8 14a5.863 5.863 0 0 1-3.012-.805 5.96 5.96 0 0 1-2.183-2.183A5.863 5.863 0 0 1 2 8c0-1.09.268-2.092.805-3.012a5.96 5.96 0 0 1 2.183-2.183A5.863 5.863 0 0 1 8 2c1.09 0 2.092.268 3.012.805a5.96 5.96 0 0 1 2.183 2.183C13.732 5.908 14 6.91 14 8z\"\n        style={{ fill: theme.baseFontColor }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport StatusIcon from '../icons-components/StatusIcon';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  className?: string;\n  resolution: string | undefined;\n  status: string;\n}\n\nexport default function StatusHelper(props: Props) {\n  const resolution = props.resolution && ` (${translate('issue.resolution', props.resolution)})`;\n  return (\n    <span className={props.className}>\n      <StatusIcon className=\"little-spacer-right\" status={props.status} />\n      {translate('issue.status', props.status)}\n      {resolution}\n    </span>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function ListIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M15.045 11.526v1.007q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 8.506v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 5.487v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354zM15.045 2.468v1.006q0 0.204-0.149 0.354t-0.354 0.149h-13.084q-0.204 0-0.354-0.149t-0.149-0.354v-1.006q0-0.204 0.149-0.354t0.354-0.149h13.084q0.204 0 0.354 0.149t0.149 0.354z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Icon, { IconProps } from './Icon';\n\nexport default function EllipsisIcon({ className, fill = 'currentColor', size }: IconProps) {\n  return (\n    <Icon className={className} size={size}>\n      <path\n        d=\"M5.273 7.182v1.636a.818.818 0 0 1-.818.818H2.818A.818.818 0 0 1 2 8.818V7.182c0-.452.366-.818.818-.818h1.637c.451 0 .818.366.818.818zm4.363 0v1.636a.818.818 0 0 1-.818.818H7.182a.818.818 0 0 1-.818-.818V7.182c0-.452.366-.818.818-.818h1.636c.452 0 .818.366.818.818zm4.364 0v1.636a.818.818 0 0 1-.818.818h-1.637a.818.818 0 0 1-.818-.818V7.182c0-.452.367-.818.818-.818h1.637c.452 0 .818.366.818.818z\"\n        style={{ fill }}\n      />\n    </Icon>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Measure from '../../measure/Measure';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport { getLocalizedMetricName } from '../../../helpers/l10n';\n\nexport interface MeasureWithMetric {\n  metric: T.Metric;\n  value?: string;\n}\n\ninterface Props {\n  measure: MeasureWithMetric;\n}\n\nexport default function MeasuresOverlayMeasure({ measure }: Props) {\n  return (\n    <div\n      className=\"measure measure-one-line\"\n      data-metric={measure.metric.key}\n      key={measure.metric.key}>\n      <span className=\"measure-name\">\n        {['bugs', 'vulnerabilities', 'code_smells'].includes(measure.metric.key) && (\n          <IssueTypeIcon className=\"little-spacer-right\" query={measure.metric.key} />\n        )}\n        {getLocalizedMetricName(measure.metric)}\n      </span>\n      <span className=\"measure-value\">\n        <Measure\n          metricKey={measure.metric.key}\n          metricType={measure.metric.type}\n          small={true}\n          value={measure.value}\n        />\n      </span>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { keyBy, sortBy, groupBy } from 'lodash';\nimport MeasuresOverlayMeasure from './MeasuresOverlayMeasure';\nimport { ResetButtonLink } from '../../ui/buttons';\nimport { getFacets } from '../../../api/issues';\nimport { getMeasures } from '../../../api/measures';\nimport { getAllMetrics } from '../../../api/metrics';\nimport Modal from '../../controls/Modal';\nimport Measure from '../../measure/Measure';\nimport QualifierIcon from '../../icons-components/QualifierIcon';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport CoverageRating from '../../ui/CoverageRating';\nimport DuplicationsRating from '../../ui/DuplicationsRating';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport { SEVERITIES, ISSUE_TYPES } from '../../../helpers/constants';\nimport { translate, getLocalizedMetricName } from '../../../helpers/l10n';\nimport {\n  formatMeasure,\n  getDisplayMetrics,\n  enhanceMeasuresWithMetrics\n} from '../../../helpers/measures';\nimport { getBranchLikeUrl } from '../../../helpers/urls';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport TagsIcon from '../../icons-components/TagsIcon';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  onClose: () => void;\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface Measures {\n  [metricKey: string]: T.MeasureEnhanced;\n}\n\ninterface State {\n  loading: boolean;\n  measures: Measures;\n  severitiesFacet?: T.FacetValue[];\n  showAllMeasures: boolean;\n  tagsFacet?: T.FacetValue[];\n  typesFacet?: T.FacetValue<T.IssueType>[];\n}\n\nexport default class MeasuresOverlay extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { loading: true, measures: {}, showAllMeasures: false };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchData();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fetchData = () => {\n    Promise.all([this.fetchMeasures(), this.fetchIssues()]).then(\n      ([measures, facets]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, measures, ...facets });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  };\n\n  fetchMeasures = () => {\n    return getAllMetrics().then(metrics => {\n      const metricKeys = getDisplayMetrics(metrics).map(metric => metric.key);\n\n      // eslint-disable-next-line promise/no-nesting\n      return getMeasures({\n        component: this.props.sourceViewerFile.key,\n        metricKeys: metricKeys.join(),\n        ...getBranchLikeQuery(this.props.branchLike)\n      }).then(measures => {\n        const withMetrics = enhanceMeasuresWithMetrics(measures, metrics).filter(\n          measure => measure.metric\n        );\n        return keyBy(withMetrics, measure => measure.metric.key);\n      });\n    });\n  };\n\n  fetchIssues = () => {\n    return getFacets(\n      {\n        componentKeys: this.props.sourceViewerFile.key,\n        resolved: 'false',\n        ...getBranchLikeQuery(this.props.branchLike)\n      },\n      ['types', 'severities', 'tags']\n    ).then(({ facets }) => {\n      const severitiesFacet = facets.find(f => f.property === 'severities');\n      const tagsFacet = facets.find(f => f.property === 'tags');\n      const typesFacet = facets.find(f => f.property === 'types');\n      return {\n        severitiesFacet: severitiesFacet && severitiesFacet.values,\n        tagsFacet: tagsFacet && tagsFacet.values,\n        typesFacet: typesFacet && (typesFacet.values as T.FacetValue<T.IssueType>[])\n      };\n    });\n  };\n\n  handleAllMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.setState({ showAllMeasures: true });\n  };\n\n  renderMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? <MeasuresOverlayMeasure key={measure.metric.key} measure={measure} /> : null;\n  };\n\n  renderLines = () => {\n    const { measures } = this.state;\n\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.lines)}\n              {this.renderMeasure(measures.ncloc)}\n              {this.renderMeasure(measures.comment_lines)}\n              {this.renderMeasure(measures.comment_lines_density)}\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(measures.cognitive_complexity)}\n              {this.renderMeasure(measures.complexity)}\n              {this.renderMeasure(measures.function_complexity)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderBigMeasure = (measure: T.MeasureEnhanced | undefined) => {\n    return measure ? (\n      <div className=\"measure measure-big\" data-metric={measure.metric.key}>\n        <span className=\"measure-value\">\n          <Measure\n            metricKey={measure.metric.key}\n            metricType={measure.metric.type}\n            value={measure.value}\n          />\n        </span>\n        <span className=\"measure-name\">{getLocalizedMetricName(measure.metric, true)}</span>\n      </div>\n    ) : null;\n  };\n\n  renderIssues = () => {\n    const { measures, severitiesFacet, tagsFacet, typesFacet } = this.state;\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            {this.renderBigMeasure(measures.violations)}\n            {this.renderBigMeasure(measures.sqale_index)}\n          </div>\n          {measures.violations &&\n            !!measures.violations.value && (\n              <>\n                {typesFacet && (\n                  <div className=\"measures\">\n                    <div className=\"measures-list\">\n                      {sortBy(typesFacet, f => ISSUE_TYPES.indexOf(f.val)).map(f => (\n                        <div className=\"measure measure-one-line\" key={f.val}>\n                          <span className=\"measure-name\">\n                            <IssueTypeIcon className=\"little-spacer-right\" query={f.val} />\n                            {translate('issue.type', f.val)}\n                          </span>\n                          <span className=\"measure-value\">\n                            {formatMeasure(f.count, 'SHORT_INT')}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {severitiesFacet && (\n                  <div className=\"measures\">\n                    <div className=\"measures-list\">\n                      {sortBy(severitiesFacet, f => SEVERITIES.indexOf(f.val)).map(f => (\n                        <div className=\"measure measure-one-line\" key={f.val}>\n                          <span className=\"measure-name\">\n                            <SeverityHelper severity={f.val} />\n                          </span>\n                          <span className=\"measure-value\">\n                            {formatMeasure(f.count, 'SHORT_INT')}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {tagsFacet && (\n                  <div className=\"measures\">\n                    <div className=\"measures-list\">\n                      {tagsFacet.map(f => (\n                        <div className=\"measure measure-one-line\" key={f.val}>\n                          <span className=\"measure-name\">\n                            <TagsIcon className=\"little-spacer-right\" />\n                            {f.val}\n                          </span>\n                          <span className=\"measure-value\">\n                            {formatMeasure(f.count, 'SHORT_INT')}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </>\n            )}\n        </div>\n      </div>\n    );\n  };\n\n  renderCoverage = () => {\n    const { coverage } = this.state.measures;\n    if (!coverage) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <CoverageRating size=\"big\" value={coverage.value} />\n            </div>\n            <div className=\"measure measure-big\" data-metric={coverage.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={coverage.metric.key}\n                  metricType={coverage.metric.type}\n                  value={coverage.value}\n                />\n              </span>\n              <span className=\"measure-name\">{getLocalizedMetricName(coverage.metric)}</span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.uncovered_lines)}\n              {this.renderMeasure(this.state.measures.lines_to_cover)}\n              {this.renderMeasure(this.state.measures.uncovered_conditions)}\n              {this.renderMeasure(this.state.measures.conditions_to_cover)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDuplications = () => {\n    const { duplicated_lines_density: duplications } = this.state.measures;\n    if (!duplications) {\n      return null;\n    }\n    return (\n      <div className=\"source-viewer-measures-section\">\n        <div className=\"source-viewer-measures-card\">\n          <div className=\"measures\">\n            <div className=\"measures-chart\">\n              <DuplicationsRating\n                muted={duplications.value === undefined}\n                size=\"big\"\n                value={Number(duplications.value || 0)}\n              />\n            </div>\n            <div className=\"measure measure-big\" data-metric={duplications.metric.key}>\n              <span className=\"measure-value\">\n                <Measure\n                  metricKey={duplications.metric.key}\n                  metricType={duplications.metric.type}\n                  value={duplications.value}\n                />\n              </span>\n              <span className=\"measure-name\">\n                {getLocalizedMetricName(duplications.metric, true)}\n              </span>\n            </div>\n          </div>\n\n          <div className=\"measures\">\n            <div className=\"measures-list\">\n              {this.renderMeasure(this.state.measures.duplicated_blocks)}\n              {this.renderMeasure(this.state.measures.duplicated_lines)}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderTests = () => {\n    const { measures } = this.state;\n    return (\n      <div className=\"source-viewer-measures\">\n        <div className=\"source-viewer-measures-section\">\n          <div className=\"source-viewer-measures-card\">\n            <div className=\"measures\">\n              <div className=\"measures-list\">\n                {this.renderMeasure(measures.tests)}\n                {this.renderMeasure(measures.test_success_density)}\n                {this.renderMeasure(measures.test_failures)}\n                {this.renderMeasure(measures.test_errors)}\n                {this.renderMeasure(measures.skipped_tests)}\n                {this.renderMeasure(measures.test_execution_time)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderDomain = (domain: string, measures: T.MeasureEnhanced[]) => {\n    return (\n      <div className=\"source-viewer-measures-card\" key={domain}>\n        <div className=\"measures\">\n          <div className=\"measures-list\">\n            <div className=\"measure measure-one-line measure-big\">\n              <span className=\"measure-name\">{domain}</span>\n            </div>\n            {sortBy(measures.filter(measure => measure.value !== undefined), measure =>\n              getLocalizedMetricName(measure.metric)\n            ).map(measure => this.renderMeasure(measure))}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAllMeasures = () => {\n    const domains = groupBy(Object.values(this.state.measures), measure => measure.metric.domain);\n    const domainKeys = Object.keys(domains);\n    const odd = domainKeys.filter((_, index) => index % 2 === 1);\n    const even = domainKeys.filter((_, index) => index % 2 === 0);\n    return (\n      <div className=\"source-viewer-measures source-viewer-measures-secondary js-all-measures\">\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {odd.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n        <div className=\"source-viewer-measures-section source-viewer-measures-section-big\">\n          {even.map(domain => this.renderDomain(domain, domains[domain]))}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { branchLike, sourceViewerFile } = this.props;\n    const { loading } = this.state;\n\n    return (\n      <Modal contentLabel=\"\" onRequestClose={this.props.onClose} size={'large'}>\n        <div className=\"modal-container source-viewer-measures-modal\">\n          <div className=\"source-viewer-header-component source-viewer-measures-component\">\n            <div className=\"source-viewer-header-component-project\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n              <Link to={getBranchLikeUrl(sourceViewerFile.project, branchLike)}>\n                {sourceViewerFile.projectName}\n              </Link>\n\n              {sourceViewerFile.subProject && (\n                <>\n                  <QualifierIcon className=\"big-spacer-left little-spacer-right\" qualifier=\"BRC\" />\n                  {sourceViewerFile.subProjectName}\n                </>\n              )}\n            </div>\n\n            <div className=\"source-viewer-header-component-name display-flex-center little-spacer-top\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier={sourceViewerFile.q} />\n              {sourceViewerFile.path}\n            </div>\n          </div>\n\n          {loading ? (\n            <i className=\"spinner\" />\n          ) : (\n            <>\n              {sourceViewerFile.q === 'UTS' ? (\n                this.renderTests()\n              ) : (\n                <div className=\"source-viewer-measures\">\n                  {this.renderLines()}\n                  {this.renderIssues()}\n                  {this.renderCoverage()}\n                  {this.renderDuplications()}\n                </div>\n              )}\n            </>\n          )}\n\n          <div className=\"spacer-top\">\n            {this.state.showAllMeasures ? (\n              this.renderAllMeasures()\n            ) : (\n              <a className=\"js-show-all-measures\" href=\"#\" onClick={this.handleAllMeasuresClick}>\n                {translate('component_viewer.show_all_measures')}\n              </a>\n            )}\n          </div>\n        </div>\n\n        <footer className=\"modal-foot\">\n          <ResetButtonLink onClick={this.props.onClose}>{translate('close')}</ResetButtonLink>\n        </footer>\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { stringify } from 'querystring';\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport MeasuresOverlay from './components/MeasuresOverlay';\nimport QualifierIcon from '../icons-components/QualifierIcon';\nimport Dropdown from '../controls/Dropdown';\nimport Favorite from '../controls/Favorite';\nimport ListIcon from '../icons-components/ListIcon';\nimport { ButtonIcon } from '../ui/buttons';\nimport { PopupPlacement } from '../ui/popups';\nimport { WorkspaceContextShape } from '../workspace/context';\nimport {\n  getPathUrlAsString,\n  getBranchLikeUrl,\n  getComponentIssuesUrl,\n  getBaseUrl,\n  getCodeUrl\n} from '../../helpers/urls';\nimport { collapsedDirFromPath, fileFromPath } from '../../helpers/path';\nimport { translate } from '../../helpers/l10n';\nimport { getBranchLikeQuery, isMainBranch } from '../../helpers/branches';\nimport { formatMeasure } from '../../helpers/measures';\nimport { omitNil } from '../../helpers/request';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  openComponent: WorkspaceContextShape['openComponent'];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\ninterface State {\n  measuresOverlay: boolean;\n}\n\nexport default class SourceViewerHeader extends React.PureComponent<Props, State> {\n  state: State = { measuresOverlay: false };\n\n  handleShowMeasuresClick = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.setState({ measuresOverlay: true });\n  };\n\n  handleMeasuresOverlayClose = () => {\n    this.setState({ measuresOverlay: false });\n  };\n\n  openInWorkspace = (event: React.SyntheticEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    const { key } = this.props.sourceViewerFile;\n    this.props.openComponent({ branchLike: this.props.branchLike, key });\n  };\n\n  render() {\n    const {\n      key,\n      measures,\n      path,\n      project,\n      projectName,\n      q,\n      subProject,\n      subProjectName,\n      uuid\n    } = this.props.sourceViewerFile;\n    const isUnitTest = q === 'UTS';\n    const workspace = false;\n    const rawSourcesLink =\n      getBaseUrl() +\n      '/api/sources/raw?' +\n      stringify(omitNil({ key, ...getBranchLikeQuery(this.props.branchLike) }));\n\n    // TODO favorite\n    return (\n      <div className=\"source-viewer-header\">\n        <div className=\"source-viewer-header-component\">\n          <div className=\"component-name\">\n            <div className=\"component-name-parent\">\n              <a\n                className=\"link-with-icon\"\n                href={getPathUrlAsString(getBranchLikeUrl(project, this.props.branchLike))}>\n                <QualifierIcon qualifier=\"TRK\" /> <span>{projectName}</span>\n              </a>\n            </div>\n\n            {subProject != null && (\n              <div className=\"component-name-parent\">\n                <QualifierIcon qualifier=\"BRC\" /> <span>{subProjectName}</span>\n              </div>\n            )}\n\n            <div className=\"component-name-path\">\n              <QualifierIcon qualifier={q} /> <span>{collapsedDirFromPath(path)}</span>\n              <span className=\"component-name-file\">{fileFromPath(path)}</span>\n              {this.props.sourceViewerFile.canMarkAsFavorite &&\n                (!this.props.branchLike || isMainBranch(this.props.branchLike)) && (\n                  <Favorite\n                    className=\"component-name-favorite\"\n                    component={key}\n                    favorite={this.props.sourceViewerFile.fav || false}\n                    qualifier={this.props.sourceViewerFile.q}\n                  />\n                )}\n            </div>\n          </div>\n        </div>\n\n        <Dropdown\n          className=\"source-viewer-header-actions\"\n          overlay={\n            <ul className=\"menu\">\n              <li>\n                <a className=\"js-measures\" href=\"#\" onClick={this.handleShowMeasuresClick}>\n                  {translate('component_viewer.show_details')}\n                </a>\n              </li>\n              <li>\n                <Link\n                  className=\"js-new-window\"\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  to={getCodeUrl(this.props.sourceViewerFile.project, this.props.branchLike, key)}>\n                  {translate('component_viewer.new_window')}\n                </Link>\n              </li>\n              {!workspace && (\n                <li>\n                  <a className=\"js-workspace\" href=\"#\" onClick={this.openInWorkspace}>\n                    {translate('component_viewer.open_in_workspace')}\n                  </a>\n                </li>\n              )}\n              <li>\n                <a\n                  className=\"js-raw-source\"\n                  href={rawSourcesLink}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\">\n                  {translate('component_viewer.show_raw_source')}\n                </a>\n              </li>\n            </ul>\n          }\n          overlayPlacement={PopupPlacement.BottomRight}>\n          <ButtonIcon className=\"js-actions\">\n            <ListIcon />\n          </ButtonIcon>\n        </Dropdown>\n\n        {this.state.measuresOverlay && (\n          <MeasuresOverlay\n            branchLike={this.props.branchLike}\n            onClose={this.handleMeasuresOverlayClose}\n            sourceViewerFile={this.props.sourceViewerFile}\n          />\n        )}\n\n        <div className=\"source-viewer-header-measures\">\n          {isUnitTest && (\n            <div className=\"source-viewer-header-measure\">\n              <span className=\"source-viewer-header-measure-value\">\n                {formatMeasure(measures.tests, 'SHORT_INT')}\n              </span>\n              <span className=\"source-viewer-header-measure-label\">\n                {translate('metric.tests.name')}\n              </span>\n            </div>\n          )}\n\n          {!isUnitTest && (\n            <div className=\"source-viewer-header-measure\">\n              <span className=\"source-viewer-header-measure-value\">\n                {formatMeasure(measures.lines, 'SHORT_INT')}\n              </span>\n              <span className=\"source-viewer-header-measure-label\">\n                {translate('metric.lines.name')}\n              </span>\n            </div>\n          )}\n\n          <div className=\"source-viewer-header-measure\">\n            <span className=\"source-viewer-header-measure-value\">\n              <Link\n                to={getComponentIssuesUrl(project, {\n                  resolved: 'false',\n                  fileUuids: uuid,\n                  ...getBranchLikeQuery(this.props.branchLike)\n                })}>\n                {measures.issues != null ? formatMeasure(measures.issues, 'SHORT_INT') : 0}\n              </Link>\n            </span>\n            <span className=\"source-viewer-header-measure-label\">\n              {translate('metric.violations.name')}\n            </span>\n          </div>\n\n          {measures.coverage != null && (\n            <div className=\"source-viewer-header-measure\">\n              <span className=\"source-viewer-header-measure-value\">\n                {formatMeasure(measures.coverage, 'PERCENT')}\n              </span>\n              <span className=\"source-viewer-header-measure-label\">\n                {translate('metric.coverage.name')}\n              </span>\n            </div>\n          )}\n\n          {measures.duplicationDensity != null && (\n            <div className=\"source-viewer-header-measure\">\n              <span className=\"source-viewer-header-measure-value\">\n                {formatMeasure(measures.duplicationDensity, 'PERCENT')}\n              </span>\n              <span className=\"source-viewer-header-measure-label\">\n                {translate('duplications')}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\ninterface SourceViewerContextShape {\n  branchLike?: T.BranchLike;\n  file: T.SourceViewerFile;\n}\n\nexport const SourceViewerContext = React.createContext({\n  branchLike: {},\n  file: {}\n}) as React.Context<SourceViewerContextShape>;\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\nimport { translate } from '../../../helpers/l10n';\nimport { getCodeUrl } from '../../../helpers/urls';\nimport { SourceViewerContext } from '../SourceViewerContext';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineOptionsPopup({ line }: Props) {\n  return (\n    <SourceViewerContext.Consumer>\n      {({ branchLike, file }) => (\n        <DropdownOverlay placement={PopupPlacement.RightTop}>\n          <div className=\"source-viewer-bubble-popup nowrap\">\n            <Link\n              className=\"js-get-permalink\"\n              onClick={event => {\n                event.stopPropagation();\n              }}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              to={getCodeUrl(file.project, branchLike, file.key, line.line)}>\n              {translate('component_viewer.get_permalink')}\n            </Link>\n          </div>\n        </DropdownOverlay>\n      )}\n    </SourceViewerContext.Consumer>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport LineOptionsPopup from './LineOptionsPopup';\nimport Toggler from '../../controls/Toggler';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  popupOpen: boolean;\n}\n\nexport default class LineNumber extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'line-number', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen } = this.props;\n    const { line: lineNumber } = line;\n    const hasLineNumber = !!lineNumber;\n    return hasLineNumber ? (\n      <td\n        className=\"source-meta source-line-number\"\n        data-line-number={lineNumber}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<LineOptionsPopup line={line} />}\n        />\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-number\" />\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport DateFormatter from '../../intl/DateFormatter';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function SCMPopup({ line }: Props) {\n  const hasAuthor = line.scmAuthor !== '';\n  return (\n    <DropdownOverlay placement={PopupPlacement.RightTop}>\n      <div className=\"source-viewer-bubble-popup abs-width-400\">\n        {hasAuthor && <div>{line.scmAuthor}</div>}\n        {line.scmDate && (\n          <div className={classNames({ 'spacer-top': hasAuthor })}>\n            <DateFormatter date={line.scmDate} />\n          </div>\n        )}\n        {line.scmRevision && <div className=\"spacer-top\">{line.scmRevision}</div>}\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SCMPopup from './SCMPopup';\nimport Toggler from '../../controls/Toggler';\n\ninterface Props {\n  line: T.SourceLine;\n  onPopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  popupOpen: boolean;\n  previousLine: T.SourceLine | undefined;\n}\n\nexport default class LineSCM extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm' });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({ line: this.props.line.line, name: 'scm', open });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { line, popupOpen, previousLine } = this.props;\n    const hasPopup = !!line.line;\n    const cell = isSCMChanged(line, previousLine) && (\n      <div className=\"source-line-scm-inner\" data-author={line.scmAuthor || '…'} />\n    );\n    return hasPopup ? (\n      <td\n        className=\"source-meta source-line-scm\"\n        data-line-number={line.line}\n        onClick={this.handleClick}\n        // eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n        role=\"button\"\n        tabIndex={0}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={<SCMPopup line={line} />}>\n          {cell}\n        </Toggler>\n      </td>\n    ) : (\n      <td className=\"source-meta source-line-scm\" data-line-number={line.line}>\n        {cell}\n      </td>\n    );\n  }\n}\n\nfunction isSCMChanged(s: T.SourceLine, p: T.SourceLine | undefined) {\n  let changed = true;\n  if (p != null && s.scmRevision != null && p.scmRevision != null) {\n    changed = s.scmRevision !== p.scmRevision || s.scmDate !== p.scmDate;\n  }\n  return changed;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Tooltip from '../../controls/Tooltip';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n}\n\nexport default function LineCoverage({ line }: Props) {\n  const className =\n    'source-meta source-line-coverage' +\n    (line.coverageStatus != null ? ` source-line-${line.coverageStatus}` : '');\n  return (\n    <td className={className} data-line-number={line.line}>\n      <Tooltip overlay={getStatusTooltip(line)} placement=\"right\">\n        <div className=\"source-line-bar\" />\n      </Tooltip>\n    </td>\n  );\n}\n\nfunction getStatusTooltip(line: T.SourceLine) {\n  if (line.coverageStatus === 'uncovered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.uncovered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.uncovered');\n    }\n  } else if (line.coverageStatus === 'covered') {\n    if (line.conditions) {\n      return translateWithParameters('source_viewer.tooltip.covered.conditions', line.conditions);\n    } else {\n      return translate('source_viewer.tooltip.covered');\n    }\n  } else if (line.coverageStatus === 'partially-covered') {\n    if (line.conditions) {\n      return translateWithParameters(\n        'source_viewer.tooltip.partially-covered.conditions',\n        line.coveredConditions || 0,\n        line.conditions\n      );\n    } else {\n      return translate('source_viewer.tooltip.partially-covered');\n    }\n  }\n  return undefined;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../controls/Tooltip';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  line: T.SourceLine;\n  onClick: (line: T.SourceLine) => void;\n}\n\nexport default class LineDuplications extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick(this.props.line);\n  };\n\n  render() {\n    const { line } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications', {\n      'source-line-duplicated': line.duplicated\n    });\n\n    const cell = (\n      <td\n        className={className}\n        onClick={line.duplicated ? this.handleClick : undefined}\n        role={line.duplicated ? 'button' : undefined}\n        tabIndex={line.duplicated ? 0 : undefined}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n\n    return line.duplicated ? (\n      <Tooltip overlay={translate('source_viewer.tooltip.duplicated_line')} placement=\"right\">\n        {cell}\n      </Tooltip>\n    ) : (\n      cell\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport Tooltip from '../../controls/Tooltip';\nimport Toggler from '../../controls/Toggler';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  duplicated: boolean;\n  index: number;\n  line: T.SourceLine;\n  onPopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  popupOpen: boolean;\n  renderDuplicationPopup: (index: number, line: number) => JSX.Element;\n}\n\nexport default class LineDuplicationBlock extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    event.stopPropagation();\n    event.currentTarget.blur();\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications'\n    });\n  };\n\n  handleTogglePopup = (open: boolean) => {\n    this.props.onPopupToggle({\n      index: this.props.index,\n      line: this.props.line.line,\n      name: 'duplications',\n      open\n    });\n  };\n\n  closePopup = () => {\n    this.handleTogglePopup(false);\n  };\n\n  render() {\n    const { duplicated, index, line, popupOpen } = this.props;\n    const className = classNames('source-meta', 'source-line-duplications-extra', {\n      'source-line-duplicated': duplicated\n    });\n\n    return duplicated ? (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <Toggler\n          onRequestClose={this.closePopup}\n          open={popupOpen}\n          overlay={this.props.renderDuplicationPopup(index, line.line)}>\n          <Tooltip\n            overlay={popupOpen ? undefined : translate('source_viewer.tooltip.duplicated_block')}\n            placement=\"right\">\n            <div\n              className=\"source-line-bar\"\n              onClick={this.handleClick}\n              role=\"button\"\n              tabIndex={0}\n            />\n          </Tooltip>\n        </Toggler>\n      </td>\n    ) : (\n      <td className={className} data-index={index} data-line-number={line.line}>\n        <div className=\"source-line-bar\" />\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport SeverityIcon from '../../icons-components/SeverityIcon';\nimport { sortBySeverity } from '../../../helpers/issues';\n\ninterface Props {\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onClick: () => void;\n}\n\nexport default class LineIssuesIndicator extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    event.preventDefault();\n    this.props.onClick();\n  };\n\n  render() {\n    const { issues, line } = this.props;\n    const hasIssues = issues.length > 0;\n    const className = classNames('source-meta', 'source-line-issues', {\n      'source-line-with-issues': hasIssues\n    });\n    const mostImportantIssue = hasIssues ? sortBySeverity(issues)[0] : null;\n\n    return (\n      <td\n        className={className}\n        data-line-number={line.line}\n        onClick={hasIssues ? this.handleClick : undefined}\n        role={hasIssues ? 'button' : undefined}\n        tabIndex={hasIssues ? 0 : undefined}>\n        {mostImportantIssue != null && <SeverityIcon severity={mostImportantIssue.severity} />}\n        {issues.length > 1 && <span className=\"source-line-issues-counter\">{issues.length}</span>}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Issue from '../../issue/Issue';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  onIssueChange: (issue: T.Issue) => void;\n  onIssueClick: (issueKey: string) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  selectedIssue: string | undefined;\n}\n\nexport default function LineIssuesList(props: Props) {\n  const { issuePopup } = props;\n\n  return (\n    <div className=\"issue-list\">\n      {props.issues.map(issue => (\n        <Issue\n          branchLike={props.branchLike}\n          displayLocationsCount={props.displayIssueLocationsCount}\n          displayLocationsLink={props.displayIssueLocationsLink}\n          issue={issue}\n          key={issue.key}\n          onChange={props.onIssueChange}\n          onClick={props.onIssueClick}\n          onPopupToggle={props.onIssuePopupToggle}\n          openPopup={issuePopup && issuePopup.issue === issue.key ? issuePopup.name : undefined}\n          selected={props.selectedIssue === issue.key}\n        />\n      ))}\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { uniq } from 'lodash';\n\nexport interface Token {\n  className: string;\n  markers: number[];\n  text: string;\n}\n\nconst ISSUE_LOCATION_CLASS = 'source-line-code-issue';\n\nexport function splitByTokens(code: string, rootClassName = ''): Token[] {\n  const container = document.createElement('div');\n  let tokens: Token[] = [];\n  container.innerHTML = code;\n  [].forEach.call(container.childNodes, (node: Element) => {\n    if (node.nodeType === 1) {\n      // ELEMENT NODE\n      const fullClassName = rootClassName ? rootClassName + ' ' + node.className : node.className;\n      const innerTokens = splitByTokens(node.innerHTML, fullClassName);\n      tokens = tokens.concat(innerTokens);\n    }\n    if (node.nodeType === 3 && node.nodeValue) {\n      // TEXT NODE\n      tokens.push({ className: rootClassName, markers: [], text: node.nodeValue });\n    }\n  });\n  return tokens;\n}\n\nexport function highlightSymbol(tokens: Token[], symbol: string): Token[] {\n  const symbolRegExp = new RegExp(`\\\\b${symbol}\\\\b`);\n  return tokens.map(\n    token =>\n      symbolRegExp.test(token.className)\n        ? { ...token, className: `${token.className} highlighted` }\n        : token\n  );\n}\n\n/**\n * Intersect two ranges\n * @param s1 Start position of the first range\n * @param e1 End position of the first range\n * @param s2 Start position of the second range\n * @param e2 End position of the second range\n */\nfunction intersect(s1: number, e1: number, s2: number, e2: number) {\n  return { from: Math.max(s1, s2), to: Math.min(e1, e2) };\n}\n\n/**\n * Get the substring of a string\n * @param str A string\n * @param from \"From\" offset\n * @param to \"To\" offset\n * @param acc Global offset to eliminate\n */\nfunction part(str: string, from: number, to: number, acc: number): string {\n  // we do not want negative number as the first argument of `substr`\n  return from >= acc ? str.substr(from - acc, to - from) : str.substr(0, to - from);\n}\n\n/**\n * Highlight issue locations in the list of tokens\n */\nexport function highlightIssueLocations(\n  tokens: Token[],\n  issueLocations: T.LinearIssueLocation[],\n  rootClassName: string = ISSUE_LOCATION_CLASS\n): Token[] {\n  issueLocations.forEach(location => {\n    const nextTokens: Token[] = [];\n    let acc = 0;\n    let markerAdded = location.line !== location.startLine;\n    tokens.forEach(token => {\n      const x = intersect(acc, acc + token.text.length, location.from, location.to);\n      const p1 = part(token.text, acc, x.from, acc);\n      const p2 = part(token.text, x.from, x.to, acc);\n      const p3 = part(token.text, x.to, acc + token.text.length, acc);\n      if (p1.length) {\n        nextTokens.push({ ...token, text: p1 });\n      }\n      if (p2.length) {\n        const newClassName =\n          token.className.indexOf(rootClassName) === -1\n            ? `${token.className} ${rootClassName}`\n            : token.className;\n        nextTokens.push({\n          className: newClassName,\n          markers:\n            !markerAdded && location.index != null\n              ? uniq([...token.markers, location.index])\n              : token.markers,\n          text: p2\n        });\n        markerAdded = true;\n      }\n      if (p3.length) {\n        nextTokens.push({ ...token, text: p3 });\n      }\n      acc += token.text.length;\n    });\n    tokens = nextTokens.slice();\n  });\n  return tokens;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport LineIssuesList from './LineIssuesList';\nimport LocationIndex from '../../common/LocationIndex';\nimport LocationMessage from '../../common/LocationMessage';\nimport {\n  highlightIssueLocations,\n  highlightSymbol,\n  splitByTokens,\n  Token\n} from '../helpers/highlight';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  line: T.SourceLine;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: Array<string>) => void;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: Array<{\n    from: number;\n    to: number;\n    line: number;\n    index: number;\n    startLine: number;\n  }>;\n  selectedIssue: string | undefined;\n  showIssues?: boolean;\n}\n\ninterface State {\n  tokens: Token[];\n}\n\nexport default class LineCode extends React.PureComponent<Props, State> {\n  activeMarkerNode?: HTMLElement | null;\n  codeNode?: HTMLElement | null;\n  symbols?: NodeListOf<HTMLElement>;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokens: splitByTokens(props.line.code || '')\n    };\n  }\n\n  componentDidMount() {\n    this.attachEvents();\n    if (this.props.highlightedLocationMessage && this.activeMarkerNode && this.props.scroll) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.line.code !== this.props.line.code) {\n      this.setState({\n        tokens: splitByTokens(nextProps.line.code || '')\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    this.detachEvents();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    this.attachEvents();\n    if (\n      this.props.highlightedLocationMessage &&\n      prevProps.highlightedLocationMessage !== this.props.highlightedLocationMessage &&\n      this.activeMarkerNode &&\n      this.props.scroll\n    ) {\n      this.props.scroll(this.activeMarkerNode);\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachEvents();\n  }\n\n  attachEvents() {\n    if (this.codeNode) {\n      this.symbols = this.codeNode.querySelectorAll('.sym');\n      if (this.symbols) {\n        for (let i = 0; i < this.symbols.length; i++) {\n          const symbol = this.symbols[i];\n          symbol.addEventListener('click', this.handleSymbolClick);\n        }\n      }\n    }\n  }\n\n  detachEvents() {\n    if (this.symbols) {\n      for (let i = 0; i < this.symbols.length; i++) {\n        const symbol = this.symbols[i];\n        symbol.addEventListener('click', this.handleSymbolClick);\n      }\n    }\n  }\n\n  handleSymbolClick = (event: MouseEvent) => {\n    event.preventDefault();\n    const keys = (event.currentTarget as HTMLElement).className.match(/sym-\\d+/g);\n    if (keys && keys.length > 0) {\n      this.props.onSymbolClick(keys);\n    }\n  };\n\n  renderMarker(index: number, message: string | undefined, selected: boolean, leading: boolean) {\n    const { onLocationSelect } = this.props;\n    const onClick = onLocationSelect ? () => onLocationSelect(index) : undefined;\n    const ref = selected ? (node: HTMLElement | null) => (this.activeMarkerNode = node) : undefined;\n    return (\n      <LocationIndex\n        key={`marker-${index}`}\n        leading={leading}\n        onClick={onClick}\n        selected={selected}>\n        <span ref={ref}>{index + 1}</span>\n        {message && <LocationMessage selected={true}>{message}</LocationMessage>}\n      </LocationIndex>\n    );\n  }\n\n  render() {\n    const {\n      highlightedLocationMessage,\n      highlightedSymbols,\n      issues,\n      issueLocations,\n      line,\n      onIssueSelect,\n      secondaryIssueLocations,\n      selectedIssue,\n      showIssues\n    } = this.props;\n\n    let tokens = [...this.state.tokens];\n\n    if (highlightedSymbols) {\n      highlightedSymbols.forEach(symbol => {\n        tokens = highlightSymbol(tokens, symbol);\n      });\n    }\n\n    if (issueLocations.length > 0) {\n      tokens = highlightIssueLocations(tokens, issueLocations);\n    }\n\n    if (secondaryIssueLocations) {\n      tokens = highlightIssueLocations(tokens, secondaryIssueLocations, 'issue-location');\n\n      if (highlightedLocationMessage) {\n        const location = secondaryIssueLocations.find(\n          location => location.index === highlightedLocationMessage.index\n        );\n        if (location) {\n          tokens = highlightIssueLocations(tokens, [location], 'selected');\n        }\n      }\n    }\n\n    const className = classNames('source-line-code', 'code', {\n      'has-issues': issues.length > 0\n    });\n\n    const renderedTokens: React.ReactNode[] = [];\n\n    // track if the first marker is displayed before the source code\n    // set `false` for the first token in a row\n    let leadingMarker = false;\n\n    tokens.forEach((token, index) => {\n      if (this.props.displayLocationMarkers && token.markers.length > 0) {\n        token.markers.forEach(marker => {\n          const selected =\n            highlightedLocationMessage !== undefined && highlightedLocationMessage.index === marker;\n          const message = selected ? highlightedLocationMessage!.text : undefined;\n          renderedTokens.push(this.renderMarker(marker, message, selected, leadingMarker));\n        });\n      }\n      renderedTokens.push(\n        <span className={token.className} key={index}>\n          {token.text}\n        </span>\n      );\n\n      // keep leadingMarker truthy if previous token has only whitespaces\n      leadingMarker = (index === 0 ? true : leadingMarker) && !token.text.trim().length;\n    });\n\n    return (\n      <td className={className} data-line-number={line.line}>\n        <div className=\"source-line-code-inner\">\n          <pre ref={node => (this.codeNode = node)}>{renderedTokens}</pre>\n        </div>\n        {showIssues &&\n          issues.length > 0 && (\n            <LineIssuesList\n              branchLike={this.props.branchLike}\n              displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n              displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n              issuePopup={this.props.issuePopup}\n              issues={issues}\n              onIssueChange={this.props.onIssueChange}\n              onIssueClick={onIssueSelect}\n              onIssuePopupToggle={this.props.onIssuePopupToggle}\n              selectedIssue={selectedIssue}\n            />\n          )}\n      </td>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { times } from 'lodash';\nimport LineNumber from './LineNumber';\nimport LineSCM from './LineSCM';\nimport LineCoverage from './LineCoverage';\nimport LineDuplications from './LineDuplications';\nimport LineDuplicationBlock from './LineDuplicationBlock';\nimport LineIssuesIndicator from './LineIssuesIndicator';\nimport LineCode from './LineCode';\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  displayAllIssues?: boolean;\n  displayCoverage: boolean;\n  displayDuplications: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayIssues: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: number[];\n  duplicationsCount: number;\n  highlighted: boolean;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  highlightedSymbols: string[] | undefined;\n  issueLocations: T.LinearIssueLocation[];\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[];\n  last: boolean;\n  line: T.SourceLine;\n  linePopup: { index?: number; line: number; name: string } | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  onLinePopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issueKey: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLocationSelect: ((x: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssues: boolean;\n  previousLine: T.SourceLine | undefined;\n  renderDuplicationPopup: (index: number, line: number) => JSX.Element;\n  scroll?: (element: HTMLElement) => void;\n  secondaryIssueLocations: Array<{\n    from: number;\n    to: number;\n    line: number;\n    index: number;\n    startLine: number;\n  }>;\n  selectedIssue: string | undefined;\n}\n\nexport default class Line extends React.PureComponent<Props> {\n  isPopupOpen = (name: string, index?: number) => {\n    const { line, linePopup } = this.props;\n    return (\n      linePopup !== undefined &&\n      linePopup.index === index &&\n      linePopup.line === line.line &&\n      linePopup.name === name\n    );\n  };\n\n  handleIssuesIndicatorClick = () => {\n    if (this.props.openIssues) {\n      this.props.onIssuesClose(this.props.line);\n      this.props.onIssueUnselect();\n    } else {\n      this.props.onIssuesOpen(this.props.line);\n\n      const { issues } = this.props;\n      if (issues.length > 0) {\n        this.props.onIssueSelect(issues[0].key);\n      }\n    }\n  };\n\n  render() {\n    const { displayCoverage, duplications, duplicationsCount, issuePopup, line } = this.props;\n    const className = classNames('source-line', {\n      'source-line-highlighted': this.props.highlighted,\n      'source-line-filtered': line.isNew,\n      'source-line-filtered-dark':\n        displayCoverage &&\n        (line.coverageStatus === 'uncovered' || line.coverageStatus === 'partially-covered'),\n      'source-line-last': this.props.last\n    });\n\n    return (\n      <tr className={className} data-line-number={line.line}>\n        <LineNumber\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('line-number')}\n        />\n\n        <LineSCM\n          line={line}\n          onPopupToggle={this.props.onLinePopupToggle}\n          popupOpen={this.isPopupOpen('scm')}\n          previousLine={this.props.previousLine}\n        />\n\n        {this.props.displayCoverage && <LineCoverage line={line} />}\n\n        {this.props.displayDuplications && (\n          <LineDuplications line={line} onClick={this.props.loadDuplications} />\n        )}\n\n        {times(duplicationsCount, index => (\n          <LineDuplicationBlock\n            duplicated={duplications.includes(index)}\n            index={index}\n            key={index}\n            line={this.props.line}\n            onPopupToggle={this.props.onLinePopupToggle}\n            popupOpen={this.isPopupOpen('duplications', index)}\n            renderDuplicationPopup={this.props.renderDuplicationPopup}\n          />\n        ))}\n\n        {this.props.displayIssues &&\n          !this.props.displayAllIssues && (\n            <LineIssuesIndicator\n              issues={this.props.issues}\n              line={line}\n              onClick={this.handleIssuesIndicatorClick}\n            />\n          )}\n\n        <LineCode\n          branchLike={this.props.branchLike}\n          displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n          displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n          displayLocationMarkers={this.props.displayLocationMarkers}\n          highlightedLocationMessage={this.props.highlightedLocationMessage}\n          highlightedSymbols={this.props.highlightedSymbols}\n          issueLocations={this.props.issueLocations}\n          issuePopup={issuePopup}\n          issues={this.props.issues}\n          line={line}\n          onIssueChange={this.props.onIssueChange}\n          onIssuePopupToggle={this.props.onIssuePopupToggle}\n          onIssueSelect={this.props.onIssueSelect}\n          onLocationSelect={this.props.onLocationSelect}\n          onSymbolClick={this.props.onSymbolClick}\n          scroll={this.props.scroll}\n          secondaryIssueLocations={this.props.secondaryIssueLocations}\n          selectedIssue={this.props.selectedIssue}\n          showIssues={this.props.openIssues || this.props.displayAllIssues}\n        />\n      </tr>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport function getLinearLocations(textRange: T.TextRange | undefined): T.LinearIssueLocation[] {\n  if (!textRange) {\n    return [];\n  }\n  const locations = [];\n\n  // go through all lines of the `textRange`\n  for (let line = textRange.startLine; line <= textRange.endLine; line++) {\n    // TODO fix 999999\n    const from = line === textRange.startLine ? textRange.startOffset : 0;\n    const to = line === textRange.endLine ? textRange.endOffset : 999999;\n    locations.push({ line, from, to });\n  }\n  return locations;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { intersection } from 'lodash';\nimport Line from './components/Line';\nimport { getLinearLocations } from './helpers/issueLocations';\nimport { translate } from '../../helpers/l10n';\nimport { Button } from '../ui/buttons';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst ZERO_LINE = {\n  code: '',\n  duplicated: false,\n  isNew: false,\n  line: 0\n};\n\ninterface Props {\n  branchLike: T.BranchLike | undefined;\n  componentKey: string;\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  duplications: T.Duplication[] | undefined;\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  hasSourcesBefore: boolean;\n  highlightedLine: number | undefined;\n  highlightedLocationMessage: { index: number; text: string | undefined } | undefined;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintain the location indexes\n  highlightedLocations: (T.FlowLocation | undefined)[] | undefined;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup: { issue: string; name: string } | undefined;\n  issues: T.Issue[] | undefined;\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup: { index?: number; line: number; name: string } | undefined;\n  loadDuplications: (line: T.SourceLine) => void;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  loadSourcesAfter: () => void;\n  loadSourcesBefore: () => void;\n  onIssueChange: (issue: T.Issue) => void;\n  onIssuePopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  onIssuesClose: (line: T.SourceLine) => void;\n  onIssueSelect: (issueKey: string) => void;\n  onIssuesOpen: (line: T.SourceLine) => void;\n  onIssueUnselect: () => void;\n  onLinePopupToggle: (x: { index?: number; line: number; name: string; open?: boolean }) => void;\n  onLocationSelect: ((index: number) => void) | undefined;\n  onSymbolClick: (symbols: string[]) => void;\n  openIssuesByLine: { [line: number]: boolean };\n  renderDuplicationPopup: (index: number, line: number) => JSX.Element;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue: string | undefined;\n  sources: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nexport default class SourceViewerCode extends React.PureComponent<Props> {\n  getDuplicationsForLine = (line: T.SourceLine): number[] => {\n    return this.props.duplicationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssuesForLine = (line: T.SourceLine): T.Issue[] => {\n    return this.props.issuesByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    return this.props.issueLocationsByLine[line.line] || EMPTY_ARRAY;\n  };\n\n  getSecondaryIssueLocationsForLine = (line: T.SourceLine): T.LinearIssueLocation[] => {\n    const { highlightedLocations } = this.props;\n    if (!highlightedLocations) {\n      return EMPTY_ARRAY;\n    }\n    return highlightedLocations.reduce((locations, location, index) => {\n      const linearLocations: T.LinearIssueLocation[] = location\n        ? getLinearLocations(location.textRange)\n            .filter(l => l.line === line.line)\n            .map(l => ({ ...l, startLine: location.textRange.startLine, index }))\n        : [];\n      return [...locations, ...linearLocations];\n    }, []);\n  };\n\n  renderLine = ({\n    line,\n    index,\n    displayCoverage,\n    displayDuplications,\n    displayIssues\n  }: {\n    line: T.SourceLine;\n    index: number;\n    displayCoverage: boolean;\n    displayDuplications: boolean;\n    displayIssues: boolean;\n  }) => {\n    const { highlightedLocationMessage, selectedIssue, sources } = this.props;\n\n    const secondaryIssueLocations = this.getSecondaryIssueLocationsForLine(line);\n\n    const duplicationsCount = this.props.duplications ? this.props.duplications.length : 0;\n\n    const issuesForLine = this.getIssuesForLine(line);\n\n    // for the following properties pass null if the line for sure is not impacted\n    const symbolsForLine = this.props.symbolsByLine[line.line] || [];\n    const { highlightedSymbols } = this.props;\n    let optimizedHighlightedSymbols: string[] | undefined = intersection(\n      symbolsForLine,\n      highlightedSymbols\n    );\n    if (!optimizedHighlightedSymbols.length) {\n      optimizedHighlightedSymbols = undefined;\n    }\n\n    const optimizedSelectedIssue =\n      selectedIssue !== undefined && issuesForLine.find(issue => issue.key === selectedIssue)\n        ? selectedIssue\n        : undefined;\n\n    const optimizedSecondaryIssueLocations =\n      secondaryIssueLocations.length > 0 ? secondaryIssueLocations : EMPTY_ARRAY;\n\n    const optimizedLocationMessage =\n      highlightedLocationMessage != null &&\n      optimizedSecondaryIssueLocations.some(\n        location => location.index === highlightedLocationMessage.index\n      )\n        ? highlightedLocationMessage\n        : undefined;\n\n    return (\n      <Line\n        branchLike={this.props.branchLike}\n        displayAllIssues={this.props.displayAllIssues}\n        displayCoverage={displayCoverage}\n        displayDuplications={displayDuplications}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayIssues={displayIssues}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.getDuplicationsForLine(line)}\n        duplicationsCount={duplicationsCount}\n        highlighted={line.line === this.props.highlightedLine}\n        highlightedLocationMessage={optimizedLocationMessage}\n        highlightedSymbols={optimizedHighlightedSymbols}\n        issueLocations={this.getIssueLocationsForLine(line)}\n        issuePopup={this.props.issuePopup}\n        issues={issuesForLine}\n        key={line.line}\n        last={index === this.props.sources.length - 1 && !this.props.hasSourcesAfter}\n        line={line}\n        linePopup={this.props.linePopup}\n        loadDuplications={this.props.loadDuplications}\n        onIssueChange={this.props.onIssueChange}\n        onIssuePopupToggle={this.props.onIssuePopupToggle}\n        onIssueSelect={this.props.onIssueSelect}\n        onIssueUnselect={this.props.onIssueUnselect}\n        onIssuesClose={this.props.onIssuesClose}\n        onIssuesOpen={this.props.onIssuesOpen}\n        onLinePopupToggle={this.props.onLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.props.onSymbolClick}\n        openIssues={this.props.openIssuesByLine[line.line] || false}\n        previousLine={index > 0 ? sources[index - 1] : undefined}\n        renderDuplicationPopup={this.props.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        secondaryIssueLocations={optimizedSecondaryIssueLocations}\n        selectedIssue={optimizedSelectedIssue}\n      />\n    );\n  };\n\n  render() {\n    const { issues = [], sources } = this.props;\n\n    const displayCoverage = sources.some(s => s.coverageStatus != null);\n    const displayDuplications = sources.some(s => !!s.duplicated);\n    const displayIssues = issues.length > 0;\n\n    const hasFileIssues = displayIssues && issues.some(issue => !issue.textRange);\n\n    return (\n      <div className=\"source-viewer-code\">\n        {this.props.hasSourcesBefore && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesBefore ? (\n              <div className=\"js-component-viewer-loading-before\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-before\"\n                onClick={this.props.loadSourcesBefore}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n\n        <table className=\"source-table\">\n          <tbody>\n            {hasFileIssues &&\n              this.renderLine({\n                line: ZERO_LINE,\n                index: -1,\n                displayCoverage,\n                displayDuplications,\n                displayIssues\n              })}\n            {sources.map((line, index) =>\n              this.renderLine({ line, index, displayCoverage, displayDuplications, displayIssues })\n            )}\n          </tbody>\n        </table>\n\n        {this.props.hasSourcesAfter && (\n          <div className=\"source-viewer-more-code\">\n            {this.props.loadingSourcesAfter ? (\n              <div className=\"js-component-viewer-loading-after\">\n                <i className=\"spinner\" />\n                <span className=\"note spacer-left\">\n                  {translate('source_viewer.loading_more_code')}\n                </span>\n              </div>\n            ) : (\n              <Button\n                className=\"js-component-viewer-source-after\"\n                onClick={this.props.loadSourcesAfter}>\n                {translate('source_viewer.load_more_code')}\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport { groupBy, sortBy } from 'lodash';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport QualifierIcon from '../../icons-components/QualifierIcon';\nimport { PopupPlacement } from '../../ui/popups';\nimport { WorkspaceContextShape } from '../../workspace/context';\nimport { isShortLivingBranch, isPullRequest } from '../../../helpers/branches';\nimport { translate } from '../../../helpers/l10n';\nimport { collapsedDirFromPath, fileFromPath } from '../../../helpers/path';\nimport { getProjectUrl } from '../../../helpers/urls';\nimport { Alert } from '../../ui/Alert';\n\ninterface Props {\n  blocks: T.DuplicationBlock[];\n  branchLike: T.BranchLike | undefined;\n  duplicatedFiles?: { [ref: string]: T.DuplicatedFile };\n  inRemovedComponent: boolean;\n  onClose: () => void;\n  openComponent: WorkspaceContextShape['openComponent'];\n  sourceViewerFile: T.SourceViewerFile;\n}\n\nexport default class DuplicationPopup extends React.PureComponent<Props> {\n  shouldLink() {\n    const { branchLike } = this.props;\n    return !isShortLivingBranch(branchLike) && !isPullRequest(branchLike);\n  }\n\n  isDifferentComponent = (\n    a: { project: string; subProject?: string },\n    b: { project: string; subProject?: string }\n  ) => {\n    return Boolean(a && b && (a.project !== b.project || a.subProject !== b.subProject));\n  };\n\n  handleFileClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    const { key, line } = event.currentTarget.dataset;\n    if (this.shouldLink() && key) {\n      this.props.openComponent({\n        branchLike: this.props.branchLike,\n        key,\n        line: line ? Number(line) : undefined\n      });\n    }\n    this.props.onClose();\n  };\n\n  renderDuplication(file: T.DuplicatedFile, children: React.ReactNode, line?: number) {\n    return this.shouldLink() ? (\n      <a\n        data-key={file.key}\n        data-line={line}\n        href=\"#\"\n        onClick={this.handleFileClick}\n        title={file.name}>\n        {children}\n      </a>\n    ) : (\n      children\n    );\n  }\n\n  render() {\n    const { duplicatedFiles = {}, sourceViewerFile } = this.props;\n\n    const groupedBlocks = groupBy(this.props.blocks, '_ref');\n    let duplications = Object.keys(groupedBlocks).map(fileRef => {\n      return {\n        blocks: groupedBlocks[fileRef],\n        file: duplicatedFiles[fileRef]\n      };\n    });\n\n    // first duplications in the same file\n    // then duplications in the same sub-project\n    // then duplications in the same project\n    // then duplications in other projects\n    duplications = sortBy(\n      duplications,\n      d => d.file.projectName !== sourceViewerFile.projectName,\n      d => d.file.subProjectName !== sourceViewerFile.subProjectName,\n      d => d.file.key !== sourceViewerFile.key\n    );\n\n    return (\n      <DropdownOverlay placement={PopupPlacement.RightTop}>\n        <div className=\"source-viewer-bubble-popup abs-width-400\">\n          {this.props.inRemovedComponent && (\n            <Alert variant=\"warning\">\n              {translate('duplications.dups_found_on_deleted_resource')}\n            </Alert>\n          )}\n          {duplications.length > 0 && (\n            <>\n              <h6 className=\"spacer-bottom\">\n                {translate('component_viewer.transition.duplication')}\n              </h6>\n              {duplications.map(duplication => (\n                <div className=\"spacer-top text-ellipsis\" key={duplication.file.key}>\n                  <div className=\"component-name\">\n                    {this.isDifferentComponent(duplication.file, this.props.sourceViewerFile) && (\n                      <>\n                        <div className=\"component-name-parent\">\n                          <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n                          <Link to={getProjectUrl(duplication.file.project)}>\n                            {duplication.file.projectName}\n                          </Link>\n                        </div>\n                        {duplication.file.subProject &&\n                          duplication.file.subProjectName && (\n                            <div className=\"component-name-parent\">\n                              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n                              {duplication.file.subProjectName}\n                            </div>\n                          )}\n                      </>\n                    )}\n\n                    {duplication.file.key !== this.props.sourceViewerFile.key && (\n                      <div className=\"component-name-path\">\n                        {this.renderDuplication(\n                          duplication.file,\n                          <>\n                            <span>{collapsedDirFromPath(duplication.file.name)}</span>\n                            <span className=\"component-name-file\">\n                              {fileFromPath(duplication.file.name)}\n                            </span>\n                          </>\n                        )}\n                      </div>\n                    )}\n\n                    <div className=\"component-name-path\">\n                      {'Lines: '}\n                      {duplication.blocks.map((block, index) => (\n                        <React.Fragment key={index}>\n                          {this.renderDuplication(\n                            duplication.file,\n                            <>\n                              {block.from}\n                              {' – '}\n                              {block.from + block.size - 1}\n                            </>,\n                            block.from\n                          )}\n                          {index < duplication.blocks.length - 1 && ', '}\n                        </React.Fragment>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { searchIssues } from '../../../api/issues';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { parseIssueFromResponse } from '../../../helpers/issues';\nimport { RawQuery } from '../../../helpers/query';\n\n// maximum possible value\nconst PAGE_SIZE = 500;\n\nfunction buildQuery(component: string, branchLike: T.BranchLike | undefined) {\n  return {\n    additionalFields: '_all',\n    resolved: 'false',\n    componentKeys: component,\n    s: 'FILE_LINE',\n    ...getBranchLikeQuery(branchLike)\n  };\n}\n\nexport function loadPage(query: RawQuery, page: number, pageSize = PAGE_SIZE): Promise<T.Issue[]> {\n  return searchIssues({\n    ...query,\n    p: page,\n    ps: pageSize\n  }).then(r =>\n    r.issues.map(issue => parseIssueFromResponse(issue, r.components, r.users, r.rules))\n  );\n}\n\nexport function loadPageAndNext(\n  query: RawQuery,\n  toLine: number,\n  page: number,\n  pageSize = PAGE_SIZE\n): Promise<T.Issue[]> {\n  return loadPage(query, page).then(issues => {\n    if (issues.length === 0) {\n      return [];\n    }\n\n    const lastIssue = issues[issues.length - 1];\n\n    if (\n      (lastIssue.textRange != null && lastIssue.textRange.endLine > toLine) ||\n      issues.length < pageSize\n    ) {\n      return issues;\n    }\n\n    return loadPageAndNext(query, toLine, page + 1, pageSize).then(nextIssues => {\n      return [...issues, ...nextIssues];\n    });\n  });\n}\n\nexport default function loadIssues(\n  component: string,\n  _fromLine: number,\n  toLine: number,\n  branchLike: T.BranchLike | undefined\n): Promise<T.Issue[]> {\n  const query = buildQuery(component, branchLike);\n  return new Promise(resolve => {\n    loadPageAndNext(query, toLine, 1).then(issues => {\n      resolve(issues);\n    });\n  });\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nexport default function getCoverageStatus(s: T.SourceLine): T.SourceLineCoverageStatus | undefined {\n  let status: T.SourceLineCoverageStatus | undefined;\n  if (s.lineHits != null && s.lineHits > 0) {\n    status = 'partially-covered';\n  }\n  if (s.lineHits != null && s.lineHits > 0 && s.conditions === s.coveredConditions) {\n    status = 'covered';\n  }\n  if (s.lineHits === 0 || s.coveredConditions === 0) {\n    status = 'uncovered';\n  }\n  return status;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { flatten } from 'lodash';\nimport { splitByTokens } from './highlight';\nimport { getLinearLocations } from './issueLocations';\n\nexport function issuesByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.Issue[] } = {};\n  issues.forEach(issue => {\n    const line = issue.textRange ? issue.textRange.endLine : 0;\n    if (!(line in index)) {\n      index[line] = [];\n    }\n    index[line].push(issue);\n  });\n  return index;\n}\n\nexport function locationsByLine(issues: T.Issue[]) {\n  const index: { [line: number]: T.LinearIssueLocation[] } = {};\n  issues.forEach(issue => {\n    getLinearLocations(issue.textRange).forEach(location => {\n      if (!(location.line in index)) {\n        index[location.line] = [];\n      }\n      index[location.line].push(location);\n    });\n  });\n  return index;\n}\n\nexport function duplicationsByLine(duplications: T.Duplication[] | undefined) {\n  if (duplications == null) {\n    return {};\n  }\n\n  const duplicationsByLine: { [line: number]: number[] } = {};\n\n  duplications.forEach(({ blocks }, duplicationIndex) => {\n    blocks.forEach(block => {\n      // eslint-disable-next-line no-underscore-dangle\n      if (block._ref === '1') {\n        for (let line = block.from; line < block.from + block.size; line++) {\n          if (!(line in duplicationsByLine)) {\n            duplicationsByLine[line] = [];\n          }\n          duplicationsByLine[line].push(duplicationIndex);\n        }\n      }\n    });\n  });\n\n  return duplicationsByLine;\n}\n\nexport function symbolsByLine(sources: T.SourceLine[]) {\n  const index: { [line: number]: string[] } = {};\n  sources.forEach(line => {\n    const tokens = splitByTokens(line.code || '');\n    const symbols = flatten(\n      tokens.map(token => {\n        const keys = token.className.match(/sym-\\d+/g);\n        return keys != null ? keys : [];\n      })\n    );\n    index[line.line] = symbols.filter(key => key);\n  });\n  return index;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport { intersection, uniqBy } from 'lodash';\nimport SourceViewerHeader from './SourceViewerHeader';\nimport SourceViewerCode from './SourceViewerCode';\nimport { SourceViewerContext } from './SourceViewerContext';\nimport DuplicationPopup from './components/DuplicationPopup';\nimport defaultLoadIssues from './helpers/loadIssues';\nimport getCoverageStatus from './helpers/getCoverageStatus';\nimport {\n  duplicationsByLine,\n  issuesByLine,\n  locationsByLine,\n  symbolsByLine\n} from './helpers/indexing';\nimport {\n  getComponentData,\n  getComponentForSourceViewer,\n  getDuplications,\n  getSources\n} from '../../api/components';\nimport { isSameBranchLike, getBranchLikeQuery } from '../../helpers/branches';\nimport { translate } from '../../helpers/l10n';\nimport { Alert } from '../ui/Alert';\nimport { WorkspaceContext } from '../workspace/context';\nimport './styles.css';\n\n// TODO react-virtualized\n\nexport interface Props {\n  aroundLine?: number;\n  branchLike: T.BranchLike | undefined;\n  component: string;\n  displayAllIssues?: boolean;\n  displayIssueLocationsCount?: boolean;\n  displayIssueLocationsLink?: boolean;\n  displayLocationMarkers?: boolean;\n  highlightedLine?: number;\n  // `undefined` elements mean they are located in a different file,\n  // but kept to maintaint the location indexes\n  highlightedLocations?: (T.FlowLocation | undefined)[];\n  highlightedLocationMessage?: { index: number; text: string | undefined };\n  loadComponent: (\n    component: string,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.SourceViewerFile>;\n  loadIssues: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.Issue[]>;\n  loadSources: (\n    component: string,\n    from: number,\n    to: number,\n    branchLike: T.BranchLike | undefined\n  ) => Promise<T.SourceLine[]>;\n  onLoaded?: (component: T.SourceViewerFile, sources: T.SourceLine[], issues: T.Issue[]) => void;\n  onLocationSelect?: (index: number) => void;\n  onIssueChange?: (issue: T.Issue) => void;\n  onIssueSelect?: (issueKey: string) => void;\n  onIssueUnselect?: () => void;\n  scroll?: (element: HTMLElement) => void;\n  selectedIssue?: string;\n}\n\ninterface State {\n  component?: T.SourceViewerFile;\n  displayDuplications: boolean;\n  duplicatedFiles?: { [ref: string]: T.DuplicatedFile };\n  duplications?: T.Duplication[];\n  duplicationsByLine: { [line: number]: number[] };\n  hasSourcesAfter: boolean;\n  highlightedSymbols: string[];\n  issueLocationsByLine: { [line: number]: T.LinearIssueLocation[] };\n  issuePopup?: { issue: string; name: string };\n  issues?: T.Issue[];\n  issuesByLine: { [line: number]: T.Issue[] };\n  linePopup?: { index?: number; line: number; name: string };\n  loading: boolean;\n  loadingSourcesAfter: boolean;\n  loadingSourcesBefore: boolean;\n  notAccessible: boolean;\n  notExist: boolean;\n  openIssuesByLine: { [line: number]: boolean };\n  selectedIssue?: string;\n  sourceRemoved: boolean;\n  sources?: T.SourceLine[];\n  symbolsByLine: { [line: number]: string[] };\n}\n\nconst LINES = 500;\n\nexport default class SourceViewerBase extends React.PureComponent<Props, State> {\n  node?: HTMLElement | null;\n  mounted = false;\n\n  static defaultProps = {\n    displayAllIssues: false,\n    displayIssueLocationsCount: true,\n    displayIssueLocationsLink: true,\n    displayLocationMarkers: true,\n    loadComponent: defaultLoadComponent,\n    loadIssues: defaultLoadIssues,\n    loadSources: defaultLoadSources\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      displayDuplications: false,\n      duplicationsByLine: {},\n      hasSourcesAfter: false,\n      highlightedSymbols: [],\n      issuesByLine: {},\n      issueLocationsByLine: {},\n      loading: true,\n      loadingSourcesAfter: false,\n      loadingSourcesBefore: false,\n      notAccessible: false,\n      notExist: false,\n      openIssuesByLine: {},\n      selectedIssue: props.selectedIssue,\n      sourceRemoved: false,\n      symbolsByLine: {}\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    this.fetchComponent();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    // if a component or a branch has changed,\n    // set `loading: true` immediately to avoid unwanted scrolling in `LineCode`\n    if (\n      nextProps.component !== this.props.component ||\n      !isSameBranchLike(nextProps.branchLike, this.props.branchLike)\n    ) {\n      this.setState({ loading: true });\n    }\n    if (\n      nextProps.onIssueSelect !== undefined &&\n      nextProps.selectedIssue !== this.props.selectedIssue\n    ) {\n      this.setState({ selectedIssue: nextProps.selectedIssue });\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.component !== this.props.component ||\n      !isSameBranchLike(prevProps.branchLike, this.props.branchLike)\n    ) {\n      this.fetchComponent();\n    } else if (\n      this.props.aroundLine !== undefined &&\n      prevProps.aroundLine !== this.props.aroundLine &&\n      this.isLineOutsideOfRange(this.props.aroundLine)\n    ) {\n      this.fetchSources();\n    } else {\n      const { selectedIssue } = this.props;\n      const { issues } = this.state;\n      if (\n        selectedIssue !== undefined &&\n        issues !== undefined &&\n        issues.find(issue => issue.key === selectedIssue) === undefined\n      ) {\n        this.reloadIssues();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  computeCoverageStatus(lines: T.SourceLine[]) {\n    return lines.map(line => ({ ...line, coverageStatus: getCoverageStatus(line) }));\n  }\n\n  isLineOutsideOfRange(lineNumber: number) {\n    const { sources } = this.state;\n    if (sources && sources.length > 0) {\n      const firstLine = sources[0];\n      const lastList = sources[sources.length - 1];\n      return lineNumber < firstLine.line || lineNumber > lastList.line;\n    } else {\n      return true;\n    }\n  }\n\n  fetchComponent() {\n    this.setState({ loading: true });\n\n    const to = (this.props.aroundLine || 0) + LINES;\n    const loadIssues = (component: T.SourceViewerFile, sources: T.SourceLine[]) => {\n      this.props.loadIssues(this.props.component, 1, to, this.props.branchLike).then(\n        issues => {\n          if (this.mounted) {\n            const finalSources = sources.slice(0, LINES);\n\n            this.setState(\n              {\n                component,\n                displayDuplications: false,\n                duplicatedFiles: undefined,\n                duplications: undefined,\n                duplicationsByLine: {},\n                hasSourcesAfter: sources.length > LINES,\n                highlightedSymbols: [],\n                issueLocationsByLine: locationsByLine(issues),\n                issues,\n                issuesByLine: issuesByLine(issues),\n                linePopup: undefined,\n                loading: false,\n                notAccessible: false,\n                notExist: false,\n                openIssuesByLine: {},\n                issuePopup: undefined,\n                sourceRemoved: false,\n                sources: this.computeCoverageStatus(finalSources),\n                symbolsByLine: symbolsByLine(sources.slice(0, LINES))\n              },\n              () => {\n                if (this.props.onLoaded) {\n                  this.props.onLoaded(component, finalSources, issues);\n                }\n              }\n            );\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n    };\n\n    const onFailLoadComponent = ({ response }: { response: Response }) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ loading: false, notExist: true });\n        }\n      }\n    };\n\n    const onFailLoadSources = (response: Response, component: T.SourceViewerFile) => {\n      // TODO handle other statuses\n      if (this.mounted) {\n        if (response.status === 403) {\n          this.setState({ component, loading: false, notAccessible: true });\n        } else if (response.status === 404) {\n          this.setState({ component, loading: false, sourceRemoved: true });\n        }\n      }\n    };\n\n    const onResolve = (component: T.SourceViewerFile) => {\n      const sourcesRequest =\n        component.q === 'FIL' || component.q === 'UTS' ? this.loadSources() : Promise.resolve([]);\n      sourcesRequest.then(\n        sources => loadIssues(component, sources),\n        response => onFailLoadSources(response, component)\n      );\n    };\n\n    this.props\n      .loadComponent(this.props.component, this.props.branchLike)\n      .then(onResolve, onFailLoadComponent);\n  }\n\n  fetchSources() {\n    this.loadSources().then(\n      sources => {\n        if (this.mounted) {\n          const finalSources = sources.slice(0, LINES);\n          this.setState(\n            {\n              sources: sources.slice(0, LINES),\n              hasSourcesAfter: sources.length > LINES\n            },\n            () => {\n              if (this.props.onLoaded && this.state.component && this.state.issues) {\n                this.props.onLoaded(this.state.component, finalSources, this.state.issues);\n              }\n            }\n          );\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  }\n\n  reloadIssues() {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.props\n      .loadIssues(\n        this.props.component,\n        firstSourceLine && firstSourceLine.line,\n        lastSourceLine && lastSourceLine.line,\n        this.props.branchLike\n      )\n      .then(\n        issues => {\n          if (this.mounted) {\n            this.setState({\n              issues,\n              issuesByLine: issuesByLine(issues),\n              issueLocationsByLine: locationsByLine(issues)\n            });\n          }\n        },\n        () => {\n          // TODO\n        }\n      );\n  }\n\n  loadSources = (): Promise<T.SourceLine[]> => {\n    return new Promise((resolve, reject) => {\n      const onFailLoadSources = ({ response }: { response: Response }) => {\n        // TODO handle other statuses\n        if (this.mounted) {\n          if ([403, 404].includes(response.status)) {\n            reject(response);\n          } else {\n            resolve([]);\n          }\n        }\n      };\n\n      const from = this.props.aroundLine ? Math.max(1, this.props.aroundLine - LINES / 2 + 1) : 1;\n\n      let to = this.props.aroundLine ? this.props.aroundLine + LINES / 2 + 1 : LINES + 1;\n      // make sure we try to download `LINES` lines\n      if (from === 1 && to < LINES) {\n        to = LINES;\n      }\n      // request one additional line to define `hasSourcesAfter`\n      to++;\n\n      return this.props\n        .loadSources(this.props.component, from, to, this.props.branchLike)\n        .then(sources => resolve(sources), onFailLoadSources);\n    });\n  };\n\n  loadSourcesBefore = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const firstSourceLine = this.state.sources[0];\n    this.setState({ loadingSourcesBefore: true });\n    const from = Math.max(1, firstSourceLine.line - LINES);\n    this.props\n      .loadSources(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n      .then(\n        sources => {\n          this.props\n            .loadIssues(this.props.component, from, firstSourceLine.line - 1, this.props.branchLike)\n            .then(\n              issues => {\n                if (this.mounted) {\n                  this.setState(prevState => {\n                    const nextIssues = uniqBy(\n                      [...issues, ...(prevState.issues || [])],\n                      issue => issue.key\n                    );\n                    return {\n                      issues: nextIssues,\n                      issuesByLine: issuesByLine(nextIssues),\n                      issueLocationsByLine: locationsByLine(nextIssues),\n                      loadingSourcesBefore: false,\n                      sources: [\n                        ...this.computeCoverageStatus(sources),\n                        ...(prevState.sources || [])\n                      ],\n                      symbolsByLine: { ...prevState.symbolsByLine, ...symbolsByLine(sources) }\n                    };\n                  });\n                }\n              },\n              () => {\n                // TODO\n              }\n            );\n        },\n        () => {\n          // TODO\n        }\n      );\n  };\n\n  loadSourcesAfter = () => {\n    if (!this.state.sources) {\n      return;\n    }\n    const lastSourceLine = this.state.sources[this.state.sources.length - 1];\n    this.setState({ loadingSourcesAfter: true });\n    const fromLine = lastSourceLine.line + 1;\n    // request one additional line to define `hasSourcesAfter`\n    const toLine = lastSourceLine.line + LINES + 1;\n    this.props.loadSources(this.props.component, fromLine, toLine, this.props.branchLike).then(\n      sources => {\n        this.props.loadIssues(this.props.component, fromLine, toLine, this.props.branchLike).then(\n          issues => {\n            if (this.mounted) {\n              this.setState(prevState => {\n                const nextIssues = uniqBy(\n                  [...(prevState.issues || []), ...issues],\n                  issue => issue.key\n                );\n                return {\n                  issues: nextIssues,\n                  issuesByLine: issuesByLine(nextIssues),\n                  issueLocationsByLine: locationsByLine(nextIssues),\n                  hasSourcesAfter: sources.length > LINES,\n                  loadingSourcesAfter: false,\n                  sources: [\n                    ...(prevState.sources || []),\n                    ...this.computeCoverageStatus(sources.slice(0, LINES))\n                  ],\n                  symbolsByLine: {\n                    ...prevState.symbolsByLine,\n                    ...symbolsByLine(sources.slice(0, LINES))\n                  }\n                };\n              });\n            }\n          },\n          () => {\n            // TODO\n          }\n        );\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  loadDuplications = (line: T.SourceLine) => {\n    getDuplications({\n      key: this.props.component,\n      ...getBranchLikeQuery(this.props.branchLike)\n    }).then(\n      r => {\n        if (this.mounted) {\n          this.setState(state => ({\n            displayDuplications: true,\n            duplications: r.duplications,\n            duplicationsByLine: duplicationsByLine(r.duplications),\n            duplicatedFiles: r.files,\n            linePopup:\n              r.duplications.length === 1\n                ? { index: 0, line: line.line, name: 'duplications' }\n                : state.linePopup\n          }));\n        }\n      },\n      () => {\n        // TODO\n      }\n    );\n  };\n\n  handleLinePopupToggle = ({\n    index,\n    line,\n    name,\n    open\n  }: {\n    index?: number;\n    line: number;\n    name: string;\n    open?: boolean;\n  }) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.linePopup !== undefined &&\n        state.linePopup.name === name &&\n        state.linePopup.line === line &&\n        state.linePopup.index === index;\n      if (open !== false && !samePopup) {\n        return { linePopup: { index, line, name } };\n      } else if (open !== true && samePopup) {\n        return { linePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  closeLinePopup = () => {\n    this.setState({ linePopup: undefined });\n  };\n\n  handleIssuePopupToggle = (issue: string, popupName: string, open?: boolean) => {\n    this.setState((state: State) => {\n      const samePopup =\n        state.issuePopup && state.issuePopup.name === popupName && state.issuePopup.issue === issue;\n      if (open !== false && !samePopup) {\n        return { issuePopup: { issue, name: popupName } };\n      } else if (open !== true && samePopup) {\n        return { issuePopup: undefined };\n      }\n      return null;\n    });\n  };\n\n  handleSymbolClick = (symbols: string[]) => {\n    this.setState(state => {\n      const shouldDisable = intersection(state.highlightedSymbols, symbols).length > 0;\n      const highlightedSymbols = shouldDisable ? [] : symbols;\n      return { highlightedSymbols };\n    });\n  };\n\n  handleIssueSelect = (issue: string) => {\n    if (this.props.onIssueSelect) {\n      this.props.onIssueSelect(issue);\n    } else {\n      this.setState({ selectedIssue: issue });\n    }\n  };\n\n  handleIssueUnselect = () => {\n    if (this.props.onIssueUnselect) {\n      this.props.onIssueUnselect();\n    } else {\n      this.setState({ selectedIssue: undefined });\n    }\n  };\n\n  handleOpenIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: true }\n    }));\n  };\n\n  handleCloseIssues = (line: T.SourceLine) => {\n    this.setState(state => ({\n      openIssuesByLine: { ...state.openIssuesByLine, [line.line]: false }\n    }));\n  };\n\n  handleIssueChange = (issue: T.Issue) => {\n    this.setState(({ issues = [] }) => {\n      const newIssues = issues.map(candidate => (candidate.key === issue.key ? issue : candidate));\n      return { issues: newIssues, issuesByLine: issuesByLine(newIssues) };\n    });\n    if (this.props.onIssueChange) {\n      this.props.onIssueChange(issue);\n    }\n  };\n\n  renderDuplicationPopup = (index: number, line: number) => {\n    const { component, duplicatedFiles, duplications } = this.state;\n\n    if (!component || !duplicatedFiles) return <></>;\n\n    const duplication = duplications && duplications[index];\n    let blocks = (duplication && duplication.blocks) || [];\n    /* eslint-disable no-underscore-dangle */\n    const inRemovedComponent = blocks.some(b => b._ref === undefined);\n    let foundOne = false;\n    blocks = blocks.filter(b => {\n      const outOfBounds = b.from > line || b.from + b.size < line;\n      const currentFile = b._ref === '1';\n      const shouldDisplayForCurrentFile = outOfBounds || foundOne;\n      const shouldDisplay = !currentFile || shouldDisplayForCurrentFile;\n      const isOk = b._ref !== undefined && shouldDisplay;\n      if (b._ref === '1' && !outOfBounds) {\n        foundOne = true;\n      }\n      return isOk;\n    });\n    /* eslint-enable no-underscore-dangle */\n\n    return (\n      <WorkspaceContext.Consumer>\n        {({ openComponent }) => (\n          <DuplicationPopup\n            blocks={blocks}\n            branchLike={this.props.branchLike}\n            duplicatedFiles={duplicatedFiles}\n            inRemovedComponent={inRemovedComponent}\n            onClose={this.closeLinePopup}\n            openComponent={openComponent}\n            sourceViewerFile={component}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n    );\n  };\n\n  renderCode(sources: T.SourceLine[]) {\n    const hasSourcesBefore = sources.length > 0 && sources[0].line > 1;\n    return (\n      <SourceViewerCode\n        branchLike={this.props.branchLike}\n        componentKey={this.props.component}\n        displayAllIssues={this.props.displayAllIssues}\n        displayIssueLocationsCount={this.props.displayIssueLocationsCount}\n        displayIssueLocationsLink={this.props.displayIssueLocationsLink}\n        displayLocationMarkers={this.props.displayLocationMarkers}\n        duplications={this.state.duplications}\n        duplicationsByLine={this.state.duplicationsByLine}\n        hasSourcesAfter={this.state.hasSourcesAfter}\n        hasSourcesBefore={hasSourcesBefore}\n        highlightedLine={this.props.highlightedLine}\n        highlightedLocationMessage={this.props.highlightedLocationMessage}\n        highlightedLocations={this.props.highlightedLocations}\n        highlightedSymbols={this.state.highlightedSymbols}\n        issueLocationsByLine={this.state.issueLocationsByLine}\n        issuePopup={this.state.issuePopup}\n        issues={this.state.issues}\n        issuesByLine={this.state.issuesByLine}\n        linePopup={this.state.linePopup}\n        loadDuplications={this.loadDuplications}\n        loadSourcesAfter={this.loadSourcesAfter}\n        loadSourcesBefore={this.loadSourcesBefore}\n        loadingSourcesAfter={this.state.loadingSourcesAfter}\n        loadingSourcesBefore={this.state.loadingSourcesBefore}\n        onIssueChange={this.handleIssueChange}\n        onIssuePopupToggle={this.handleIssuePopupToggle}\n        onIssueSelect={this.handleIssueSelect}\n        onIssueUnselect={this.handleIssueUnselect}\n        onIssuesClose={this.handleCloseIssues}\n        onIssuesOpen={this.handleOpenIssues}\n        onLinePopupToggle={this.handleLinePopupToggle}\n        onLocationSelect={this.props.onLocationSelect}\n        onSymbolClick={this.handleSymbolClick}\n        openIssuesByLine={this.state.openIssuesByLine}\n        renderDuplicationPopup={this.renderDuplicationPopup}\n        scroll={this.props.scroll}\n        selectedIssue={this.state.selectedIssue}\n        sources={sources}\n        symbolsByLine={this.state.symbolsByLine}\n      />\n    );\n  }\n\n  render() {\n    const { component, loading, sources, notAccessible, sourceRemoved } = this.state;\n\n    if (loading) {\n      return null;\n    }\n\n    if (this.state.notExist) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('component_viewer.no_component')}\n        </Alert>\n      );\n    }\n\n    if (notAccessible) {\n      return (\n        <Alert className=\"spacer-top\" variant=\"warning\">\n          {translate('code_viewer.no_source_code_displayed_due_to_security')}\n        </Alert>\n      );\n    }\n\n    if (!component) {\n      return null;\n    }\n\n    const className = classNames('source-viewer', {\n      'source-duplications-expanded': this.state.displayDuplications\n    });\n\n    return (\n      <SourceViewerContext.Provider value={{ branchLike: this.props.branchLike, file: component }}>\n        <div className={className} ref={node => (this.node = node)}>\n          <WorkspaceContext.Consumer>\n            {({ openComponent }) => (\n              <SourceViewerHeader\n                branchLike={this.props.branchLike}\n                openComponent={openComponent}\n                sourceViewerFile={component}\n              />\n            )}\n          </WorkspaceContext.Consumer>\n          {sourceRemoved && (\n            <Alert className=\"spacer-top\" variant=\"warning\">\n              {translate('code_viewer.no_source_code_displayed_due_to_source_removed')}\n            </Alert>\n          )}\n          {!sourceRemoved && sources !== undefined && this.renderCode(sources)}\n        </div>\n      </SourceViewerContext.Provider>\n    );\n  }\n}\n\nfunction defaultLoadComponent(component: string, branchLike: T.BranchLike | undefined) {\n  return Promise.all([\n    getComponentForSourceViewer({ component, ...getBranchLikeQuery(branchLike) }),\n    getComponentData({ component, ...getBranchLikeQuery(branchLike) })\n  ]).then(([component, data]) => ({\n    ...component,\n    leakPeriodDate: data.leakPeriodDate\n  }));\n}\n\nfunction defaultLoadSources(\n  key: string,\n  from: number | undefined,\n  to: number | undefined,\n  branchLike: T.BranchLike | undefined\n) {\n  return getSources({ key, from, to, ...getBranchLikeQuery(branchLike) });\n}\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationIndex.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.location-index {\\n  position: relative;\\n  display: inline-block;\\n  vertical-align: top;\\n  line-height: 16px;\\n  padding-left: 6px;\\n  padding-right: 6px;\\n  border-radius: 2px;\\n  background-color: #d18582;\\n  color: #fff;\\n  font-family: 'Helvetica Neue', 'Segoe UI', Helvetica, Arial, sans-serif;\\n  font-size: 12px;\\n  transition: background-color 0.3s ease;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n\\n.location-index.selected {\\n  background-color: #bc5e5e;\\n}\\n\\n.location-index.muted {\\n  background-color: #ccc;\\n}\\n\\n.location-index.is-leading {\\n  position: absolute;\\n  margin: 1px 0 0 -4px !important;\\n  transform: translateX(-100%);\\n}\\n\\n.location-index[tabindex] {\\n  cursor: pointer;\\n}\\n\\n.location-index[tabindex]:hover,\\na:hover > .location-index {\\n  background-color: #bc5e5e;\\n}\\n\\n.location-index[tabindex]:focus {\\n  outline: none;\\n}\\n\\n.source-line-code-inner .location-index {\\n  line-height: 16px;\\n  margin: 1px;\\n  margin-left: 4px;\\n  margin-right: 4px;\\n}\\n\\n.source-line-code-inner .location-index + .location-index {\\n  margin-left: 0;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./Issue.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.issue {\\n  position: relative;\\n  padding-top: 8px;\\n  padding-bottom: 8px;\\n  background-color: #ffeaea;\\n  box-shadow: inset 0px 0px 0px 1px #ffeaea;\\n  transition: all 0.3s ease, border 0 ease;\\n}\\n\\n.issue.selected {\\n  box-shadow: none;\\n  border: 1px solid #dd4040 !important;\\n}\\n\\n.issue + .issue,\\n.issue-container + .issue-container {\\n  margin-top: 5px;\\n}\\n\\n.issue.selected + .issue {\\n  border-top-color: transparent;\\n}\\n\\n.issue-row {\\n  display: flex;\\n  margin-bottom: 5px;\\n}\\n\\n.issue-row-meta {\\n  flex-grow: 0;\\n  padding-right: 5px;\\n  white-space: nowrap;\\n}\\n\\n.issue-message {\\n  flex-grow: 1;\\n  padding-left: 8px;\\n  padding-right: 8px;\\n  line-height: 1.5;\\n  font-size: 13px;\\n  font-weight: 600;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n}\\n\\n.issue-message .button-link {\\n  height: 16px;\\n}\\n\\n.issue-rule {\\n  vertical-align: top;\\n  margin-top: 2px;\\n  padding: 0 3px;\\n  background: rgba(75, 159, 213, 0.3);\\n  opacity: 0.5;\\n}\\n\\n.issue-rule:hover {\\n  background: rgba(75, 159, 213, 0.3);\\n}\\n\\n.issue-actions {\\n  display: flex;\\n  justify-content: space-between;\\n  flex-wrap: wrap;\\n  align-items: center;\\n  padding-left: 8px;\\n}\\n\\n.issue-meta-list {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.issue-meta {\\n  line-height: 16px;\\n  font-size: 12px;\\n}\\n\\n.issue-meta + .issue-meta {\\n  margin-left: 8px;\\n}\\n\\n.issue-meta-label {\\n  display: inline-block;\\n  vertical-align: top;\\n  max-width: 180px;\\n  line-height: 16px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.issue-changelog {\\n  width: 450px;\\n  max-height: 320px;\\n  overflow: auto;\\n  white-space: normal;\\n}\\n\\n.issue-comments {\\n  margin-top: 5px;\\n  padding-left: 8px;\\n  font-size: 12px;\\n}\\n\\n.issue-comment {\\n  display: flex;\\n}\\n\\n.issue-comment + .issue-comment {\\n  margin-top: 4px;\\n}\\n\\n.issue-comment-author {\\n  flex-shrink: 0;\\n  max-width: 130px;\\n  line-height: 18px;\\n  color: #777;\\n  font-weight: 600;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.issue-comment-age {\\n  flex-shrink: 0;\\n  line-height: 18px;\\n  white-space: nowrap;\\n  color: #777;\\n}\\n\\n.issue-comment-text {\\n  flex: 1;\\n  min-width: 0;\\n  margin-left: 5px;\\n  margin-right: 5px;\\n  line-height: 18px;\\n  line-height: 1.5;\\n  overflow: hidden;\\n  outline: none;\\n  word-break: break-all;\\n}\\n\\n.issue-comment-actions {\\n  flex-shrink: 0;\\n  padding-left: 5px;\\n  line-height: 18px;\\n  white-space: nowrap;\\n}\\n\\n.issue-comment-bubble-popup {\\n  width: 440px;\\n  font-size: 12px;\\n}\\n\\n.issue-comment-form-text textarea {\\n  width: 100%;\\n  max-width: 100%;\\n}\\n\\n.issue-comment-form-footer {\\n  margin-top: 5px;\\n  line-height: 22px;\\n}\\n\\n.issue-comment-form-footer:before,\\n.issue-comment-form-footer:after {\\n  display: table;\\n  content: '';\\n  line-height: 0;\\n}\\n\\n.issue-comment-form-footer:after {\\n  clear: both;\\n}\\n\\n.issue-comment-form-actions {\\n  float: right;\\n}\\n\\n.issue-comment-form-tips {\\n  float: left;\\n}\\n\\n.issue-with-checkbox {\\n  padding-left: 24px;\\n}\\n\\n.issue-with-checkbox .issue-checkbox-container {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.issue-checkbox-container {\\n  display: none;\\n  position: absolute;\\n  width: 29px;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  border: none;\\n}\\n\\n.issue-checkbox-container:hover {\\n  background-color: rgba(0, 0, 0, 0.05);\\n}\\n\\n.issue:not(.selected) .location-index {\\n  background-color: #ccc;\\n}\\n\\n.issue .menu:not(.issues-similar-issues-menu):not(.issue-changelog) {\\n  max-height: 120px;\\n  overflow: auto;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\nimport './LocationMessage.css';\n\ninterface Props {\n  children?: React.ReactNode;\n  selected: boolean;\n}\n\nexport default function LocationMessage(props: Props) {\n  return (\n    <div className={classNames('location-message', { selected: props.selected })}>\n      {props.children}\n    </div>\n  );\n}\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/postcss-loader/src/index.js??postcss!./LocationMessage.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.location-message {\\n  display: inline-block;\\n  vertical-align: top;\\n  line-height: 16px;\\n  padding: 0 6px;\\n  border-radius: 2px;\\n  background-color: #9e9e9e;\\n  color: #fff;\\n  font-family: 'Helvetica Neue', 'Segoe UI', Helvetica, Arial, sans-serif;\\n  font-size: 12px;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  transition: background-color 0.3s ease;\\n}\\n\\n.location-message.selected {\\n  background-color: #475760;\\n}\\n\\n.location-index + .location-message {\\n  margin-left: 4px;\\n}\\n\\n.location-index > .location-message {\\n  position: absolute;\\n  bottom: calc(100% + 4px);\\n  left: 0;\\n}\\n\\n.location-index > .location-message::after {\\n  position: absolute;\\n  bottom: -5px;\\n  left: 4px;\\n  width: 0;\\n  height: 0;\\n  border-top: 5px solid #475760;\\n  border-left: 5px solid transparent;\\n  border-right: 5px solid transparent;\\n  content: '';\\n}\\n\\n.source-line-code .location-message {\\n  padding-top: 2px;\\n  padding-bottom: 2px;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { parseIssueFromResponse } from '../../helpers/issues';\nimport { IssueResponse } from '../../api/issues';\n\nexport const updateIssue = (\n  onChange: (issue: T.Issue) => void,\n  resultPromise: Promise<IssueResponse>,\n  oldIssue?: T.Issue,\n  newIssue?: T.Issue\n) => {\n  const optimisticUpdate = oldIssue !== undefined && newIssue !== undefined;\n  if (optimisticUpdate) {\n    onChange(newIssue!);\n  }\n\n  resultPromise.then(\n    response => {\n      if (!optimisticUpdate) {\n        const issue = parseIssueFromResponse(\n          response.issue,\n          response.components,\n          response.users,\n          response.rules\n        );\n        onChange(issue);\n      }\n    },\n    () => {\n      if (optimisticUpdate) {\n        onChange(oldIssue!);\n      }\n    }\n  );\n};\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\nexport interface ChangelogDiff {\n  key: string;\n  newValue?: string;\n  oldValue?: string;\n}\n\ninterface Props {\n  diff: ChangelogDiff;\n}\n\nexport default function IssueChangelogDiff({ diff }: Props) {\n  if (diff.key === 'file') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.file_move',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_long_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_long_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  } else if (diff.key === 'from_short_branch') {\n    return (\n      <p>\n        {translateWithParameters(\n          'issue.change.from_short_branch',\n          diff.oldValue || '',\n          diff.newValue || ''\n        )}\n      </p>\n    );\n  }\n\n  let message;\n  if (diff.newValue != null) {\n    let { newValue } = diff;\n    if (diff.key === 'effort') {\n      newValue = formatMeasure(diff.newValue, 'WORK_DUR');\n    }\n    message = translateWithParameters(\n      'issue.changelog.changed_to',\n      translate('issue.changelog.field', diff.key),\n      newValue\n    );\n  } else {\n    message = translateWithParameters(\n      'issue.changelog.removed',\n      translate('issue.changelog.field', diff.key)\n    );\n  }\n\n  if (diff.oldValue != null) {\n    let { oldValue } = diff;\n    if (diff.key === 'effort') {\n      oldValue = formatMeasure(diff.oldValue, 'WORK_DUR');\n    }\n    message += ` (${translateWithParameters('issue.changelog.was', oldValue)})`;\n  }\n  return <p>{message}</p>;\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { getIssueChangelog } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport Avatar from '../../ui/Avatar';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport IssueChangelogDiff, { ChangelogDiff } from '../components/IssueChangelogDiff';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Changelog {\n  avatar?: string;\n  creationDate: string;\n  diffs: ChangelogDiff[];\n  user: string;\n  userName: string;\n}\n\ninterface Props {\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n}\n\ninterface State {\n  changelogs: Changelog[];\n}\n\nexport default class ChangelogPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = {\n    changelogs: []\n  };\n\n  componentDidMount() {\n    this.mounted = true;\n    this.loadChangelog();\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  loadChangelog() {\n    getIssueChangelog(this.props.issue.key).then(\n      changelogs => {\n        if (this.mounted) {\n          this.setState({ changelogs });\n        }\n      },\n      () => {}\n    );\n  }\n\n  render() {\n    const { issue } = this.props;\n    const { author } = issue;\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <div className=\"menu is-container issue-changelog\">\n          <table className=\"spaced\">\n            <tbody>\n              <tr>\n                <td className=\"thin text-left text-top nowrap\">\n                  <DateTimeFormatter date={issue.creationDate} />\n                </td>\n                <td className=\"text-left text-top\">\n                  {author ? `${translate('created_by')} ${author}` : translate('created')}\n                </td>\n              </tr>\n\n              {this.state.changelogs.map((item, idx) => (\n                <tr key={idx}>\n                  <td className=\"thin text-left text-top nowrap\">\n                    <DateTimeFormatter date={item.creationDate} />\n                  </td>\n                  <td className=\"text-left text-top\">\n                    {item.userName && (\n                      <p>\n                        <Avatar\n                          className=\"little-spacer-right\"\n                          hash={item.avatar}\n                          name={item.userName}\n                          size={16}\n                        />\n                        {item.userName}\n                      </p>\n                    )}\n                    {item.diffs.map(diff => (\n                      <IssueChangelogDiff diff={diff} key={diff.key} />\n                    ))}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ChangelogPopup from '../popups/ChangelogPopup';\nimport DateFromNow from '../../intl/DateFromNow';\nimport DateTimeFormatter from '../../intl/DateTimeFormatter';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport Toggler from '../../controls/Toggler';\nimport Tooltip from '../../controls/Tooltip';\nimport { ButtonLink } from '../../ui/buttons';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'author' | 'creationDate' | 'key'>;\n  creationDate: string;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueChangelog extends React.PureComponent<Props> {\n  toggleChangelog = (open?: boolean) => {\n    this.props.togglePopup('changelog', open);\n  };\n\n  handleClick = () => {\n    this.toggleChangelog();\n  };\n\n  handleClose = () => {\n    this.toggleChangelog(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<ChangelogPopup issue={this.props.issue} />}>\n          <Tooltip\n            mouseEnterDelay={0.5}\n            overlay={<DateTimeFormatter date={this.props.creationDate} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-show-changelog\"\n              onClick={this.handleClick}>\n              <span className=\"issue-meta-label\">\n                <DateFromNow date={this.props.creationDate} />\n              </span>\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Tooltip>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport EllipsisIcon from '../../icons-components/EllipsisIcon';\nimport Tooltip from '../../controls/Tooltip';\nimport { ButtonLink } from '../../ui/buttons';\nimport { WorkspaceContextShape } from '../../workspace/context';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\n\ninterface Props {\n  engine?: string;\n  manualVulnerability: boolean;\n  message: string;\n  openRule: WorkspaceContextShape['openRule'];\n  organization: string;\n  rule: string;\n}\n\nexport default class IssueMessage extends React.PureComponent<Props> {\n  handleClick = () => {\n    this.props.openRule({\n      key: this.props.rule,\n      organization: this.props.organization\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"issue-message\">\n        {this.props.message}\n        <ButtonLink\n          aria-label={translate('issue.rule_details')}\n          className=\"issue-rule little-spacer-left\"\n          onClick={this.handleClick}>\n          <EllipsisIcon />\n        </ButtonLink>\n        {this.props.engine && (\n          <Tooltip\n            overlay={translateWithParameters('issue.from_external_rule_engine', this.props.engine)}>\n            <div className=\"outline-badge badge-tiny-height spacer-left vertical-text-top\">\n              {this.props.engine}\n            </div>\n          </Tooltip>\n        )}\n        {this.props.manualVulnerability && (\n          <Tooltip overlay={translate('issue.manual_vulnerability.description')}>\n            <div className=\"outline-badge badge-tiny-height spacer-left vertical-text-top\">\n              {translate('issue.manual_vulnerability')}\n            </div>\n          </Tooltip>\n        )}\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport Tooltip from '../controls/Tooltip';\n\ninterface Props {\n  active?: string;\n  item: string;\n  onHover?: (item: string) => void;\n  onSelect?: (item: string) => void;\n  title?: string;\n}\n\nexport default class SelectListItem extends React.PureComponent<Props> {\n  handleSelect = (event: React.MouseEvent) => {\n    event.preventDefault();\n    if (this.props.onSelect) {\n      this.props.onSelect(this.props.item);\n    }\n  };\n\n  handleHover = () => {\n    if (this.props.onHover) {\n      this.props.onHover(this.props.item);\n    }\n  };\n\n  renderLink() {\n    const children = this.props.children || this.props.item;\n    return (\n      <li>\n        <a\n          className={classNames({ active: this.props.active === this.props.item })}\n          href=\"#\"\n          onClick={this.handleSelect}\n          onFocus={this.handleHover}\n          onMouseOver={this.handleHover}>\n          {children}\n        </a>\n      </li>\n    );\n  }\n\n  render() {\n    return (\n      <Tooltip overlay={this.props.title || undefined} placement=\"right\">\n        {this.renderLink()}\n      </Tooltip>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as key from 'keymaster';\nimport { uniqueId } from 'lodash';\nimport classNames from 'classnames';\nimport SelectListItem from './SelectListItem';\n\ninterface Props {\n  className?: string;\n  items: string[];\n  currentItem: string;\n  onSelect: (item: string) => void;\n}\n\ninterface State {\n  active: string;\n}\n\nexport default class SelectList extends React.PureComponent<Props, State> {\n  currentKeyScope?: string;\n  previousFilter?: (event: any) => void;\n  previousKeyScope?: string;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      active: props.currentItem\n    };\n  }\n\n  componentDidMount() {\n    this.attachShortcuts();\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (\n      prevProps.currentItem !== this.props.currentItem &&\n      !this.props.items.includes(this.state.active)\n    ) {\n      this.setState({ active: this.props.currentItem });\n    }\n  }\n\n  componentWillUnmount() {\n    this.detachShortcuts();\n  }\n\n  attachShortcuts = () => {\n    this.previousKeyScope = key.getScope();\n    this.previousFilter = key.filter;\n    this.currentKeyScope = uniqueId('key-scope');\n    key.setScope(this.currentKeyScope);\n\n    // sometimes there is a *focused* search field next to the SelectList component\n    // we need to allow shortcuts in this case, but only for the used keys\n    (key as any).filter = (event: KeyboardEvent & { target: HTMLElement }) => {\n      const { tagName } = event.target || event.srcElement;\n      const isInput = tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';\n      return [13, 38, 40].includes(event.keyCode) || !isInput;\n    };\n\n    key('down', this.currentKeyScope, () => {\n      this.setState(this.selectNextElement);\n      return false;\n    });\n\n    key('up', this.currentKeyScope, () => {\n      this.setState(this.selectPreviousElement);\n      return false;\n    });\n\n    key('return', this.currentKeyScope, () => {\n      if (this.state.active != null) {\n        this.handleSelect(this.state.active);\n      }\n      return false;\n    });\n  };\n\n  detachShortcuts = () => {\n    if (this.previousKeyScope) {\n      key.setScope(this.previousKeyScope);\n    }\n    if (this.currentKeyScope) {\n      key.deleteScope(this.currentKeyScope);\n    }\n    (key as any).filter = this.previousFilter;\n  };\n\n  handleSelect = (item: string) => {\n    this.props.onSelect(item);\n  };\n\n  handleHover = (item: string) => {\n    this.setState({ active: item });\n  };\n\n  selectNextElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx < 0) {\n      return { active: props.items[0] };\n    }\n    return { active: props.items[(idx + 1) % props.items.length] };\n  };\n\n  selectPreviousElement = (state: State, props: Props) => {\n    const idx = props.items.indexOf(state.active);\n    if (idx <= 0) {\n      return { active: props.items[props.items.length - 1] };\n    }\n    return { active: props.items[idx - 1] };\n  };\n\n  renderChild = (child: any) => {\n    if (child == null) {\n      return null;\n    }\n    // do not pass extra props to children like `<li className=\"divider\" />`\n    if (child.type !== SelectListItem) {\n      return child;\n    }\n    return React.cloneElement(child, {\n      active: this.state.active,\n      onHover: this.handleHover,\n      onSelect: this.handleSelect\n    });\n  };\n\n  render() {\n    const { children } = this.props;\n    const hasChildren = React.Children.count(children) > 0;\n    return (\n      <ul className={classNames('menu', this.props.className)}>\n        {hasChildren && React.Children.map(children, this.renderChild)}\n        {!hasChildren &&\n          this.props.items.map(item => (\n            <SelectListItem\n              active={this.state.active}\n              item={item}\n              key={item}\n              onHover={this.handleHover}\n              onSelect={this.handleSelect}\n            />\n          ))}\n      </ul>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport StatusHelper from '../../shared/StatusHelper';\nimport QualifierIcon from '../../icons-components/QualifierIcon';\nimport TagsIcon from '../../icons-components/TagsIcon';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport Avatar from '../../ui/Avatar';\nimport { translate } from '../../../helpers/l10n';\nimport { fileFromPath, limitComponentName } from '../../../helpers/path';\n\ninterface Props {\n  issue: T.Issue;\n  onFilter: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesPopup extends React.PureComponent<Props> {\n  handleSelect = (property: string) => {\n    this.props.onFilter(property, this.props.issue);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const items = [\n      'type',\n      'severity',\n      'status',\n      'resolution',\n      'assignee',\n      'rule',\n      ...(issue.tags || []).map(tag => `tag###${tag}`),\n      'project',\n      issue.subProject ? 'module' : undefined,\n      'file'\n    ].filter(item => item) as string[];\n\n    return (\n      <DropdownOverlay noPadding={true}>\n        <header className=\"menu-search\">\n          <h6>{translate('issue.filter_similar_issues')}</h6>\n        </header>\n\n        <SelectList\n          className=\"issues-similar-issues-menu\"\n          currentItem={items[0]}\n          items={items}\n          onSelect={this.handleSelect}>\n          <SelectListItem item=\"type\">\n            <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n            {translate('issue.type', issue.type)}\n          </SelectListItem>\n\n          <SelectListItem item=\"severity\">\n            <SeverityHelper severity={issue.severity} />\n          </SelectListItem>\n\n          <SelectListItem item=\"status\">\n            <StatusHelper resolution={undefined} status={issue.status} />\n          </SelectListItem>\n\n          <SelectListItem item=\"resolution\">\n            {issue.resolution != null\n              ? translate('issue.resolution', issue.resolution)\n              : translate('unresolved')}\n          </SelectListItem>\n\n          <SelectListItem item=\"assignee\">\n            {issue.assignee != null ? (\n              <span>\n                {translate('assigned_to')}\n                <Avatar\n                  className=\"little-spacer-left little-spacer-right\"\n                  hash={issue.assigneeAvatar}\n                  name={issue.assigneeName || issue.assignee}\n                  size={16}\n                />\n                {issue.assigneeName || issue.assignee}\n              </span>\n            ) : (\n              translate('unassigned')\n            )}\n          </SelectListItem>\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"rule\">{limitComponentName(issue.ruleName)}</SelectListItem>\n\n          {issue.tags != null &&\n            issue.tags.map(tag => (\n              <SelectListItem item={`tag###${tag}`} key={`tag###${tag}`}>\n                <TagsIcon className=\"icon-half-transparent little-spacer-right text-middle\" />\n                <span className=\"text-middle\">{tag}</span>\n              </SelectListItem>\n            ))}\n\n          <li className=\"divider\" />\n\n          <SelectListItem item=\"project\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier=\"TRK\" />\n            {issue.projectName}\n          </SelectListItem>\n\n          {issue.subProject != null && (\n            <SelectListItem item=\"module\">\n              <QualifierIcon className=\"little-spacer-right\" qualifier=\"BRC\" />\n              {issue.subProjectName}\n            </SelectListItem>\n          )}\n\n          <SelectListItem item=\"file\">\n            <QualifierIcon className=\"little-spacer-right\" qualifier={issue.componentQualifier} />\n            {fileFromPath(issue.componentLongName)}\n          </SelectListItem>\n        </SelectList>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport FilterIcon from '../../icons-components/FilterIcon';\nimport SimilarIssuesPopup from '../popups/SimilarIssuesPopup';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  isOpen: boolean;\n  issue: T.Issue;\n  togglePopup: (popup: string, show?: boolean) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n}\n\nexport default class SimilarIssuesFilter extends React.PureComponent<Props> {\n  handleFilter = (property: string, issue: T.Issue) => {\n    this.togglePopup(false);\n    if (this.props.onFilter) {\n      this.props.onFilter(property, issue);\n    }\n  };\n\n  togglePopup = (open?: boolean) => {\n    this.props.togglePopup('similarIssues', open);\n  };\n\n  handleClose = () => {\n    this.togglePopup(false);\n  };\n\n  render() {\n    return (\n      <div className=\"dropdown\">\n        <Toggler\n          onRequestClose={this.handleClose}\n          open={this.props.isOpen}\n          overlay={<SimilarIssuesPopup issue={this.props.issue} onFilter={this.handleFilter} />}>\n          <ButtonLink\n            aria-label={translate('issue.filter_similar_issues')}\n            className=\"issue-action issue-action-with-options js-issue-filter\"\n            onClick={this.togglePopup}\n            title={translate('issue.filter_similar_issues')}>\n            <FilterIcon className=\"icon-half-transparent\" />\n            <DropdownIcon className=\"icon-half-transparent\" />\n          </ButtonLink>\n        </Toggler>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Link } from 'react-router';\nimport IssueChangelog from './IssueChangelog';\nimport IssueMessage from './IssueMessage';\nimport SimilarIssuesFilter from './SimilarIssuesFilter';\nimport LinkIcon from '../../icons-components/LinkIcon';\nimport LocationIndex from '../../common/LocationIndex';\nimport Tooltip from '../../controls/Tooltip';\nimport { getBranchLikeQuery } from '../../../helpers/branches';\nimport { getComponentIssuesUrl } from '../../../helpers/urls';\nimport { formatMeasure } from '../../../helpers/measures';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { WorkspaceContext } from '../../workspace/context';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default function IssueTitleBar(props: Props) {\n  const { issue } = props;\n  const hasSimilarIssuesFilter = props.onFilter != null;\n\n  const locationsCount =\n    issue.secondaryLocations.length +\n    issue.flows.reduce((sum, locations) => sum + locations.length, 0);\n\n  const locationsBadge = (\n    <Tooltip\n      overlay={translateWithParameters(\n        'issue.this_issue_involves_x_code_locations',\n        formatMeasure(locationsCount, 'INT')\n      )}>\n      <LocationIndex>{locationsCount}</LocationIndex>\n    </Tooltip>\n  );\n\n  const displayLocations = props.displayLocationsCount && locationsCount > 0;\n\n  const issueUrl = getComponentIssuesUrl(issue.project, {\n    ...getBranchLikeQuery(props.branchLike),\n    issues: issue.key,\n    open: issue.key,\n    types: issue.type === 'SECURITY_HOTSPOT' ? issue.type : undefined\n  });\n\n  return (\n    <div className=\"issue-row\">\n      <WorkspaceContext.Consumer>\n        {({ openRule }) => (\n          <IssueMessage\n            engine={issue.externalRuleEngine}\n            manualVulnerability={issue.fromHotspot && issue.type === 'VULNERABILITY'}\n            message={issue.message}\n            openRule={openRule}\n            organization={issue.organization}\n            rule={issue.rule}\n          />\n        )}\n      </WorkspaceContext.Consumer>\n\n      <div className=\"issue-row-meta\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueChangelog\n              creationDate={issue.creationDate}\n              isOpen={props.currentPopup === 'changelog'}\n              issue={issue}\n              togglePopup={props.togglePopup}\n            />\n          </li>\n          {issue.textRange != null && (\n            <li className=\"issue-meta\">\n              <span className=\"issue-meta-label\" title={translate('line_number')}>\n                L{issue.textRange.endLine}\n              </span>\n            </li>\n          )}\n          {displayLocations && (\n            <li className=\"issue-meta\">\n              {props.displayLocationsLink ? (\n                <Link target=\"_blank\" to={issueUrl}>\n                  {locationsBadge}\n                </Link>\n              ) : (\n                locationsBadge\n              )}\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <Link\n              className=\"js-issue-permalink link-no-underline\"\n              target=\"_blank\"\n              title={translate('permalink')}\n              to={issueUrl}>\n              <LinkIcon />\n            </Link>\n          </li>\n          {hasSimilarIssuesFilter && (\n            <li className=\"issue-meta\">\n              <SimilarIssuesFilter\n                isOpen={props.currentPopup === 'similarIssues'}\n                issue={issue}\n                onFilter={props.onFilter}\n                togglePopup={props.togglePopup}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { map } from 'lodash';\nimport { connect } from 'react-redux';\nimport Avatar from '../../ui/Avatar';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SearchBox from '../../controls/SearchBox';\nimport { searchMembers } from '../../../api/organizations';\nimport { searchUsers } from '../../../api/users';\nimport { translate } from '../../../helpers/l10n';\nimport { getCurrentUser, Store } from '../../../store/rootReducer';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { isSonarCloud } from '../../../helpers/system';\nimport { isLoggedIn } from '../../../helpers/users';\n\ninterface User {\n  avatar?: string;\n  email?: string;\n  login: string;\n  name: string;\n}\n\ninterface Props {\n  currentUser: T.CurrentUser;\n  issue: Pick<T.Issue, 'projectOrganization'>;\n  onSelect: (login: string) => void;\n}\n\ninterface State {\n  currentUser: string;\n  query: string;\n  users: User[];\n}\n\nconst LIST_SIZE = 10;\n\nclass SetAssigneePopup extends React.PureComponent<Props, State> {\n  defaultUsersArray: User[];\n\n  constructor(props: Props) {\n    super(props);\n    this.defaultUsersArray = [{ login: '', name: translate('unassigned') }];\n\n    if (isLoggedIn(props.currentUser)) {\n      this.defaultUsersArray = [props.currentUser, ...this.defaultUsersArray];\n    }\n\n    this.state = {\n      query: '',\n      users: this.defaultUsersArray,\n      currentUser: this.defaultUsersArray.length > 0 ? this.defaultUsersArray[0].login : ''\n    };\n  }\n\n  searchMembers = (query: string) => {\n    searchMembers({\n      organization: this.props.issue.projectOrganization,\n      q: query,\n      ps: LIST_SIZE\n    }).then(this.handleSearchResult, () => {});\n  };\n\n  searchUsers = (query: string) => {\n    searchUsers({ q: query, ps: LIST_SIZE }).then(this.handleSearchResult, () => {});\n  };\n\n  handleSearchResult = (response: { users: T.OrganizationMember[] }) => {\n    this.setState({\n      users: response.users,\n      currentUser: response.users.length > 0 ? response.users[0].login : ''\n    });\n  };\n\n  handleSearchChange = (query: string) => {\n    if (query.length === 0) {\n      this.setState({\n        query,\n        users: this.defaultUsersArray,\n        currentUser: this.defaultUsersArray[0].login\n      });\n    } else {\n      this.setState({ query });\n      if (isSonarCloud()) {\n        this.searchMembers(query);\n      } else {\n        this.searchUsers(query);\n      }\n    }\n  };\n\n  render() {\n    return (\n      <DropdownOverlay noPadding={true}>\n        <div className=\"multi-select\">\n          <div className=\"menu-search\">\n            <SearchBox\n              autoFocus={true}\n              className=\"little-spacer-top\"\n              minLength={2}\n              onChange={this.handleSearchChange}\n              placeholder={translate('search.search_for_users')}\n              value={this.state.query}\n            />\n          </div>\n          <SelectList\n            currentItem={this.state.currentUser}\n            items={map(this.state.users, 'login')}\n            onSelect={this.props.onSelect}>\n            {this.state.users.map(user => (\n              <SelectListItem item={user.login} key={user.login}>\n                {!!user.login && (\n                  <Avatar className=\"spacer-right\" hash={user.avatar} name={user.name} size={16} />\n                )}\n                <span\n                  className=\"vertical-middle\"\n                  style={{ marginLeft: !user.login ? 24 : undefined }}>\n                  {user.name}\n                </span>\n              </SelectListItem>\n            ))}\n          </SelectList>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n\nconst mapStateToProps = (state: Store) => ({\n  currentUser: getCurrentUser(state)\n});\n\nexport default connect(mapStateToProps)(SetAssigneePopup);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Avatar from '../../ui/Avatar';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport SetAssigneePopup from '../popups/SetAssigneePopup';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { translate } from '../../../helpers/l10n';\n\ninterface Props {\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'assignee' | 'assigneeAvatar' | 'assigneeName' | 'projectOrganization'>;\n  canAssign: boolean;\n  onAssign: (login: string) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueAssign extends React.PureComponent<Props> {\n  toggleAssign = (open?: boolean) => {\n    this.props.togglePopup('assign', open);\n  };\n\n  handleClose = () => {\n    this.toggleAssign(false);\n  };\n\n  renderAssignee() {\n    const { issue } = this.props;\n    return (\n      <span>\n        {issue.assignee && (\n          <span className=\"text-top\">\n            <Avatar\n              className=\"little-spacer-right\"\n              hash={issue.assigneeAvatar}\n              name={issue.assigneeName || issue.assignee}\n              size={16}\n            />\n          </span>\n        )}\n        <span className=\"issue-meta-label\">\n          {issue.assignee ? issue.assigneeName || issue.assignee : translate('unassigned')}\n        </span>\n      </span>\n    );\n  }\n\n  render() {\n    if (this.props.canAssign) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            closeOnEscape={true}\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canAssign}\n            overlay={<SetAssigneePopup issue={this.props.issue} onSelect={this.props.onAssign} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-assign\"\n              onClick={this.toggleAssign}>\n              {this.renderAssignee()}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return this.renderAssignee();\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport MarkdownTips from '../../common/MarkdownTips';\nimport { Button, ResetButtonLink } from '../../ui/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  comment?: Pick<T.IssueComment, 'markdown'>;\n  onComment: (text: string) => void;\n  toggleComment: (visible: boolean) => void;\n  placeholder: string;\n  placement?: PopupPlacement;\n  autoTriggered?: boolean;\n}\n\ninterface State {\n  textComment: string;\n}\n\nexport default class CommentPopup extends React.PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      textComment: props.comment ? props.comment.markdown : ''\n    };\n  }\n\n  handleCommentChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({ textComment: event.target.value });\n  };\n\n  handleCommentClick = () => {\n    if (this.state.textComment.trim().length > 0) {\n      this.props.onComment(this.state.textComment);\n    }\n  };\n\n  handleCancelClick = () => {\n    this.props.toggleComment(false);\n  };\n\n  handleKeyboard = (event: React.KeyboardEvent) => {\n    if (event.keyCode === 13 && (event.metaKey || event.ctrlKey)) {\n      // Ctrl + Enter\n      this.handleCommentClick();\n    } else if ([37, 38, 39, 40].includes(event.keyCode)) {\n      // Arrow keys\n      event.stopPropagation();\n    }\n  };\n\n  render() {\n    const { comment, autoTriggered } = this.props;\n    return (\n      <DropdownOverlay placement={this.props.placement}>\n        <div className=\"issue-comment-bubble-popup\">\n          <div className=\"issue-comment-form-text\">\n            <textarea\n              autoFocus={true}\n              onChange={this.handleCommentChange}\n              onKeyDown={this.handleKeyboard}\n              placeholder={this.props.placeholder}\n              rows={2}\n              value={this.state.textComment}\n            />\n          </div>\n          <div className=\"issue-comment-form-footer\">\n            <div className=\"issue-comment-form-actions\">\n              <Button\n                className=\"js-issue-comment-submit little-spacer-right\"\n                disabled={this.state.textComment.trim().length < 1}\n                onClick={this.handleCommentClick}>\n                {comment && translate('save')}\n                {!comment && translate('issue.comment.submit')}\n              </Button>\n              <ResetButtonLink className=\"js-issue-comment-cancel\" onClick={this.handleCancelClick}>\n                {autoTriggered ? translate('skip') : translate('cancel')}\n              </ResetButtonLink>\n            </div>\n            <div className=\"issue-comment-form-tips\">\n              <MarkdownTips />\n            </div>\n          </div>\n        </div>\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport CommentPopup from '../popups/CommentPopup';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { addIssueComment } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport { updateIssue } from '../actions';\n\ninterface Props {\n  commentAutoTriggered?: boolean;\n  commentPlaceholder: string;\n  currentPopup?: string;\n  issueKey: string;\n  onChange: (issue: T.Issue) => void;\n  toggleComment: (open?: boolean, placeholder?: string, autoTriggered?: boolean) => void;\n}\n\nexport default class IssueCommentAction extends React.PureComponent<Props> {\n  addComment = (text: string) => {\n    updateIssue(this.props.onChange, addIssueComment({ issue: this.props.issueKey, text }));\n    this.props.toggleComment(false);\n  };\n\n  handleCommentClick = () => {\n    this.props.toggleComment();\n  };\n\n  handleClose = () => {\n    this.props.toggleComment(false);\n  };\n\n  render() {\n    return (\n      <li className=\"issue-meta dropdown\">\n        <Toggler\n          closeOnClickOutside={false}\n          onRequestClose={this.handleClose}\n          open={this.props.currentPopup === 'comment'}\n          overlay={\n            <CommentPopup\n              autoTriggered={this.props.commentAutoTriggered}\n              onComment={this.addComment}\n              placeholder={this.props.commentPlaceholder}\n              toggleComment={this.props.toggleComment}\n            />\n          }>\n          <ButtonLink className=\"issue-action js-issue-comment\" onClick={this.handleCommentClick}>\n            <span className=\"issue-meta-label\">{translate('issue.comment.formlink')}</span>\n          </ButtonLink>\n        </Toggler>\n      </li>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport SeverityIcon from '../../icons-components/SeverityIcon';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n\ntype Props = {\n  issue: Pick<T.Issue, 'severity'>;\n  onSelect: (severity: string) => void;\n};\n\nconst SEVERITY = ['BLOCKER', 'CRITICAL', 'MAJOR', 'MINOR', 'INFO'];\n\nexport default function SetSeverityPopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.severity} items={SEVERITY} onSelect={onSelect}>\n        {SEVERITY.map(severity => (\n          <SelectListItem item={severity} key={severity}>\n            <SeverityIcon className=\"little-spacer-right\" severity={severity} />\n            {translate('severity', severity)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport SetSeverityPopup from '../popups/SetSeverityPopup';\nimport SeverityHelper from '../../shared/SeverityHelper';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { setIssueSeverity, IssueResponse } from '../../../api/issues';\nimport { RawQuery } from '../../../helpers/query';\n\ninterface Props {\n  canSetSeverity: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'severity'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueSeverity extends React.PureComponent<Props> {\n  toggleSetSeverity = (open?: boolean) => {\n    this.props.togglePopup('set-severity', open);\n  };\n\n  setSeverity = (severity: string) => {\n    this.props.setIssueProperty('severity', 'set-severity', setIssueSeverity, severity);\n  };\n\n  handleClose = () => {\n    this.toggleSetSeverity(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetSeverity) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetSeverity}\n            overlay={<SetSeverityPopup issue={issue} onSelect={this.setSeverity} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-severity\"\n              onClick={this.toggleSetSeverity}>\n              <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return <SeverityHelper className=\"issue-meta-label\" severity={issue.severity} />;\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { difference, without } from 'lodash';\nimport TagsSelector from '../../tags/TagsSelector';\nimport { searchIssueTags } from '../../../api/issues';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  organization: string;\n  selectedTags: string[];\n  setTags: (tags: string[]) => void;\n}\n\ninterface State {\n  searchResult: string[];\n}\n\nconst LIST_SIZE = 10;\n\nexport default class SetIssueTagsPopup extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { searchResult: [] };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onSearch = (query: string) => {\n    return searchIssueTags({\n      q: query,\n      ps: Math.min(this.props.selectedTags.length - 1 + LIST_SIZE, 100),\n      organization: this.props.organization\n    }).then(\n      (tags: string[]) => {\n        if (this.mounted) {\n          this.setState({ searchResult: tags });\n        }\n      },\n      () => {}\n    );\n  };\n\n  onSelect = (tag: string) => {\n    this.props.setTags([...this.props.selectedTags, tag]);\n  };\n\n  onUnselect = (tag: string) => {\n    this.props.setTags(without(this.props.selectedTags, tag));\n  };\n\n  render() {\n    const availableTags = difference(this.state.searchResult, this.props.selectedTags);\n    return (\n      <DropdownOverlay placement={PopupPlacement.BottomRight}>\n        <TagsSelector\n          listSize={LIST_SIZE}\n          onSearch={this.onSearch}\n          onSelect={this.onSelect}\n          onUnselect={this.onUnselect}\n          selectedTags={this.props.selectedTags}\n          tags={availableTags}\n        />\n      </DropdownOverlay>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SetIssueTagsPopup from '../popups/SetIssueTagsPopup';\nimport TagsList from '../../tags/TagsList';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { setIssueTags } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport { updateIssue } from '../actions';\n\ninterface Props {\n  canSetTags: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'projectOrganization' | 'tags'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTags extends React.PureComponent<Props> {\n  toggleSetTags = (open?: boolean) => {\n    this.props.togglePopup('edit-tags', open);\n  };\n\n  setTags = (tags: string[]) => {\n    const { issue } = this.props;\n    const newIssue = { ...issue, tags };\n    updateIssue(\n      this.props.onChange,\n      setIssueTags({ issue: issue.key, tags: tags.join(',') }),\n      issue as T.Issue,\n      newIssue as T.Issue\n    );\n  };\n\n  handleClose = () => {\n    this.toggleSetTags(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    const { tags = [] } = issue;\n\n    if (this.props.canSetTags) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen}\n            overlay={\n              <SetIssueTagsPopup\n                organization={issue.projectOrganization}\n                selectedTags={tags}\n                setTags={this.setTags}\n              />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-edit-tags\"\n              onClick={this.toggleSetTags}>\n              <TagsList\n                allowUpdate={this.props.canSetTags}\n                tags={\n                  issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]\n                }\n              />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <TagsList\n          allowUpdate={this.props.canSetTags}\n          className=\"note\"\n          tags={issue.tags && issue.tags.length > 0 ? issue.tags : [translate('issue.no_tag')]}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { translate } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n\ninterface Props {\n  onSelect: (transition: string) => void;\n  transitions: string[];\n}\n\nexport default function SetTransitionPopup({ onSelect, transitions }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={transitions[0]} items={transitions} onSelect={onSelect}>\n        {transitions.map(transition => {\n          return (\n            <SelectListItem\n              item={transition}\n              key={transition}\n              title={translate('issue.transition', transition, 'description')}>\n              {translate('issue.transition', transition)}\n            </SelectListItem>\n          );\n        })}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport SetTransitionPopup from '../popups/SetTransitionPopup';\nimport StatusHelper from '../../shared/StatusHelper';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { setIssueTransition } from '../../../api/issues';\nimport { updateIssue } from '../actions';\n\ninterface Props {\n  hasTransitions: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'key' | 'resolution' | 'status' | 'transitions'>;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueTransition extends React.PureComponent<Props> {\n  setTransition = (transition: string) => {\n    updateIssue(\n      this.props.onChange,\n      setIssueTransition({ issue: this.props.issue.key, transition })\n    );\n    this.toggleSetTransition();\n  };\n\n  toggleSetTransition = (open?: boolean) => {\n    this.props.togglePopup('transition', open);\n  };\n\n  handleClose = () => {\n    this.toggleSetTransition(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    if (this.props.hasTransitions) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.hasTransitions}\n            overlay={\n              <SetTransitionPopup onSelect={this.setTransition} transitions={issue.transitions} />\n            }>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-transition\"\n              onClick={this.toggleSetTransition}>\n              <StatusHelper\n                className=\"issue-meta-label\"\n                resolution={issue.resolution}\n                status={issue.status}\n              />\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <StatusHelper\n          className=\"issue-meta-label\"\n          resolution={issue.resolution}\n          status={issue.status}\n        />\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../../helpers/l10n';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport SelectList from '../../common/SelectList';\nimport SelectListItem from '../../common/SelectListItem';\nimport { DropdownOverlay } from '../../controls/Dropdown';\n\ninterface Props {\n  issue: Pick<T.Issue, 'type'>;\n  onSelect: (type: T.IssueType) => void;\n}\n\nconst TYPES = ['BUG', 'VULNERABILITY', 'CODE_SMELL'];\n\nexport default function SetTypePopup({ issue, onSelect }: Props) {\n  return (\n    <DropdownOverlay>\n      <SelectList currentItem={issue.type} items={TYPES} onSelect={onSelect}>\n        {TYPES.map(type => (\n          <SelectListItem item={type} key={type}>\n            <IssueTypeIcon className=\"little-spacer-right\" query={type} />\n            {translate('issue.type', type)}\n          </SelectListItem>\n        ))}\n      </SelectList>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport DropdownIcon from '../../icons-components/DropdownIcon';\nimport IssueTypeIcon from '../../ui/IssueTypeIcon';\nimport SetTypePopup from '../popups/SetTypePopup';\nimport Toggler from '../../controls/Toggler';\nimport { ButtonLink } from '../../ui/buttons';\nimport { setIssueType, IssueResponse } from '../../../api/issues';\nimport { translate } from '../../../helpers/l10n';\nimport { RawQuery } from '../../../helpers/query';\n\ninterface Props {\n  canSetType: boolean;\n  isOpen: boolean;\n  issue: Pick<T.Issue, 'type'>;\n  setIssueProperty: (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\nexport default class IssueType extends React.PureComponent<Props> {\n  toggleSetType = (open?: boolean) => {\n    this.props.togglePopup('set-type', open);\n  };\n\n  setType = (type: string) => {\n    this.props.setIssueProperty('type', 'set-type', setIssueType, type);\n  };\n\n  handleClose = () => {\n    this.toggleSetType(false);\n  };\n\n  render() {\n    const { issue } = this.props;\n    if (this.props.canSetType) {\n      return (\n        <div className=\"dropdown\">\n          <Toggler\n            onRequestClose={this.handleClose}\n            open={this.props.isOpen && this.props.canSetType}\n            overlay={<SetTypePopup issue={issue} onSelect={this.setType} />}>\n            <ButtonLink\n              className=\"issue-action issue-action-with-options js-issue-set-type\"\n              onClick={this.toggleSetType}>\n              <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n              {translate('issue.type', issue.type)}\n              <DropdownIcon className=\"little-spacer-left\" />\n            </ButtonLink>\n          </Toggler>\n        </div>\n      );\n    } else {\n      return (\n        <span>\n          <IssueTypeIcon className=\"little-spacer-right\" query={issue.type} />\n          {translate('issue.type', issue.type)}\n        </span>\n      );\n    }\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport IssueAssign from './IssueAssign';\nimport IssueCommentAction from './IssueCommentAction';\nimport IssueSeverity from './IssueSeverity';\nimport IssueTags from './IssueTags';\nimport IssueTransition from './IssueTransition';\nimport IssueType from './IssueType';\nimport { updateIssue } from '../actions';\nimport { translate, translateWithParameters } from '../../../helpers/l10n';\nimport { RawQuery } from '../../../helpers/query';\nimport { IssueResponse } from '../../../api/issues';\n\ninterface Props {\n  issue: T.Issue;\n  currentPopup?: string;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  togglePopup: (popup: string, show?: boolean) => void;\n}\n\ninterface State {\n  commentAutoTriggered: boolean;\n  commentPlaceholder: string;\n}\n\nexport default class IssueActionsBar extends React.PureComponent<Props, State> {\n  state: State = {\n    commentAutoTriggered: false,\n    commentPlaceholder: ''\n  };\n\n  setIssueProperty = (\n    property: keyof T.Issue,\n    popup: string,\n    apiCall: (query: RawQuery) => Promise<IssueResponse>,\n    value: string\n  ) => {\n    const { issue } = this.props;\n    if (issue[property] !== value) {\n      const newIssue = { ...issue, [property]: value };\n      updateIssue(\n        this.props.onChange,\n        apiCall({ issue: issue.key, [property]: value }),\n        issue,\n        newIssue\n      );\n    }\n    this.props.togglePopup(popup, false);\n  };\n\n  toggleComment = (open: boolean | undefined, placeholder = '', autoTriggered = false) => {\n    this.setState({\n      commentPlaceholder: placeholder,\n      commentAutoTriggered: autoTriggered\n    });\n    this.props.togglePopup('comment', open);\n  };\n\n  handleTransition = (issue: T.Issue) => {\n    this.props.onChange(issue);\n    if (\n      issue.resolution === 'FALSE-POSITIVE' ||\n      (issue.resolution === 'WONTFIX' && issue.type !== 'SECURITY_HOTSPOT')\n    ) {\n      this.toggleComment(true, translate('issue.comment.explain_why'), true);\n    }\n  };\n\n  render() {\n    const { issue } = this.props;\n    const canAssign = issue.actions.includes('assign');\n    const canComment = issue.actions.includes('comment');\n    const canSetSeverity = issue.actions.includes('set_severity');\n    const canSetType = issue.actions.includes('set_type');\n    const canSetTags = issue.actions.includes('set_tags');\n    const hasTransitions = issue.transitions && issue.transitions.length > 0;\n    const isSecurityHotspot = issue.type === 'SECURITY_HOTSPOT';\n\n    return (\n      <div className=\"issue-actions\">\n        <ul className=\"issue-meta-list\">\n          <li className=\"issue-meta\">\n            <IssueType\n              canSetType={canSetType}\n              isOpen={this.props.currentPopup === 'set-type' && canSetType}\n              issue={issue}\n              setIssueProperty={this.setIssueProperty}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueSeverity\n                canSetSeverity={canSetSeverity}\n                isOpen={this.props.currentPopup === 'set-severity' && canSetSeverity}\n                issue={issue}\n                setIssueProperty={this.setIssueProperty}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          <li className=\"issue-meta\">\n            <IssueTransition\n              hasTransitions={hasTransitions}\n              isOpen={this.props.currentPopup === 'transition' && hasTransitions}\n              issue={issue}\n              onChange={this.handleTransition}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n          {!isSecurityHotspot && (\n            <li className=\"issue-meta\">\n              <IssueAssign\n                canAssign={canAssign}\n                isOpen={this.props.currentPopup === 'assign' && canAssign}\n                issue={issue}\n                onAssign={this.props.onAssign}\n                togglePopup={this.props.togglePopup}\n              />\n            </li>\n          )}\n          {!isSecurityHotspot &&\n            issue.effort && (\n              <li className=\"issue-meta\">\n                <span className=\"issue-meta-label\">\n                  {translateWithParameters('issue.x_effort', issue.effort)}\n                </span>\n              </li>\n            )}\n          {canComment && (\n            <IssueCommentAction\n              commentAutoTriggered={this.state.commentAutoTriggered}\n              commentPlaceholder={this.state.commentPlaceholder}\n              currentPopup={this.props.currentPopup}\n              issueKey={issue.key}\n              onChange={this.props.onChange}\n              toggleComment={this.toggleComment}\n            />\n          )}\n        </ul>\n        <ul className=\"list-inline\">\n          <li className=\"issue-meta js-issue-tags\">\n            <IssueTags\n              canSetTags={canSetTags}\n              isOpen={this.props.currentPopup === 'edit-tags' && canSetTags}\n              issue={issue}\n              onChange={this.props.onChange}\n              togglePopup={this.props.togglePopup}\n            />\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Button } from '../../ui/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport { DropdownOverlay } from '../../controls/Dropdown';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  onDelete: () => void;\n}\n\nexport default function CommentDeletePopup({ onDelete }: Props) {\n  return (\n    <DropdownOverlay placement={PopupPlacement.BottomRight}>\n      <div className=\"menu is-container\">\n        <div className=\"spacer-bottom\">{translate('issue.comment.delete_confirm_message')}</div>\n        <Button className=\"button-red\" onClick={onDelete}>\n          {translate('delete')}\n        </Button>\n      </div>\n    </DropdownOverlay>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Avatar from '../../ui/Avatar';\nimport Toggler from '../../controls/Toggler';\nimport { EditButton, DeleteButton } from '../../ui/buttons';\nimport CommentDeletePopup from '../popups/CommentDeletePopup';\nimport CommentPopup from '../popups/CommentPopup';\nimport DateFromNow from '../../intl/DateFromNow';\nimport { PopupPlacement } from '../../ui/popups';\n\ninterface Props {\n  comment: T.IssueComment;\n  onDelete: (comment: string) => void;\n  onEdit: (comment: string, text: string) => void;\n}\n\ninterface State {\n  openPopup: string;\n}\n\nexport default class IssueCommentLine extends React.PureComponent<Props, State> {\n  state: State = {\n    openPopup: ''\n  };\n\n  handleEdit = (text: string) => {\n    this.props.onEdit(this.props.comment.key, text);\n    this.toggleEditPopup(false);\n  };\n\n  handleDelete = () => {\n    this.props.onDelete(this.props.comment.key);\n    this.toggleDeletePopup(false);\n  };\n\n  togglePopup = (popupName: string, force?: boolean) => {\n    this.setState(prevState => {\n      if (prevState.openPopup !== popupName && force !== false) {\n        return { openPopup: popupName };\n      } else if (prevState.openPopup === popupName && force !== true) {\n        return { openPopup: '' };\n      }\n      return prevState;\n    });\n  };\n\n  toggleDeletePopup = (force?: boolean) => {\n    this.togglePopup('delete', force);\n  };\n\n  toggleEditPopup = (force?: boolean) => {\n    this.togglePopup('edit', force);\n  };\n\n  closePopups = () => {\n    this.setState({ openPopup: '' });\n  };\n\n  render() {\n    const { comment } = this.props;\n    return (\n      <div className=\"issue-comment\">\n        <div className=\"issue-comment-author\" title={comment.authorName}>\n          <Avatar\n            className=\"little-spacer-right\"\n            hash={comment.authorAvatar}\n            name={comment.authorName || comment.author}\n            size={16}\n          />\n          {comment.authorName || comment.author}\n        </div>\n        <div\n          className=\"issue-comment-text markdown\"\n          dangerouslySetInnerHTML={{ __html: comment.htmlText }}\n        />\n        <div className=\"issue-comment-age\">\n          <DateFromNow date={comment.createdAt} />\n        </div>\n        <div className=\"issue-comment-actions\">\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                closeOnClickOutside={false}\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'edit'}\n                overlay={\n                  <CommentPopup\n                    comment={comment}\n                    onComment={this.handleEdit}\n                    placeholder=\"\"\n                    placement={PopupPlacement.BottomRight}\n                    toggleComment={this.toggleEditPopup}\n                  />\n                }>\n                <EditButton\n                  className=\"js-issue-comment-edit button-small\"\n                  onClick={this.toggleEditPopup}\n                />\n              </Toggler>\n            </div>\n          )}\n          {comment.updatable && (\n            <div className=\"dropdown\">\n              <Toggler\n                onRequestClose={this.closePopups}\n                open={this.state.openPopup === 'delete'}\n                overlay={<CommentDeletePopup onDelete={this.handleDelete} />}>\n                <DeleteButton\n                  className=\"js-issue-comment-delete button-small\"\n                  onClick={this.toggleDeletePopup}\n                />\n              </Toggler>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { updateIssue } from './actions';\nimport IssueTitleBar from './components/IssueTitleBar';\nimport IssueActionsBar from './components/IssueActionsBar';\nimport IssueCommentLine from './components/IssueCommentLine';\nimport Checkbox from '../controls/Checkbox';\nimport { deleteIssueComment, editIssueComment } from '../../api/issues';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  checked?: boolean;\n  currentPopup?: string;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onAssign: (login: string) => void;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  selected: boolean;\n  togglePopup: (popup: string, show: boolean | void) => void;\n}\n\nexport default class IssueView extends React.PureComponent<Props> {\n  handleCheck = (_checked: boolean) => {\n    if (this.props.onCheck) {\n      this.props.onCheck(this.props.issue.key);\n    }\n  };\n\n  handleClick = (event: React.MouseEvent) => {\n    if (!isClickable(event.target as HTMLElement) && this.props.onClick) {\n      event.preventDefault();\n      this.props.onClick(this.props.issue.key);\n    }\n  };\n\n  editComment = (comment: string, text: string) => {\n    updateIssue(this.props.onChange, editIssueComment({ comment, text }));\n  };\n\n  deleteComment = (comment: string) => {\n    updateIssue(this.props.onChange, deleteIssueComment({ comment }));\n  };\n\n  render() {\n    const { issue } = this.props;\n\n    const hasCheckbox = this.props.onCheck != null;\n\n    const issueClass = classNames('issue', {\n      'issue-with-checkbox': hasCheckbox,\n      selected: this.props.selected\n    });\n\n    return (\n      <div\n        className={issueClass}\n        data-issue={issue.key}\n        onClick={this.handleClick}\n        role=\"listitem\"\n        tabIndex={0}>\n        <IssueTitleBar\n          branchLike={this.props.branchLike}\n          currentPopup={this.props.currentPopup}\n          displayLocationsCount={this.props.displayLocationsCount}\n          displayLocationsLink={this.props.displayLocationsLink}\n          issue={issue}\n          onFilter={this.props.onFilter}\n          togglePopup={this.props.togglePopup}\n        />\n        <IssueActionsBar\n          currentPopup={this.props.currentPopup}\n          issue={issue}\n          onAssign={this.props.onAssign}\n          onChange={this.props.onChange}\n          togglePopup={this.props.togglePopup}\n        />\n        {issue.comments &&\n          issue.comments.length > 0 && (\n            <div className=\"issue-comments\">\n              {issue.comments.map(comment => (\n                <IssueCommentLine\n                  comment={comment}\n                  key={comment.key}\n                  onDelete={this.deleteComment}\n                  onEdit={this.editComment}\n                />\n              ))}\n            </div>\n          )}\n        {hasCheckbox && (\n          <>\n            <Checkbox\n              checked={this.props.checked || false}\n              className=\"issue-checkbox-container\"\n              onCheck={this.handleCheck}\n            />\n          </>\n        )}\n      </div>\n    );\n  }\n}\n\nfunction isClickable(node: HTMLElement | undefined | null): boolean {\n  if (!node) {\n    return false;\n  }\n  const clickableTags = ['A', 'BUTTON', 'INPUT', 'TEXTAREA'];\n  const tagName = (node.tagName || '').toUpperCase();\n  return clickableTags.includes(tagName) || isClickable(node.parentElement);\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as key from 'keymaster';\nimport IssueView from './IssueView';\nimport { updateIssue } from './actions';\nimport { setIssueAssignee } from '../../api/issues';\nimport './Issue.css';\n\ninterface Props {\n  branchLike?: T.BranchLike;\n  checked?: boolean;\n  displayLocationsCount?: boolean;\n  displayLocationsLink?: boolean;\n  issue: T.Issue;\n  onChange: (issue: T.Issue) => void;\n  onCheck?: (issue: string) => void;\n  onClick: (issueKey: string) => void;\n  onFilter?: (property: string, issue: T.Issue) => void;\n  onPopupToggle: (issue: string, popupName: string, open?: boolean) => void;\n  openPopup?: string;\n  selected: boolean;\n}\n\nexport default class Issue extends React.PureComponent<Props> {\n  static defaultProps = {\n    displayLocationsCount: true,\n    displayLocationsLink: true,\n    selected: false\n  };\n\n  componentDidMount() {\n    if (this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUpdate(nextProps: Props) {\n    if (!nextProps.selected && this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.selected && this.props.selected) {\n      this.bindShortcuts();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.selected) {\n      this.unbindShortcuts();\n    }\n  }\n\n  bindShortcuts() {\n    key('f', 'issues', () => {\n      this.togglePopup('transition');\n      return false;\n    });\n    key('a', 'issues', () => {\n      this.togglePopup('assign');\n      return false;\n    });\n    key('m', 'issues', () => {\n      if (this.props.issue.actions.includes('assign')) {\n        this.handleAssignement('_me');\n      }\n      return false;\n    });\n    key('i', 'issues', () => {\n      this.togglePopup('set-severity');\n      return false;\n    });\n    key('c', 'issues', () => {\n      this.togglePopup('comment');\n      return false;\n    });\n    key('t', 'issues', () => {\n      this.togglePopup('edit-tags');\n      return false;\n    });\n    key('space', 'issues', () => {\n      if (this.props.onCheck) {\n        this.props.onCheck(this.props.issue.key);\n        return false;\n      }\n      return undefined;\n    });\n  }\n\n  unbindShortcuts() {\n    key.unbind('f', 'issues');\n    key.unbind('a', 'issues');\n    key.unbind('m', 'issues');\n    key.unbind('i', 'issues');\n    key.unbind('c', 'issues');\n    key.unbind('space', 'issues');\n    key.unbind('t', 'issues');\n  }\n\n  togglePopup = (popupName: string, open?: boolean) => {\n    this.props.onPopupToggle(this.props.issue.key, popupName, open);\n  };\n\n  handleAssignement = (login: string) => {\n    const { issue } = this.props;\n    if (issue.assignee !== login) {\n      updateIssue(this.props.onChange, setIssueAssignee({ issue: issue.key, assignee: login }));\n    }\n    this.togglePopup('assign', false);\n  };\n\n  render() {\n    return (\n      <IssueView\n        branchLike={this.props.branchLike}\n        checked={this.props.checked}\n        currentPopup={this.props.openPopup}\n        displayLocationsCount={this.props.displayLocationsCount}\n        displayLocationsLink={this.props.displayLocationsLink}\n        issue={this.props.issue}\n        onAssign={this.handleAssignement}\n        onChange={this.props.onChange}\n        onCheck={this.props.onCheck}\n        onClick={this.props.onClick}\n        onFilter={this.props.onFilter}\n        selected={this.props.selected}\n        togglePopup={this.togglePopup}\n      />\n    );\n  }\n}\n"],"sourceRoot":""}