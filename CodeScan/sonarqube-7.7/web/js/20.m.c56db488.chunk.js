(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1668:function(e,s,t){"use strict";t.r(s);var o=t(409),r=t.n(o),i=t(354),n=t(371),a=t.n(n),l=t(0);class p extends i.PureComponent{render(){const e=this.props.organization?Object(l.l)("permissions.page"):Object(l.l)("global_permissions.page"),s=this.props.organization?Object(l.l)("organization_permissions.page.description"):Object(l.l)("global_permissions.page.description");return i.createElement("header",{className:"page-header"},i.createElement("h1",{className:"page-title"},e),this.props.loading&&i.createElement("i",{className:"spinner"}),i.createElement("div",{className:"page-description"},s))}}var u=t(364),h=t(743),c=t(753),g=t(396),m=t(484),d=t(367);var f=Object(u.connect)(e=>({appState:Object(d.getAppState)(e)}))(class extends i.PureComponent{constructor(){super(...arguments),this.handleToggleUser=((e,s)=>e.permissions.includes(s)?this.props.revokePermissionFromUser(e.login,s):this.props.grantPermissionToUser(e.login,s)),this.handleToggleGroup=((e,s)=>e.permissions.includes(s)?this.props.revokePermissionFromGroup(e.name,s):this.props.grantPermissionToGroup(e.name,s))}render(){const e=this.props,s=e.filter,t=e.groups,o=e.groupsPaging,r=e.users,n=e.usersPaging,a=this.props.organization?"organizations_permissions":"global_permissions",l=this.props.appState.qualifiers.includes("VW"),p=Object(m.e)(l?m.d:m.c,a);let u=0,d=0;return"users"!==s&&(u+=t.length,d+=o?o.total:t.length),"groups"!==s&&(u+=r.length,d+=n?n.total:r.length),i.createElement(i.Fragment,null,i.createElement(c.a,{filter:this.props.filter,groups:this.props.groups,loading:this.props.loading,onToggleGroup:this.handleToggleGroup,onToggleUser:this.handleToggleUser,permissions:p,query:this.props.query,users:this.props.users},i.createElement(h.a,{filter:this.props.filter,onFilter:this.props.onFilter,onSearch:this.props.onSearch,query:this.props.query})),i.createElement(g.a,{count:u,loadMore:this.props.onLoadMore,total:d}))}}),v=t(496),b=t(376),P=t(579);t(744);t.d(s,"App",function(){return y});class y extends i.PureComponent{constructor(e){super(e),this.mounted=!1,this.loadUsersAndGroups=((e,s)=>{const t=this.props.organization,o=this.state,r=o.filter,i=o.query,n="groups"!==r?v.i({q:i||void 0,organization:t&&t.key,p:e}):Promise.resolve({paging:void 0,users:[]}),a="users"!==r?v.h({q:i||void 0,organization:t&&t.key,p:s}):Promise.resolve({paging:void 0,groups:[]});return Promise.all([n,a])}),this.loadHolders=(()=>(this.setState({loading:!0}),this.loadUsersAndGroups().then(([e,s])=>{this.mounted&&this.setState({groups:s.groups,groupsPaging:s.paging,loading:!1,users:e.users,usersPaging:e.paging})},this.stopLoading))),this.onLoadMore=(()=>{const e=this.state,s=e.usersPaging,t=e.groupsPaging;return this.setState({loading:!0}),this.loadUsersAndGroups(s?s.pageIndex+1:1,t?t.pageIndex+1:1).then(([e,s])=>{this.mounted&&this.setState(({groups:t,users:o})=>({groups:[...t,...s.groups],groupsPaging:s.paging,loading:!1,users:[...o,...e.users],usersPaging:e.paging}))},this.stopLoading)}),this.onFilter=(e=>{this.setState({filter:e},this.loadHolders)}),this.onSearch=(e=>{this.setState({query:e},this.loadHolders)}),this.addPermissionToGroup=((e,s,t)=>e.map(e=>e.name===s?Object.assign({},e,{permissions:[...e.permissions,t]}):e)),this.addPermissionToUser=((e,s,t)=>e.map(e=>e.login===s?Object.assign({},e,{permissions:[...e.permissions,t]}):e)),this.removePermissionFromGroup=((e,s,t)=>e.map(e=>e.name===s?Object.assign({},e,{permissions:r()(e.permissions,t)}):e)),this.removePermissionFromUser=((e,s,t)=>e.map(e=>e.login===s?Object.assign({},e,{permissions:r()(e.permissions,t)}):e)),this.grantPermissionToGroup=((e,s)=>this.mounted?(this.setState(({groups:t})=>({groups:this.addPermissionToGroup(t,e,s)})),v.o({groupName:e,permission:s,organization:this.props.organization&&this.props.organization.key}).then(()=>{},()=>{this.mounted&&this.setState(({groups:t})=>({groups:this.removePermissionFromGroup(t,e,s)}))})):Promise.resolve()),this.grantPermissionToUser=((e,s)=>this.mounted?(this.setState(({users:t})=>({users:this.addPermissionToUser(t,e,s)})),v.p({login:e,permission:s,organization:this.props.organization&&this.props.organization.key}).then(()=>{},()=>{this.mounted&&this.setState(({users:t})=>({users:this.removePermissionFromUser(t,e,s)}))})):Promise.resolve()),this.revokePermissionFromGroup=((e,s)=>this.mounted?(this.setState(({groups:t})=>({groups:this.removePermissionFromGroup(t,e,s)})),v.t({groupName:e,permission:s,organization:this.props.organization&&this.props.organization.key}).then(()=>{},()=>{this.mounted&&this.setState(({groups:t})=>({groups:this.addPermissionToGroup(t,e,s)}))})):Promise.resolve()),this.revokePermissionFromUser=((e,s)=>this.mounted?(this.setState(({users:t})=>({users:this.removePermissionFromUser(t,e,s)})),v.u({login:e,permission:s,organization:this.props.organization&&this.props.organization.key}).then(()=>{},()=>{this.mounted&&this.setState(({users:t})=>({users:this.addPermissionToUser(t,e,s)}))})):Promise.resolve()),this.stopLoading=(()=>{this.mounted&&this.setState({loading:!1})}),this.state={filter:"all",groups:[],loading:!0,query:"",users:[]}}componentDidMount(){this.mounted=!0,this.loadHolders()}componentWillUnmount(){this.mounted=!1}render(){return i.createElement("div",{className:"page page-limited"},i.createElement(b.a,{suggestions:"global_permissions"}),i.createElement(a.a,{title:Object(l.l)("global_permissions.permission")}),i.createElement(p,{loading:this.state.loading,organization:this.props.organization}),i.createElement(f,{filter:this.state.filter,grantPermissionToGroup:this.grantPermissionToGroup,grantPermissionToUser:this.grantPermissionToUser,groups:this.state.groups,groupsPaging:this.state.groupsPaging,loadHolders:this.loadHolders,loading:this.state.loading,onFilter:this.onFilter,onLoadMore:this.onLoadMore,onSearch:this.onSearch,query:this.state.query,revokePermissionFromGroup:this.revokePermissionFromGroup,revokePermissionFromUser:this.revokePermissionFromUser,users:this.state.users,usersPaging:this.state.usersPaging}))}}s.default=Object(P.a)(y)},373:function(e,s,t){"use strict";t.d(s,"a",function(){return l});var o=t(354),r=t(355),i=t(363),n=t(413),a=t(361);t(383);function l(e){const s=e.children,t=void 0===s?o.createElement(n.a,{fill:a.gray71,size:12}):s,l=e.tagName,p=void 0===l?"div":l;return o.createElement(p,{className:r("help-tooltip",e.className)},o.createElement(i.a,{mouseLeaveDelay:.25,onShow:e.onShow,overlay:e.overlay,placement:e.placement},o.createElement("span",{className:"display-inline-flex-center"},t)))}},376:function(e,s,t){"use strict";t.d(s,"a",function(){return i});var o=t(354),r=t(403);function i({suggestions:e}){return o.createElement(r.a.Consumer,null,({addSuggestions:s,removeSuggestions:t})=>o.createElement(n,{addSuggestions:s,removeSuggestions:t,suggestions:e}))}class n extends o.PureComponent{componentDidMount(){this.props.addSuggestions(this.props.suggestions)}componentDidUpdate(e){e.suggestions!==this.props.suggestions&&(this.props.removeSuggestions(this.props.suggestions),this.props.addSuggestions(e.suggestions))}componentWillUnmount(){this.props.removeSuggestions(this.props.suggestions)}render(){return null}}},383:function(e,s,t){var o=t(384);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(358)(o,r);o.locals&&(e.exports=o.locals)},384:function(e,s,t){(e.exports=t(357)(!1)).push([e.i,"/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n.help-tooltip {\n  display: inline-flex;\n  align-items: center;\n  vertical-align: middle;\n}\n\n.help-toolip-link {\n  display: block;\n  width: 12px;\n  height: 12px;\n  border: none;\n}\n",""])},385:function(e,s,t){"use strict";function o(e,s){return`${s}(${e.displayName||e.name||"Component"})`}t.d(s,"a",function(){return o})},386:function(e,s,t){"use strict";t.d(s,"a",function(){return n});var o=t(354),r=t(355),i=t(366);class n extends o.PureComponent{constructor(){super(...arguments),this.handleClick=(e=>{e.preventDefault(),e.currentTarget.blur(),this.props.disabled||this.props.onCheck(!this.props.checked,this.props.id)})}render(){const e=this.props,s=e.children,t=e.disabled,n=e.loading,a=e.right,l=r("icon-checkbox",{"icon-checkbox-checked":this.props.checked,"icon-checkbox-single":this.props.thirdState,"icon-checkbox-disabled":t});return s?o.createElement("a",{className:r("link-checkbox",this.props.className,{note:t,disabled:t}),href:"#",id:this.props.id,onClick:this.handleClick},a&&s,o.createElement(i.a,{loading:Boolean(n)},o.createElement("i",{className:l})),!a&&s):n?o.createElement(i.a,null):o.createElement("a",{className:r(l,this.props.className),href:"#",id:this.props.id,onClick:this.handleClick})}}n.defaultProps={thirdState:!1}},396:function(e,s,t){"use strict";t.d(s,"a",function(){return p});var o=t(354),r=t(355),i=t(366),n=t(0),a=t(365),l=function(e,s){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&s.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)s.indexOf(o[r])<0&&(t[o[r]]=e[o[r]])}return t};function p(e){var s=e.ready,t=void 0===s||s,p=l(e,["ready"]);const u=p.total&&p.total>p.count,h=o.createElement("a",{className:"spacer-left",href:"#",onClick:e=>{e.preventDefault(),e.currentTarget.blur(),p.loadMore&&p.loadMore()}},Object(n.l)("show_more")),c=r("spacer-top note text-center",{"new-loading":!t},p.className);return o.createElement("footer",{className:c},Object(n.m)("x_of_y_shown",Object(a.formatMeasure)(p.count,"INT",null),Object(a.formatMeasure)(p.total,"INT",null)),null!=p.loadMore&&u?h:null,p.loading&&o.createElement(i.a,{className:"vertical-bottom spacer-left position-absolute"}))}},433:function(e,s,t){"use strict";t.d(s,"a",function(){return n});var o=t(354),r=t(355),i=t(363);class n extends o.PureComponent{constructor(){super(...arguments),this.handleChange=(e=>{const s=e.currentTarget.value;this.props.onCheck(s)}),this.renderOption=(e=>{const s=e.value===this.props.value,t=this.props.name+"__"+e.value;return o.createElement("li",{key:e.value},o.createElement("input",{checked:s,disabled:e.disabled,id:t,name:this.props.name,onChange:this.handleChange,type:"radio",value:e.value}),o.createElement(i.a,{overlay:e.tooltip||void 0},o.createElement("label",{htmlFor:t},e.label)))})}render(){return o.createElement("ul",{className:r("radio-toggle",this.props.className)},this.props.options.map(this.renderOption))}}n.defaultProps={disabled:!1,value:null}},579:function(e,s,t){"use strict";t.d(s,"a",function(){return p});var o=t(354),r=t(364),i=t(360),n=t(367),a=t(385),l=function(e,s){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&s.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)s.indexOf(o[r])<0&&(t[o[r]]=e[o[r]])}return t};function p(e){class s extends o.Component{render(){const s=this.props,t=s.customOrganizations,r=s.router,i=l(s,["customOrganizations","router"]);return!i.params.organizationKey&&t?(r.replace("/not_found"),null):o.createElement(e,Object.assign({},i))}}s.displayName=Object(a.a)(e,"forSingleOrganization");return Object(r.connect)(e=>({customOrganizations:Object(n.areThereCustomOrganizations)(e)}))(Object(i.withRouter)(s))}}}]);
//# sourceMappingURL=20.m.c56db488.chunk.js.map