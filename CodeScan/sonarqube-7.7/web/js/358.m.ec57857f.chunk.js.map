{"version":3,"sources":["webpack:///./src/main/js/app/components/PageTracker.tsx"],"names":["__webpack_require__","r","__webpack_exports__","d","PageTracker","react__WEBPACK_IMPORTED_MODULE_0__","react_ga__WEBPACK_IMPORTED_MODULE_1__","react_router__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_3__","_store_rootReducer__WEBPACK_IMPORTED_MODULE_4__","[object Object]","this","trackPage","_this$props","props","location","trackingId","setTimeout","pathname","prevProps","Object","state","value"],"mappings":"6FAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,gCAAAE,IAAA,IAAAC,EAAAL,EAAA,KAAAM,EAAAN,EAAA,MAAAO,EAAAP,EAAA,KAAAQ,EAAAR,EAAA,KAAAS,EAAAT,EAAA,KA+BM,MAAOI,UAAoBC,EAAA,cAAjCK,kCAiBEC,KAAAC,UAAY,MAAK,MAAAC,EACkBF,KAAKG,MAA9BC,EADOF,EACPE,SADOF,EACGG,YAGhBC,WAAW,IAAMX,EAAA,SAAyBS,EAASG,UAAW,OApBlER,oBACMC,KAAKG,MAAME,aACbV,EAAA,WAA2BK,KAAKG,MAAME,YACtCL,KAAKC,aAITF,mBAAmBS,GACGR,KAAKG,MAAMC,SAASG,WACvBC,EAAUJ,SAASG,UAGlCP,KAAKC,YAYTF,SACE,OAAO,MAWIR,EAAA,QAAAkB,OAAAb,EAAA,YAAWa,OAAAZ,EAAA,QAAAY,CAPDC,IACvB,MAAML,EAAaI,OAAAX,EAAA,sBAAAW,CAAsBC,EAAO,8BAChD,MAAO,CACLL,WAAYA,GAAcA,EAAWM,QAIfF,CAAyBhB","file":"js/358.m.ec57857f.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as GoogleAnalytics from 'react-ga';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { connect } from 'react-redux';\nimport { getGlobalSettingValue, Store } from '../../store/rootReducer';\n\ninterface StateProps {\n  trackingId?: string;\n}\n\ntype Props = WithRouterProps & StateProps;\n\nexport class PageTracker extends React.PureComponent<Props> {\n  componentDidMount() {\n    if (this.props.trackingId) {\n      GoogleAnalytics.initialize(this.props.trackingId);\n      this.trackPage();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    const currentPage = this.props.location.pathname;\n    const prevPage = prevProps.location.pathname;\n\n    if (currentPage !== prevPage) {\n      this.trackPage();\n    }\n  }\n\n  trackPage = () => {\n    const { location, trackingId } = this.props;\n    if (trackingId) {\n      // More info on the \"title and page not in sync\" issue: https://github.com/nfl/react-helmet/issues/189\n      setTimeout(() => GoogleAnalytics.pageview(location.pathname), 500);\n    }\n  };\n\n  render() {\n    return null;\n  }\n}\n\nconst mapStateToProps = (state: Store): StateProps => {\n  const trackingId = getGlobalSettingValue(state, 'sonar.analytics.trackingId');\n  return {\n    trackingId: trackingId && trackingId.value\n  };\n};\n\nexport default withRouter(connect(mapStateToProps)(PageTracker));\n"],"sourceRoot":""}